<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="ÂâçÁ´Ø,js,ÂºÇÊ≠•," />










<meta name="description" content="Promise ÁöÑÂá†ÈÅìÂü∫Á°ÄÈ¢ò Promise ÁªìÂêà setTimeout Promise ‰∏≠ÁöÑ then„ÄÅcatch„ÄÅfinally Promise ‰∏≠ÁöÑ all Âíå race async&#x2F;await ÁöÑÂá†ÈÅìÈ¢ò async Â§ÑÁêÜÈîôËØØ ÁªºÂêàÈ¢ò Âá†ÈÅìÂ§ßÂéÇÁöÑÈù¢ËØïÈ¢ò   ÂâçÊúüÂáÜÂ§á  Âú®ÂÅö‰∏ãÈù¢ üëá ÁöÑÈ¢òÁõÆ‰πãÂâçÔºåÊàëÂ∏åÊúõ‰Ω†ËÉΩÊ∏ÖÊ•öÂá†‰∏™Áü•ËØÜÁÇπ„ÄÇ event loop ÂÆÉÁöÑÊâßË°åÈ°∫Â∫èÔºö  ‰∏ÄÂºÄÂßãÊï¥‰∏™ËÑöÊú¨‰Ωú">
<meta property="og:type" content="article">
<meta property="og:title" content="Ë¶ÅÂ∞±Êù•45ÈÅìPromiseÈù¢ËØïÈ¢ò‰∏ÄÊ¨°ÁàΩÂà∞Â∫ï">
<meta property="og:url" content="https://daykalif.github.io/2020/11/26/JS/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91%E8%A6%81%E5%B0%B1%E6%9D%A545%E9%81%93Promise%E9%9D%A2%E8%AF%95%E9%A2%98%E4%B8%80%E6%AC%A1%E7%88%BD%E5%88%B0%E5%BA%95/index.html">
<meta property="og:site_name" content="Daykalif">
<meta property="og:description" content="Promise ÁöÑÂá†ÈÅìÂü∫Á°ÄÈ¢ò Promise ÁªìÂêà setTimeout Promise ‰∏≠ÁöÑ then„ÄÅcatch„ÄÅfinally Promise ‰∏≠ÁöÑ all Âíå race async&#x2F;await ÁöÑÂá†ÈÅìÈ¢ò async Â§ÑÁêÜÈîôËØØ ÁªºÂêàÈ¢ò Âá†ÈÅìÂ§ßÂéÇÁöÑÈù¢ËØïÈ¢ò   ÂâçÊúüÂáÜÂ§á  Âú®ÂÅö‰∏ãÈù¢ üëá ÁöÑÈ¢òÁõÆ‰πãÂâçÔºåÊàëÂ∏åÊúõ‰Ω†ËÉΩÊ∏ÖÊ•öÂá†‰∏™Áü•ËØÜÁÇπ„ÄÇ event loop ÂÆÉÁöÑÊâßË°åÈ°∫Â∫èÔºö  ‰∏ÄÂºÄÂßãÊï¥‰∏™ËÑöÊú¨‰Ωú">
<meta property="og:locale">
<meta property="og:image" content="https://www.daykalif.com/blog_img/promise1.png">
<meta property="og:image" content="https://www.daykalif.com/blog_img/promise2.png">
<meta property="og:image" content="https://www.daykalif.com/blog_img/promise3.png">
<meta property="article:published_time" content="2020-11-26T06:39:21.000Z">
<meta property="article:modified_time" content="2024-03-22T23:49:59.000Z">
<meta property="article:author" content="r00t_daykalif">
<meta property="article:tag" content="ÂâçÁ´Ø">
<meta property="article:tag" content="js">
<meta property="article:tag" content="ÂºÇÊ≠•">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.daykalif.com/blog_img/promise1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"hide","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: "",
      labels: ""
    }
  };
</script>



  <link rel="canonical" href="https://daykalif.github.io/2020/11/26/JS/„ÄêËΩ¨ËΩΩ„ÄëË¶ÅÂ∞±Êù•45ÈÅìPromiseÈù¢ËØïÈ¢ò‰∏ÄÊ¨°ÁàΩÂà∞Â∫ï/"/>





  <title>Ë¶ÅÂ∞±Êù•45ÈÅìPromiseÈù¢ËØïÈ¢ò‰∏ÄÊ¨°ÁàΩÂà∞Â∫ï | Daykalif</title>
  








<meta name="generator" content="Hexo 7.1.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Daykalif</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-È¶ñÈ°µ">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            È¶ñÈ°µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-ÊñáÁ´†">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            ÊñáÁ´†
          </a>
        </li>
      
        
        <li class="menu-item menu-item-ÂàÜÁ±ª">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            ÂàÜÁ±ª
          </a>
        </li>
      
        
        <li class="menu-item menu-item-ÂâçÁ´Ø">
          <a href="/categories/web/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            ÂâçÁ´Ø
          </a>
        </li>
      
        
        <li class="menu-item menu-item-ÂêéÁ´Ø">
          <a href="/categories/server/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-server"></i> <br />
            
            ÂêéÁ´Ø
          </a>
        </li>
      
        
        <li class="menu-item menu-item-ÂÖ≥‰∫éÊàë">
          <a href="/categories/aboutMe/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            ÂÖ≥‰∫éÊàë
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://daykalif.github.io/2020/11/26/JS/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91%E8%A6%81%E5%B0%B1%E6%9D%A545%E9%81%93Promise%E9%9D%A2%E8%AF%95%E9%A2%98%E4%B8%80%E6%AC%A1%E7%88%BD%E5%88%B0%E5%BA%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Daykalif">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Ë¶ÅÂ∞±Êù•45ÈÅìPromiseÈù¢ËØïÈ¢ò‰∏ÄÊ¨°ÁàΩÂà∞Â∫ï</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-11-26T14:39:21+08:00">
                2020-11-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index">
                    <span itemprop="name">web</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2020/11/26/JS/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91%E8%A6%81%E5%B0%B1%E6%9D%A545%E9%81%93Promise%E9%9D%A2%E8%AF%95%E9%A2%98%E4%B8%80%E6%AC%A1%E7%88%BD%E5%88%B0%E5%BA%95/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/11/26/JS/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91%E8%A6%81%E5%B0%B1%E6%9D%A545%E9%81%93Promise%E9%9D%A2%E8%AF%95%E9%A2%98%E4%B8%80%E6%AC%A1%E7%88%BD%E5%88%B0%E5%BA%95/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2020/11/26/JS/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91%E8%A6%81%E5%B0%B1%E6%9D%A545%E9%81%93Promise%E9%9D%A2%E8%AF%95%E9%A2%98%E4%B8%80%E6%AC%A1%E7%88%BD%E5%88%B0%E5%BA%95/" class="leancloud_visitors" data-flag-title="Ë¶ÅÂ∞±Êù•45ÈÅìPromiseÈù¢ËØïÈ¢ò‰∏ÄÊ¨°ÁàΩÂà∞Â∫ï">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  12.4k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  55
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <ul>
<li>Promise ÁöÑÂá†ÈÅìÂü∫Á°ÄÈ¢ò</li>
<li>Promise ÁªìÂêà setTimeout</li>
<li>Promise ‰∏≠ÁöÑ then„ÄÅcatch„ÄÅfinally</li>
<li>Promise ‰∏≠ÁöÑ all Âíå race</li>
<li>async&#x2F;await ÁöÑÂá†ÈÅìÈ¢ò</li>
<li>async Â§ÑÁêÜÈîôËØØ</li>
<li>ÁªºÂêàÈ¢ò</li>
<li>Âá†ÈÅìÂ§ßÂéÇÁöÑÈù¢ËØïÈ¢ò</li>
</ul>
<blockquote>
<p>ÂâçÊúüÂáÜÂ§á</p>
</blockquote>
<p>Âú®ÂÅö‰∏ãÈù¢ üëá ÁöÑÈ¢òÁõÆ‰πãÂâçÔºåÊàëÂ∏åÊúõ‰Ω†ËÉΩÊ∏ÖÊ•öÂá†‰∏™Áü•ËØÜÁÇπ„ÄÇ</p>
<p><em>event loop ÂÆÉÁöÑÊâßË°åÈ°∫Â∫èÔºö</em></p>
<ul>
<li>‰∏ÄÂºÄÂßãÊï¥‰∏™ËÑöÊú¨‰Ωú‰∏∫‰∏Ä‰∏™ÂÆè‰ªªÂä°ÊâßË°å</li>
<li>ÊâßË°åËøáÁ®ã‰∏≠ÂêåÊ≠•‰ª£Á†ÅÁõ¥Êé•ÊâßË°åÔºåÂÆè‰ªªÂä°ËøõÂÖ•ÂÆè‰ªªÂä°ÈòüÂàóÔºåÂæÆ‰ªªÂä°ËøõÂÖ•ÂæÆ‰ªªÂä°ÈòüÂàó</li>
<li>ÂΩìÂâçÂÆè‰ªªÂä°ÊâßË°åÂÆåÂá∫ÈòüÔºåÊ£ÄÊü•ÂæÆ‰ªªÂä°ÂàóË°®ÔºåÊúâÂàô‰æùÊ¨°ÊâßË°åÔºåÁõ¥Âà∞ÂÖ®ÈÉ®ÊâßË°åÂÆå</li>
<li>ÊâßË°åÊµèËßàÂô® UI Á∫øÁ®ãÁöÑÊ∏≤ÊüìÂ∑•‰Ωú</li>
<li>Ê£ÄÊü•ÊòØÂê¶Êúâ Web Worker ‰ªªÂä°ÔºåÊúâÂàôÊâßË°å</li>
<li>ÊâßË°åÂÆåÊú¨ËΩÆÁöÑÂÆè‰ªªÂä°ÔºåÂõûÂà∞ 2Ôºå‰æùÊ≠§Âæ™ÁéØÔºåÁõ¥Âà∞ÂÆè‰ªªÂä°ÂíåÂæÆ‰ªªÂä°ÈòüÂàóÈÉΩ‰∏∫Á©∫</li>
</ul>
<p><strong>ÂæÆ‰ªªÂä°ÂåÖÊã¨Ôºö</strong> MutationObserver„ÄÅPromise.then()Êàñ reject()„ÄÅPromise ‰∏∫Âü∫Á°ÄÂºÄÂèëÁöÑÂÖ∂ÂÆÉÊäÄÊúØÔºåÊØîÂ¶Ç fetch API„ÄÅV8 ÁöÑÂûÉÂúæÂõûÊî∂ËøáÁ®ã„ÄÅNode Áã¨ÊúâÁöÑ process.nextTick„ÄÇ</p>
<p><strong>ÂÆè‰ªªÂä°ÂåÖÊã¨Ôºö</strong> script„ÄÅscript „ÄÅsetTimeout„ÄÅsetInterval „ÄÅsetImmediate „ÄÅI&#x2F;O „ÄÅUI rendering„ÄÇ</p>
<p><strong>Ê≥®ÊÑè ‚ö†Ô∏èÔºö</strong> Âú®ÊâÄÊúâ‰ªªÂä°ÂºÄÂßãÁöÑÊó∂ÂÄôÔºåÁî±‰∫éÂÆè‰ªªÂä°‰∏≠ÂåÖÊã¨‰∫Ü scriptÔºåÊâÄ‰ª•ÊµèËßàÂô®‰ºöÂÖàÊâßË°å‰∏Ä‰∏™ÂÆè‰ªªÂä°ÔºåÂú®Ëøô‰∏™ËøáÁ®ã‰∏≠‰Ω†ÁúãÂà∞ÁöÑÂª∂Ëøü‰ªªÂä°(‰æãÂ¶Ç setTimeout)Â∞ÜË¢´ÊîæÂà∞‰∏ã‰∏ÄËΩÆÂÆè‰ªªÂä°‰∏≠Êù•ÊâßË°å„ÄÇ</p>
<h4 id="1-Promise-ÁöÑÂá†ÈÅìÂü∫Á°ÄÈ¢ò"><a href="#1-Promise-ÁöÑÂá†ÈÅìÂü∫Á°ÄÈ¢ò" class="headerlink" title="1. Promise ÁöÑÂá†ÈÅìÂü∫Á°ÄÈ¢ò"></a>1. Promise ÁöÑÂá†ÈÅìÂü∫Á°ÄÈ¢ò</h4><h5 id="1-1-È¢òÁõÆ‰∏Ä"><a href="#1-1-È¢òÁõÆ‰∏Ä" class="headerlink" title="1.1 È¢òÁõÆ‰∏Ä"></a>1.1 È¢òÁõÆ‰∏Ä</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise1&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;1&quot;</span>, promise1);</span><br></pre></td></tr></table></figure>

<p>ËøáÁ®ãÂàÜÊûêÔºö</p>
<ul>
<li>‰ªé‰∏äËá≥‰∏ãÔºåÂÖàÈÅáÂà∞ new PromiseÔºåÊâßË°åËØ•ÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÁöÑ‰ª£Á†Å promise1</li>
<li>ÁÑ∂ÂêéÊâßË°åÂêåÊ≠•‰ª£Á†Å 1ÔºåÊ≠§Êó∂ promise1 Ê≤°ÊúâË¢´ resolve ÊàñËÄÖ rejectÔºåÂõ†Ê≠§Áä∂ÊÄÅËøòÊòØ pending</li>
</ul>
<p>ÁªìÊûúÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;promise1&#x27;</span></span><br><span class="line"><span class="string">&#x27;1&#x27;</span> <span class="title class_">Promise</span>&#123;&lt;pending&gt;&#125;</span><br></pre></td></tr></table></figure>

<h5 id="1-2-È¢òÁõÆ‰∫å"><a href="#1-2-È¢òÁõÆ‰∫å" class="headerlink" title="1.2 È¢òÁõÆ‰∫å"></a>1.2 È¢òÁõÆ‰∫å</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="title function_">resolve</span>(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>);</span><br></pre></td></tr></table></figure>

<p>ËøáÁ®ãÂàÜÊûêÔºö</p>
<ul>
<li>‰ªé‰∏äËá≥‰∏ãÔºåÂÖàÈÅáÂà∞ new PromiseÔºåÊâßË°åÂÖ∂‰∏≠ÁöÑÂêåÊ≠•‰ª£Á†Å 1</li>
<li>ÂÜçÈÅáÂà∞ resolve(‚Äòsuccess‚Äô)Ôºå Â∞Ü promise ÁöÑÁä∂ÊÄÅÊîπ‰∏∫‰∫Ü resolved Âπ∂‰∏îÂ∞ÜÂÄº‰øùÂ≠ò‰∏ãÊù•</li>
<li>ÁªßÁª≠ÊâßË°åÂêåÊ≠•‰ª£Á†Å 2</li>
<li>Ë∑≥Âá∫ promiseÔºåÂæÄ‰∏ãÊâßË°åÔºåÁ¢∞Âà∞ promise.then Ëøô‰∏™ÂæÆ‰ªªÂä°ÔºåÂ∞ÜÂÖ∂Âä†ÂÖ•ÂæÆ‰ªªÂä°ÈòüÂàó</li>
<li>ÊâßË°åÂêåÊ≠•‰ª£Á†Å 4</li>
<li>Êú¨ËΩÆÂÆè‰ªªÂä°ÂÖ®ÈÉ®ÊâßË°åÂÆåÊØïÔºåÊ£ÄÊü•ÂæÆ‰ªªÂä°ÈòüÂàóÔºåÂèëÁé∞ promise.then Ëøô‰∏™ÂæÆ‰ªªÂä°‰∏îÁä∂ÊÄÅ‰∏∫ resolvedÔºåÊâßË°åÂÆÉ„ÄÇ</li>
</ul>
<p>ÁªìÊûúÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">4</span> <span class="number">3</span></span><br></pre></td></tr></table></figure>

<h5 id="1-3-È¢òÁõÆ‰∏â"><a href="#1-3-È¢òÁõÆ‰∏â" class="headerlink" title="1.3 È¢òÁõÆ‰∏â"></a>1.3 È¢òÁõÆ‰∏â</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>);</span><br></pre></td></tr></table></figure>

<p>ËøáÁ®ãÂàÜÊûê:</p>
<ul>
<li>ÂíåÈ¢òÁõÆ‰∫åÁõ∏‰ººÔºåÂè™‰∏çËøáÂú® promise ‰∏≠Âπ∂Ê≤°Êúâ resolve ÊàñËÄÖ reject</li>
<li>Âõ†Ê≠§ promise.then Âπ∂‰∏ç‰ºöÊâßË°åÔºåÂÆÉÂè™ÊúâÂú®Ë¢´ÊîπÂèò‰∫ÜÁä∂ÊÄÅ‰πãÂêéÊâç‰ºöÊâßË°å„ÄÇ</li>
</ul>
<p>ÁªìÊûúÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">4</span></span><br></pre></td></tr></table></figure>

<h5 id="1-4-È¢òÁõÆÂõõ"><a href="#1-4-È¢òÁõÆÂõõ" class="headerlink" title="1.4 È¢òÁõÆÂõõ"></a>1.4 È¢òÁõÆÂõõ</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise1&quot;</span>);</span><br><span class="line">  <span class="title function_">resolve</span>(<span class="string">&quot;resolve1&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise2 = promise1.<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;1&quot;</span>, promise1);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;2&quot;</span>, promise2);</span><br></pre></td></tr></table></figure>

<p>ËøáÁ®ãÂàÜÊûêÔºö</p>
<ul>
<li>‰ªé‰∏äËá≥‰∏ãÔºåÂÖàÈÅáÂà∞ new PromiseÔºåÊâßË°åËØ•ÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÁöÑ‰ª£Á†Å promise1</li>
<li>Á¢∞Âà∞ resolve ÂáΩÊï∞, Â∞Ü promise1 ÁöÑÁä∂ÊÄÅÊîπÂèò‰∏∫ resolved, Âπ∂Â∞ÜÁªìÊûú‰øùÂ≠ò‰∏ãÊù•</li>
<li>Á¢∞Âà∞ promise1.then Ëøô‰∏™ÂæÆ‰ªªÂä°ÔºåÂ∞ÜÂÆÉÊîæÂÖ•ÂæÆ‰ªªÂä°ÈòüÂàó</li>
<li>promise2 ÊòØ‰∏Ä‰∏™Êñ∞ÁöÑÁä∂ÊÄÅ‰∏∫ pending ÁöÑ Promise</li>
<li>ÊâßË°åÂêåÊ≠•‰ª£Á†Å 1Ôºå ÂêåÊó∂ÊâìÂç∞Âá∫ promise1 ÁöÑÁä∂ÊÄÅÊòØ resolved</li>
<li>ÊâßË°åÂêåÊ≠•‰ª£Á†Å 2ÔºåÂêåÊó∂ÊâìÂç∞Âá∫ promise2 ÁöÑÁä∂ÊÄÅÊòØ pending</li>
<li>ÂÆè‰ªªÂä°ÊâßË°åÂÆåÊØïÔºåÊü•ÊâæÂæÆ‰ªªÂä°ÈòüÂàóÔºåÂèëÁé∞ promise1.then Ëøô‰∏™ÂæÆ‰ªªÂä°‰∏îÁä∂ÊÄÅ‰∏∫ resolvedÔºåÊâßË°åÂÆÉ„ÄÇ</li>
</ul>
<p>ÁªìÊûúÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;promise1&#x27;</span></span><br><span class="line"><span class="string">&#x27;1&#x27;</span> <span class="title class_">Promise</span>&#123;&lt;resolved&gt;: <span class="string">&#x27;resolve1&#x27;</span>&#125;</span><br><span class="line"><span class="string">&#x27;2&#x27;</span> <span class="title class_">Promise</span>&#123;&lt;pending&gt;&#125;</span><br><span class="line"><span class="string">&#x27;resolve1&#x27;</span></span><br></pre></td></tr></table></figure>

<h5 id="1-5-È¢òÁõÆ‰∫î"><a href="#1-5-È¢òÁõÆ‰∫î" class="headerlink" title="1.5 È¢òÁõÆ‰∫î"></a>1.5 È¢òÁõÆ‰∫î</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">fn</span> = (<span class="params"></span>) =&gt;</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="title function_">fn</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;start&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>ËøôÈÅìÈ¢òÈáåÊúÄÂÖàÊâßË°åÁöÑÊòØ‚Äôstart‚ÄôÂêó ü§îÔ∏è Ôºü</p>
<p>ËØ∑‰ªîÁªÜÁúãÁúãÂì¶Ôºåfn ÂáΩÊï∞ÂÆÉÊòØÁõ¥Êé•ËøîÂõû‰∫Ü‰∏Ä‰∏™ new Promise ÁöÑÔºåËÄå‰∏î fn ÂáΩÊï∞ÁöÑË∞ÉÁî®ÊòØÂú® start ‰πãÂâçÔºåÊâÄ‰ª•ÂÆÉÈáåÈù¢ÁöÑÂÜÖÂÆπÂ∫îËØ•‰ºöÂÖàÊâßË°å„ÄÇ</p>
<p>ÁªìÊûúÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>;</span><br><span class="line">(<span class="string">&quot;start&quot;</span>);</span><br><span class="line">(<span class="string">&quot;success&quot;</span>);</span><br></pre></td></tr></table></figure>

<h5 id="1-6-È¢òÁõÆÂÖ≠"><a href="#1-6-È¢òÁõÆÂÖ≠" class="headerlink" title="1.6 È¢òÁõÆÂÖ≠"></a>1.6 È¢òÁõÆÂÖ≠</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">fn</span> = (<span class="params"></span>) =&gt;</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;start&quot;</span>);</span><br><span class="line"><span class="title function_">fn</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ÊòØÁöÑÔºåÁé∞Âú® start Â∞±Âú® 1 ‰πãÂâçÊâìÂç∞Âá∫Êù•‰∫ÜÔºåÂõ†‰∏∫ fn ÂáΩÊï∞ÊòØ‰πãÂêéÊâßË°åÁöÑ„ÄÇ</p>
<p><strong>Ê≥®ÊÑè ‚ö†Ô∏èÔºö</strong> ‰πãÂâçÊàë‰ª¨ÂæàÂÆπÊòìÂ∞±‰ª•‰∏∫ÁúãÂà∞ new Promise()Â∞±ÊâßË°åÂÆÉÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÂáΩÊï∞‰∫ÜÔºåÂÖ∂ÂÆûËøôÊòØ‰∏çÂØπÁöÑÔºåÂ∞±ÂÉèËøô‰∏§ÈÅìÈ¢ò‰∏≠ÔºåÊàë‰ª¨ÂæóÊ≥®ÊÑèÂÆÉÊòØ‰∏çÊòØË¢´ÂåÖË£πÂú®ÂáΩÊï∞ÂΩì‰∏≠ÔºåÂ¶ÇÊûúÊòØÁöÑËØùÔºåÂè™ÊúâÂú®ÂáΩÊï∞Ë∞ÉÁî®ÁöÑÊó∂ÂÄôÊâç‰ºöÊâßË°å„ÄÇ</p>
<p>Á≠îÊ°àÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;start&quot;</span>;</span><br><span class="line"><span class="number">1</span>;</span><br><span class="line">(<span class="string">&quot;success&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="2-Promise-ÁªìÂêà-setTimeout"><a href="#2-Promise-ÁªìÂêà-setTimeout" class="headerlink" title="2. Promise ÁªìÂêà setTimeout"></a>2. Promise ÁªìÂêà setTimeout</h4><h5 id="2-1-È¢òÁõÆ‰∏Ä"><a href="#2-1-È¢òÁõÆ‰∏Ä" class="headerlink" title="2.1 È¢òÁõÆ‰∏Ä"></a>2.1 È¢òÁõÆ‰∏Ä</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;start&quot;</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;time&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;resolve&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;end&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>ËøáÁ®ãÂàÜÊûêÔºö</p>
<ul>
<li>ÂàöÂºÄÂßãÊï¥‰∏™ËÑöÊú¨‰Ωú‰∏∫‰∏Ä‰∏™ÂÆè‰ªªÂä°Êù•ÊâßË°åÔºåÂØπ‰∫éÂêåÊ≠•‰ª£Á†ÅÁõ¥Êé•ÂéãÂÖ•ÊâßË°åÊ†àËøõË°åÊâßË°åÔºåÂõ†Ê≠§ÂÖàÊâìÂç∞Âá∫ start Âíå end„ÄÇ</li>
<li>setTimout ‰Ωú‰∏∫‰∏Ä‰∏™ÂÆè‰ªªÂä°Ë¢´ÊîæÂÖ•ÂÆè‰ªªÂä°ÈòüÂàó(‰∏ã‰∏Ä‰∏™)</li>
<li>Promise.then ‰Ωú‰∏∫‰∏Ä‰∏™ÂæÆ‰ªªÂä°Ë¢´ÊîæÂÖ•ÂæÆ‰ªªÂä°ÈòüÂàó</li>
<li>Êú¨Ê¨°ÂÆè‰ªªÂä°ÊâßË°åÂÆåÔºåÊ£ÄÊü•ÂæÆ‰ªªÂä°ÔºåÂèëÁé∞ Promise.thenÔºåÊâßË°åÂÆÉ</li>
<li>Êé•‰∏ãÊù•ËøõÂÖ•‰∏ã‰∏Ä‰∏™ÂÆè‰ªªÂä°ÔºåÂèëÁé∞ setTimeoutÔºåÊâßË°å„ÄÇ</li>
</ul>
<p>ÁªìÊûúÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;start&quot;</span>;</span><br><span class="line"><span class="string">&quot;end&quot;</span>;</span><br><span class="line"><span class="string">&quot;resolve&quot;</span>;</span><br><span class="line"><span class="string">&quot;time&quot;</span>;</span><br></pre></td></tr></table></figure>

<h5 id="2-2-È¢òÁõÆ‰∫å"><a href="#2-2-È¢òÁõÆ‰∫å" class="headerlink" title="2.2 È¢òÁõÆ‰∫å"></a>2.2 È¢òÁõÆ‰∫å</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;timerStart&quot;</span>);</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;timerEnd&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>);</span><br></pre></td></tr></table></figure>

<p>ËøáÁ®ãÂàÜÊûêÔºö</p>
<p>Âíå<strong>È¢òÁõÆ 1.2</strong>ÂæàÂÉèÔºå‰∏çËøáÂú® resolve ÁöÑÂ§ñÂ±ÇÂä†‰∫Ü‰∏ÄÂ±Ç setTimeout ÂÆöÊó∂Âô®„ÄÇ</p>
<ul>
<li>‰ªé‰∏äËá≥‰∏ãÔºåÂÖàÈÅáÂà∞ new PromiseÔºåÊâßË°åËØ•ÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÁöÑ‰ª£Á†Å 1</li>
<li>ÁÑ∂ÂêéÁ¢∞Âà∞‰∫ÜÂÆöÊó∂Âô®ÔºåÂ∞ÜËøô‰∏™ÂÆöÊó∂Âô®‰∏≠ÁöÑÂáΩÊï∞ÊîæÂà∞‰∏ã‰∏Ä‰∏™ÂÆè‰ªªÂä°ÁöÑÂª∂ËøüÈòüÂàó‰∏≠Á≠âÂæÖÊâßË°å</li>
<li>ÊâßË°åÂêåÊ≠•‰ª£Á†Å 2</li>
<li>Ë∑≥Âá∫ promise ÂáΩÊï∞ÔºåÈÅáÂà∞ promise.thenÔºå‰ΩÜÂÖ∂Áä∂ÊÄÅËøòÊòØ‰∏∫ pendingÔºåËøôÈáåÁêÜËß£‰∏∫ÂÖà‰∏çÊâßË°å</li>
<li>ÊâßË°åÂêåÊ≠•‰ª£Á†Å 4</li>
<li>‰∏ÄËΩÆÂæ™ÁéØËøáÂêéÔºåËøõÂÖ•Á¨¨‰∫åÊ¨°ÂÆè‰ªªÂä°ÔºåÂèëÁé∞Âª∂ËøüÈòüÂàó‰∏≠Êúâ setTimeout ÂÆöÊó∂Âô®ÔºåÊâßË°åÂÆÉ</li>
<li>È¶ñÂÖàÊâßË°å timerStartÔºåÁÑ∂ÂêéÈÅáÂà∞‰∫Ü resolveÔºåÂ∞Ü promise ÁöÑÁä∂ÊÄÅÊîπ‰∏∫ resolved ‰∏î‰øùÂ≠òÁªìÊûúÂπ∂Â∞Ü‰πãÂâçÁöÑ promise.then Êé®ÂÖ•ÂæÆ‰ªªÂä°ÈòüÂàó</li>
<li>ÁªßÁª≠ÊâßË°åÂêåÊ≠•‰ª£Á†Å timerEnd</li>
<li>ÂÆè‰ªªÂä°ÂÖ®ÈÉ®ÊâßË°åÂÆåÊØïÔºåÊü•ÊâæÂæÆ‰ªªÂä°ÈòüÂàóÔºåÂèëÁé∞ promise.then Ëøô‰∏™ÂæÆ‰ªªÂä°ÔºåÊâßË°åÂÆÉ„ÄÇ</li>
</ul>
<p>Âõ†Ê≠§ÊâßË°åÁªìÊûú‰∏∫Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>;</span><br><span class="line"><span class="number">2</span>;</span><br><span class="line"><span class="number">4</span>;</span><br><span class="line">(<span class="string">&quot;timerStart&quot;</span>);</span><br><span class="line">(<span class="string">&quot;timerEnd&quot;</span>);</span><br><span class="line">(<span class="string">&quot;success&quot;</span>);</span><br></pre></td></tr></table></figure>

<h5 id="2-3-È¢òÁõÆ‰∏â"><a href="#2-3-È¢òÁõÆ‰∏â" class="headerlink" title="2.3 È¢òÁõÆ‰∏â"></a>2.3 È¢òÁõÆ‰∏â</h5><p>È¢òÁõÆ‰∏âÂàÜ‰∫Ü‰∏§‰∏™È¢òÁõÆÔºåÂõ†‰∏∫ÁúãÁùÄÈÉΩÂ∑Æ‰∏çÂ§öÔºå‰∏çËøáÊâßË°åÁöÑÁªìÊûúÂç¥‰∏ç‰∏ÄÊ†∑ÔºåÂ§ßÂÆ∂‰∏çÂ¶®ÂÖàÁåúÁåú‰∏ãÈù¢‰∏§‰∏™È¢òÁõÆÂàÜÂà´ÊâßË°å‰ªÄ‰πàÔºö</p>
<h6 id="1"><a href="#1" class="headerlink" title="(1)"></a>(1)</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;timer1&quot;</span>);</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;timer3&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;timer2&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;start&quot;</span>);</span><br></pre></td></tr></table></figure>

<h6 id="2"><a href="#2" class="headerlink" title="(2)"></a>(2)</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;timer1&quot;</span>);</span><br><span class="line">  <span class="title class_">Promise</span>.<span class="title function_">resolve</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;timer2&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;start&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>ÊâßË°åÁªìÊûúÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;start&quot;</span>;</span><br><span class="line"><span class="string">&quot;timer1&quot;</span>;</span><br><span class="line"><span class="string">&quot;timer2&quot;</span>;</span><br><span class="line"><span class="string">&quot;timer3&quot;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;start&quot;</span>;</span><br><span class="line"><span class="string">&quot;timer1&quot;</span>;</span><br><span class="line"><span class="string">&quot;promise&quot;</span>;</span><br><span class="line"><span class="string">&quot;timer2&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>Ëøô‰∏§‰∏™‰æãÂ≠êÔºåÁúãÁùÄÂ•ΩÂÉèÂè™ÊòØÊääÁ¨¨‰∏Ä‰∏™ÂÆöÊó∂Âô®‰∏≠ÁöÑÂÜÖÂÆπÊç¢‰∫Ü‰∏Ä‰∏ãËÄåÂ∑≤„ÄÇ</p>
<p>‰∏Ä‰∏™ÊòØ‰∏∫ÂÆöÊó∂Âô® timer3Ôºå‰∏Ä‰∏™ÊòØ‰∏∫ Promise.then</p>
<p>‰ΩÜÊòØÂ¶ÇÊûúÊòØÂÆöÊó∂Âô® timer3 ÁöÑËØùÔºåÂÆÉ‰ºöÂú® timer2 ÂêéÊâßË°åÔºåËÄå Promise.then Âç¥ÊòØÂú® timer2 ‰πãÂâçÊâßË°å„ÄÇ</p>
<p>‰Ω†ÂèØ‰ª•ËøôÊ†∑ÁêÜËß£ÔºåPromise.then ÊòØÂæÆ‰ªªÂä°ÔºåÂÆÉ‰ºöË¢´Âä†ÂÖ•Âà∞Êú¨ËΩÆ‰∏≠ÁöÑÂæÆ‰ªªÂä°ÂàóË°®ÔºåËÄåÂÆöÊó∂Âô® timer3 ÊòØÂÆè‰ªªÂä°ÔºåÂÆÉ‰ºöË¢´Âä†ÂÖ•Âà∞‰∏ã‰∏ÄËΩÆÁöÑÂÆè‰ªªÂä°‰∏≠„ÄÇ</p>
<h5 id="2-4-È¢òÁõÆÂõõ"><a href="#2-4-È¢òÁõÆÂõõ" class="headerlink" title="2.4 È¢òÁõÆÂõõ"></a>2.4 È¢òÁõÆÂõõ</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise1&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> timer2 = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;timer2&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> timer1 = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;timer1&quot;</span>);</span><br><span class="line">  <span class="title class_">Promise</span>.<span class="title function_">resolve</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise2&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;start&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>ËøôÈÅìÈ¢òÁ®çÂæÆÁöÑÈöæ‰∏Ä‰∫õÔºåÂú® promise ‰∏≠ÊâßË°åÂÆöÊó∂Âô®ÔºåÂèàÂú®ÂÆöÊó∂Âô®‰∏≠ÊâßË°å promiseÔºõ</p>
<p>Âπ∂‰∏îË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåËøôÈáåÁöÑ Promise ÊòØÁõ¥Êé• resolve ÁöÑÔºåËÄå‰πãÂâçÁöÑ new Promise ‰∏ç‰∏ÄÊ†∑„ÄÇ</p>
<p>Âõ†Ê≠§ËøáÁ®ãÂàÜÊûê‰∏∫Ôºö</p>
<ul>
<li>ÂàöÂºÄÂßãÊï¥‰∏™ËÑöÊú¨‰Ωú‰∏∫Á¨¨‰∏ÄÊ¨°ÂÆè‰ªªÂä°Êù•ÊâßË°åÔºåÊàë‰ª¨Â∞ÜÂÆÉÊ†áËÆ∞‰∏∫ÂÆè 1Ôºå‰ªé‰∏äËá≥‰∏ãÊâßË°å</li>
<li>ÈÅáÂà∞ Promise.resolve().then Ëøô‰∏™ÂæÆ‰ªªÂä°ÔºåÂ∞Ü then ‰∏≠ÁöÑÂÜÖÂÆπÂä†ÂÖ•Á¨¨‰∏ÄÊ¨°ÁöÑÂæÆ‰ªªÂä°ÈòüÂàóÊ†áËÆ∞‰∏∫ÂæÆ 1</li>
<li>ÈÅáÂà∞ÂÆöÊó∂Âô® timer1ÔºåÂ∞ÜÂÆÉÂä†ÂÖ•‰∏ã‰∏ÄÊ¨°ÂÆè‰ªªÂä°ÁöÑÂª∂ËøüÂàóË°®ÔºåÊ†áËÆ∞‰∏∫ÂÆè 2ÔºåÁ≠âÂæÖÊâßË°å(ÂÖà‰∏çÁÆ°ÈáåÈù¢ÊòØ‰ªÄ‰πàÂÜÖÂÆπ)</li>
<li>ÊâßË°åÂÆè 1 ‰∏≠ÁöÑÂêåÊ≠•‰ª£Á†Å start</li>
<li>Á¨¨‰∏ÄÊ¨°ÂÆè‰ªªÂä°(ÂÆè 1)ÊâßË°åÂÆåÊØïÔºåÊ£ÄÊü•Á¨¨‰∏ÄÊ¨°ÁöÑÂæÆ‰ªªÂä°ÈòüÂàó(ÂæÆ 1)ÔºåÂèëÁé∞Êúâ‰∏Ä‰∏™ promise.then Ëøô‰∏™ÂæÆ‰ªªÂä°ÈúÄË¶ÅÊâßË°å</li>
<li>ÊâßË°åÊâìÂç∞Âá∫ÂæÆ 1 ‰∏≠ÂêåÊ≠•‰ª£Á†Å promise1ÔºåÁÑ∂ÂêéÂèëÁé∞ÂÆöÊó∂Âô® timer2ÔºåÂ∞ÜÂÆÉÂä†ÂÖ•ÂÆè 2 ÁöÑÂêéÈù¢ÔºåÊ†áËÆ∞‰∏∫ÂÆè 3</li>
<li>Á¨¨‰∏ÄÊ¨°ÂæÆ‰ªªÂä°ÈòüÂàó(ÂæÆ 1)ÊâßË°åÂÆåÊØïÔºåÊâßË°åÁ¨¨‰∫åÊ¨°ÂÆè‰ªªÂä°(ÂÆè 2)ÔºåÈ¶ñÂÖàÊâßË°åÂêåÊ≠•‰ª£Á†Å timer1</li>
<li>ÂêéÈÅáÂà∞‰∫Ü promise2 Ëøô‰∏™ÂæÆ‰ªªÂä°ÔºåÂ∞ÜÂÆÉÂä†ÂÖ•Ê≠§Ê¨°Âæ™ÁéØÁöÑÂæÆ‰ªªÂä°ÈòüÂàóÔºåÊ†áËÆ∞‰∏∫ÂæÆ 2</li>
<li>ÂÆè 2 ‰∏≠Ê≤°ÊúâÂêåÊ≠•‰ª£Á†ÅÂèØÊâßË°å‰∫ÜÔºåÊü•ÊâæÊú¨Ê¨°Âæ™ÁéØÁöÑÂæÆ‰ªªÂä°ÈòüÂàó(ÂæÆ 2)ÔºåÂèëÁé∞‰∫Ü promise2ÔºåÊâßË°åÂÆÉ</li>
<li>Á¨¨‰∫åËΩÆÊâßË°åÂÆåÊØïÔºåÊâßË°åÂÆè 3ÔºåÊâìÂç∞Âá∫ timer2</li>
</ul>
<p>ÊâÄ‰ª•ÁªìÊûú‰∏∫Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;start&quot;</span>;</span><br><span class="line"><span class="string">&quot;promise1&quot;</span>;</span><br><span class="line"><span class="string">&quot;timer1&quot;</span>;</span><br><span class="line"><span class="string">&quot;promise2&quot;</span>;</span><br><span class="line"><span class="string">&quot;timer2&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>Â¶ÇÊûúÊÑüËßâÊúâÁÇπÁªïÁöÑËØùÔºåÂèØ‰ª•Áúã‰∏ãÈù¢ËøôÂº†ÂõæÔºåÂ∞±‰∏ÄÁõÆ‰∫ÜÁÑ∂‰∫Ü„ÄÇ</p>
<p><img src="https://www.daykalif.com/blog_img/promise1.png" alt="promise"></p>
<h5 id="2-5-È¢òÁõÆ‰∫î"><a href="#2-5-È¢òÁõÆ‰∫î" class="headerlink" title="2.5 È¢òÁõÆ‰∫î"></a>2.5 È¢òÁõÆ‰∫î</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise2 = promise1.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;error!!!&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise1&quot;</span>, promise1);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise2&quot;</span>, promise2);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise1&quot;</span>, promise1);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise2&quot;</span>, promise2);</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br></pre></td></tr></table></figure>

<p>ËøáÁ®ãÂàÜÊûêÔºö</p>
<ul>
<li>‰ªé‰∏äËá≥‰∏ãÔºåÂÖàÊâßË°åÁ¨¨‰∏Ä‰∏™ new Promise ‰∏≠ÁöÑÂáΩÊï∞ÔºåÁ¢∞Âà∞ setTimeout Â∞ÜÂÆÉÂä†ÂÖ•‰∏ã‰∏Ä‰∏™ÂÆè‰ªªÂä°ÂàóË°®</li>
<li>Ë∑≥Âá∫ new PromiseÔºåÁ¢∞Âà∞ promise1.then Ëøô‰∏™ÂæÆ‰ªªÂä°Ôºå‰ΩÜÂÖ∂Áä∂ÊÄÅËøòÊòØ‰∏∫ pendingÔºåËøôÈáåÁêÜËß£‰∏∫ÂÖà‰∏çÊâßË°å</li>
<li>promise2 ÊòØ‰∏Ä‰∏™Êñ∞ÁöÑÁä∂ÊÄÅ‰∏∫ pending ÁöÑ Promise</li>
<li>ÊâßË°åÂêåÊ≠•‰ª£Á†Å console.log(‚Äòpromise1‚Äô)Ôºå‰∏îÊâìÂç∞Âá∫ÁöÑ promise1 ÁöÑÁä∂ÊÄÅ‰∏∫ pending</li>
<li>ÊâßË°åÂêåÊ≠•‰ª£Á†Å console.log(‚Äòpromise2‚Äô)Ôºå‰∏îÊâìÂç∞Âá∫ÁöÑ promise2 ÁöÑÁä∂ÊÄÅ‰∏∫ pending</li>
<li>Á¢∞Âà∞Á¨¨‰∫å‰∏™ÂÆöÊó∂Âô®ÔºåÂ∞ÜÂÖ∂ÊîæÂÖ•‰∏ã‰∏Ä‰∏™ÂÆè‰ªªÂä°ÂàóË°®</li>
<li>Á¨¨‰∏ÄËΩÆÂÆè‰ªªÂä°ÊâßË°åÁªìÊùüÔºåÂπ∂‰∏îÊ≤°ÊúâÂæÆ‰ªªÂä°ÈúÄË¶ÅÊâßË°åÔºåÂõ†Ê≠§ÊâßË°åÁ¨¨‰∫åËΩÆÂÆè‰ªªÂä°</li>
<li>ÂÖàÊâßË°åÁ¨¨‰∏Ä‰∏™ÂÆöÊó∂Âô®ÈáåÁöÑÂÜÖÂÆπÔºåÂ∞Ü promise1 ÁöÑÁä∂ÊÄÅÊîπ‰∏∫ resolved ‰∏î‰øùÂ≠òÁªìÊûúÂπ∂Â∞Ü‰πãÂâçÁöÑ promise1.then Êé®ÂÖ•ÂæÆ‰ªªÂä°ÈòüÂàó</li>
<li>ËØ•ÂÆöÊó∂Âô®‰∏≠Ê≤°ÊúâÂÖ∂ÂÆÉÁöÑÂêåÊ≠•‰ª£Á†ÅÂèØÊâßË°åÔºåÂõ†Ê≠§ÊâßË°åÊú¨ËΩÆÁöÑÂæÆ‰ªªÂä°ÈòüÂàóÔºå‰πüÂ∞±ÊòØ promise1.thenÔºåÂÆÉÊäõÂá∫‰∫Ü‰∏Ä‰∏™ÈîôËØØÔºå‰∏îÂ∞Ü promise2 ÁöÑÁä∂ÊÄÅËÆæÁΩÆ‰∏∫‰∫Ü rejected</li>
<li>Á¨¨‰∏Ä‰∏™ÂÆöÊó∂Âô®ÊâßË°åÂÆåÊØïÔºåÂºÄÂßãÊâßË°åÁ¨¨‰∫å‰∏™ÂÆöÊó∂Âô®‰∏≠ÁöÑÂÜÖÂÆπ</li>
<li>ÊâìÂç∞Âá∫‚Äôpromise1‚ÄôÔºå‰∏îÊ≠§Êó∂ promise1 ÁöÑÁä∂ÊÄÅ‰∏∫ resolved</li>
<li>ÊâìÂç∞Âá∫‚Äôpromise2‚ÄôÔºå‰∏îÊ≠§Êó∂ promise2 ÁöÑÁä∂ÊÄÅ‰∏∫ rejected</li>
</ul>
<p>ÂÆåÊï¥ÁöÑÁªìÊûú‰∏∫Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;promise1&#x27;</span> <span class="title class_">Promise</span>&#123;&lt;pending&gt;&#125;</span><br><span class="line"><span class="string">&#x27;promise2&#x27;</span> <span class="title class_">Promise</span>&#123;&lt;pending&gt;&#125;</span><br><span class="line">test5.<span class="property">html</span>:<span class="number">102</span> <span class="title class_">Uncaught</span> (<span class="keyword">in</span> promise) <span class="title class_">Error</span>: error!!! at test.<span class="property">html</span>:<span class="number">102</span></span><br><span class="line"><span class="string">&#x27;promise1&#x27;</span> <span class="title class_">Promise</span>&#123;&lt;resolved&gt;: <span class="string">&quot;success&quot;</span>&#125;</span><br><span class="line"><span class="string">&#x27;promise2&#x27;</span> <span class="title class_">Promise</span>&#123;&lt;rejected&gt;: <span class="title class_">Error</span>: error!!!&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-6-È¢òÁõÆÂÖ≠"><a href="#2-6-È¢òÁõÆÂÖ≠" class="headerlink" title="2.6 È¢òÁõÆÂÖ≠"></a>2.6 È¢òÁõÆÂÖ≠</h5><p>Â¶ÇÊûú‰Ω†‰∏äÈù¢ËøôÈÅìÈ¢òÊêûÊáÇ‰∫Ü‰πãÂêéÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•Êù•ÂÅöÂÅöËøôÈÅì‰∫ÜÔºå‰Ω†Â∫îËØ•ËÉΩÂæàÂø´Â∞±ÁªôÂá∫Á≠îÊ°àÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;timer1&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise1ÈáåÁöÑÂÜÖÂÆπ&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise2 = promise1.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;error!!!&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise1&quot;</span>, promise1);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise2&quot;</span>, promise2);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;timer2&quot;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise1&quot;</span>, promise1);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise2&quot;</span>, promise2);</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br></pre></td></tr></table></figure>

<p>ÁªìÊûúÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;promise1ÈáåÁöÑÂÜÖÂÆπ&#x27;</span></span><br><span class="line"><span class="string">&#x27;promise1&#x27;</span> <span class="title class_">Promise</span>&#123;&lt;pending&gt;&#125;</span><br><span class="line"><span class="string">&#x27;promise2&#x27;</span> <span class="title class_">Promise</span>&#123;&lt;pending&gt;&#125;</span><br><span class="line"><span class="string">&#x27;timer1&#x27;</span></span><br><span class="line">test5.<span class="property">html</span>:<span class="number">102</span> <span class="title class_">Uncaught</span> (<span class="keyword">in</span> promise) <span class="title class_">Error</span>: error!!! at test.<span class="property">html</span>:<span class="number">102</span></span><br><span class="line"><span class="string">&#x27;timer2&#x27;</span></span><br><span class="line"><span class="string">&#x27;promise1&#x27;</span> <span class="title class_">Promise</span>&#123;&lt;resolved&gt;: <span class="string">&quot;success&quot;</span>&#125;</span><br><span class="line"><span class="string">&#x27;promise2&#x27;</span> <span class="title class_">Promise</span>&#123;&lt;rejected&gt;: <span class="title class_">Error</span>: error!!!&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-Promise-‰∏≠ÁöÑ-then„ÄÅcatch„ÄÅfinally"><a href="#3-Promise-‰∏≠ÁöÑ-then„ÄÅcatch„ÄÅfinally" class="headerlink" title="3. Promise ‰∏≠ÁöÑ then„ÄÅcatch„ÄÅfinally"></a>3. Promise ‰∏≠ÁöÑ then„ÄÅcatch„ÄÅfinally</h4><p><strong>ÊÄªÁªìÔºö</strong></p>
<ul>
<li>Promise ÁöÑÁä∂ÊÄÅ‰∏ÄÁªèÊîπÂèòÂ∞±‰∏çËÉΩÂÜçÊîπÂèò„ÄÇ(ËßÅ 3.1)</li>
<li>.then Âíå.catch ÈÉΩ‰ºöËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑ Promise„ÄÇ(‰∏äÈù¢ÁöÑ üëÜ1.4 ËØÅÊòé‰∫Ü)</li>
<li>catch ‰∏çÁÆ°Ë¢´ËøûÊé•Âà∞Âì™ÈáåÔºåÈÉΩËÉΩÊçïËé∑‰∏äÂ±ÇÁöÑÈîôËØØ„ÄÇ(ËßÅ 3.2)</li>
<li>Âú® Promise ‰∏≠ÔºåËøîÂõû‰ªªÊÑè‰∏Ä‰∏™Èùû promise ÁöÑÂÄºÈÉΩ‰ºöË¢´ÂåÖË£πÊàê promise ÂØπË±°Ôºå‰æãÂ¶Ç return 2 ‰ºöË¢´ÂåÖË£Ö‰∏∫ return Promise.resolve(2)„ÄÇ</li>
<li>Promise ÁöÑ .then ÊàñËÄÖ .catch ÂèØ‰ª•Ë¢´Ë∞ÉÁî®Â§öÊ¨°, ÂΩìÂ¶ÇÊûú Promise ÂÜÖÈÉ®ÁöÑÁä∂ÊÄÅ‰∏ÄÁªèÊîπÂèòÔºåÂπ∂‰∏îÊúâ‰∫Ü‰∏Ä‰∏™ÂÄºÔºåÈÇ£‰πàÂêéÁª≠ÊØèÊ¨°Ë∞ÉÁî®.then ÊàñËÄÖ.catch ÁöÑÊó∂ÂÄôÈÉΩ‰ºöÁõ¥Êé•ÊãøÂà∞ËØ•ÂÄº„ÄÇ(ËßÅ 3.5)</li>
<li>.then ÊàñËÄÖ .catch ‰∏≠ return ‰∏Ä‰∏™ error ÂØπË±°Âπ∂‰∏ç‰ºöÊäõÂá∫ÈîôËØØÔºåÊâÄ‰ª•‰∏ç‰ºöË¢´ÂêéÁª≠ÁöÑ .catch ÊçïËé∑„ÄÇ(ËßÅ 3.6)</li>
<li>.then Êàñ .catch ËøîÂõûÁöÑÂÄº‰∏çËÉΩÊòØ promise Êú¨Ë∫´ÔºåÂê¶Âàô‰ºöÈÄ†ÊàêÊ≠ªÂæ™ÁéØ„ÄÇ(ËßÅ 3.7)</li>
<li>.then ÊàñËÄÖ .catch ÁöÑÂèÇÊï∞ÊúüÊúõÊòØÂáΩÊï∞Ôºå‰º†ÂÖ•ÈùûÂáΩÊï∞Âàô‰ºöÂèëÁîüÂÄºÁ©øÈÄè„ÄÇ(ËßÅ 3.8)</li>
<li>.then ÊñπÊ≥ïÊòØËÉΩÊé•Êî∂‰∏§‰∏™ÂèÇÊï∞ÁöÑÔºåÁ¨¨‰∏Ä‰∏™ÊòØÂ§ÑÁêÜÊàêÂäüÁöÑÂáΩÊï∞ÔºåÁ¨¨‰∫å‰∏™ÊòØÂ§ÑÁêÜÂ§±Ë¥•ÁöÑÂáΩÊï∞ÔºåÂÜçÊüê‰∫õÊó∂ÂÄô‰Ω†ÂèØ‰ª•ËÆ§‰∏∫ catch ÊòØ.then Á¨¨‰∫å‰∏™ÂèÇÊï∞ÁöÑÁÆÄ‰æøÂÜôÊ≥ï„ÄÇ(ËßÅ 3.9)</li>
<li>.finally ÊñπÊ≥ï‰πüÊòØËøîÂõû‰∏Ä‰∏™ PromiseÔºå‰ªñÂú® Promise ÁªìÊùüÁöÑÊó∂ÂÄôÔºåÊó†ËÆ∫ÁªìÊûú‰∏∫ resolved ËøòÊòØ rejectedÔºåÈÉΩ‰ºöÊâßË°åÈáåÈù¢ÁöÑÂõûË∞ÉÂáΩÊï∞„ÄÇ</li>
</ul>
<h5 id="3-1-È¢òÁõÆ‰∏Ä"><a href="#3-1-È¢òÁõÆ‰∏Ä" class="headerlink" title="3.1 È¢òÁõÆ‰∏Ä"></a>3.1 È¢òÁõÆ‰∏Ä</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">resolve</span>(<span class="string">&quot;success1&quot;</span>);</span><br><span class="line">  <span class="title function_">reject</span>(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">  <span class="title function_">resolve</span>(<span class="string">&quot;success2&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;then: &quot;</span>, res);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;catch: &quot;</span>, err);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>ÁªìÊûúÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;then: success1&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>ÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÁöÑ resolve Êàñ reject Âè™ÊúâÁ¨¨‰∏ÄÊ¨°ÊâßË°åÊúâÊïàÔºåÂ§öÊ¨°Ë∞ÉÁî®Ê≤°Êúâ‰ªª‰Ωï‰ΩúÁî® „ÄÇÈ™åËØÅ‰∫ÜÁ¨¨‰∏Ä‰∏™ÁªìËÆ∫ÔºåPromise ÁöÑÁä∂ÊÄÅ‰∏ÄÁªèÊîπÂèòÂ∞±‰∏çËÉΩÂÜçÊîπÂèò„ÄÇ</p>
<h5 id="3-2-È¢òÁõÆ‰∫å"><a href="#3-2-È¢òÁõÆ‰∫å" class="headerlink" title="3.2 È¢òÁõÆ‰∫å"></a>3.2 È¢òÁõÆ‰∫å</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">reject</span>(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">  <span class="title function_">resolve</span>(<span class="string">&quot;success2&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;then1: &quot;</span>, res);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;then2: &quot;</span>, res);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;catch3: &quot;</span>, err);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;then4: &quot;</span>, res);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>ÁªìÊûúÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;catch3: &quot;</span> <span class="string">&quot;error&quot;</span></span><br><span class="line"><span class="string">&quot;then4: &quot;</span> <span class="literal">undefined</span></span><br></pre></td></tr></table></figure>

<p>È™åËØÅ‰∫ÜÁ¨¨‰∏â‰∏™ÁªìËÆ∫Ôºåcatch ‰∏çÁÆ°Ë¢´ËøûÊé•Âà∞Âì™ÈáåÔºåÈÉΩËÉΩÊçïËé∑‰∏äÂ±ÇÁöÑÈîôËØØ„ÄÇ</p>
<h5 id="3-3-È¢òÁõÆ‰∏â"><a href="#3-3-È¢òÁõÆ‰∏â" class="headerlink" title="3.3 È¢òÁõÆ‰∏â"></a>3.3 È¢òÁõÆ‰∏â</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">1</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>ÁªìÊûúÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>;</span><br><span class="line"><span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<p>Promise ÂèØ‰ª•ÈìæÂºèË∞ÉÁî®Ôºå‰∏çËøá promise ÊØèÊ¨°Ë∞ÉÁî® .then ÊàñËÄÖ .catch ÈÉΩ‰ºöËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑ promiseÔºå‰ªéËÄåÂÆûÁé∞‰∫ÜÈìæÂºèË∞ÉÁî®, ÂÆÉÂπ∂‰∏çÂÉè‰∏ÄËà¨Êàë‰ª¨‰ªªÂä°ÁöÑÈìæÂºèË∞ÉÁî®‰∏ÄÊ†∑ return this„ÄÇ</p>
<p>‰∏äÈù¢ÁöÑËæìÂá∫ÁªìÊûú‰πãÊâÄ‰ª•‰æùÊ¨°ÊâìÂç∞Âá∫ 1 Âíå 2ÔºåÈÇ£ÊòØÂõ†‰∏∫ resolve(1)‰πãÂêéËµ∞ÁöÑÊòØÁ¨¨‰∏Ä‰∏™ then ÊñπÊ≥ïÔºåÂπ∂Ê≤°ÊúâËµ∞ catch ÈáåÔºåÊâÄ‰ª•Á¨¨‰∫å‰∏™ then ‰∏≠ÁöÑ res ÂæóÂà∞ÁöÑÂÆûÈôÖ‰∏äÊòØÁ¨¨‰∏Ä‰∏™ then ÁöÑËøîÂõûÂÄº„ÄÇ</p>
<p>‰∏î return 2 ‰ºöË¢´ÂåÖË£ÖÊàê resolve(2)„ÄÇ</p>
<h5 id="3-4-È¢òÁõÆÂõõ"><a href="#3-4-È¢òÁõÆÂõõ" class="headerlink" title="3.4 È¢òÁõÆÂõõ"></a>3.4 È¢òÁõÆÂõõ</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="number">1</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>ÁªìÊûúÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>;</span><br><span class="line"><span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<p>ÁªìÊûúÊâìÂç∞ÁöÑÂΩìÁÑ∂ÊòØ 1 Âíå 3 Âï¶ÔºåÂõ†‰∏∫ reject(1)Ê≠§Êó∂Ëµ∞ÁöÑÂ∞±ÊòØ catchÔºå‰∏îÁ¨¨‰∫å‰∏™ then ‰∏≠ÁöÑ res ÂæóÂà∞ÁöÑÂ∞±ÊòØ catch ‰∏≠ÁöÑËøîÂõûÂÄº„ÄÇ</p>
<h5 id="3-5-È¢òÁõÆ‰∫î"><a href="#3-5-È¢òÁõÆ‰∫î" class="headerlink" title="3.5 È¢òÁõÆ‰∫î"></a>3.5 È¢òÁõÆ‰∫î</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;timer&quot;</span>);</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> start = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res, <span class="title class_">Date</span>.<span class="title function_">now</span>() - start);</span><br><span class="line">&#125;);</span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res, <span class="title class_">Date</span>.<span class="title function_">now</span>() - start);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ÊâßË°åÁªìÊûúÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;timer&#x27;</span></span><br><span class="line">success <span class="number">1001</span></span><br><span class="line">success <span class="number">1002</span></span><br></pre></td></tr></table></figure>

<p>ÂΩìÁÑ∂ÔºåÂ¶ÇÊûú‰Ω†Ë∂≥Â§üÂø´ÁöÑËØùÔºå‰πüÂèØËÉΩ‰∏§‰∏™ÈÉΩÊòØ 1001„ÄÇ</p>
<p>Promise ÁöÑ .then ÊàñËÄÖ .catch ÂèØ‰ª•Ë¢´Ë∞ÉÁî®Â§öÊ¨°Ôºå‰ΩÜËøôÈáå Promise ÊûÑÈÄ†ÂáΩÊï∞Âè™ÊâßË°å‰∏ÄÊ¨°„ÄÇÊàñËÄÖËØ¥ promise ÂÜÖÈÉ®Áä∂ÊÄÅ‰∏ÄÁªèÊîπÂèòÔºåÂπ∂‰∏îÊúâ‰∫Ü‰∏Ä‰∏™ÂÄºÔºåÈÇ£‰πàÂêéÁª≠ÊØèÊ¨°Ë∞ÉÁî® .then ÊàñËÄÖ .catch ÈÉΩ‰ºöÁõ¥Êé•ÊãøÂà∞ËØ•ÂÄº„ÄÇ</p>
<h5 id="3-6-È¢òÁõÆÂÖ≠"><a href="#3-6-È¢òÁõÆÂÖ≠" class="headerlink" title="3.6 È¢òÁõÆÂÖ≠"></a>3.6 È¢òÁõÆÂÖ≠</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>()</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;error!!!&quot;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;then: &quot;</span>, res);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;catch: &quot;</span>, err);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>ÁåúÁåúËøôÈáåÁöÑÁªìÊûúËæìÂá∫ÁöÑÊòØ‰ªÄ‰πà ü§îÔ∏è Ôºü</p>
<p>‰Ω†ÂèØËÉΩÊÉ≥Âà∞ÁöÑÊòØËøõÂÖ•.catch ÁÑ∂ÂêéË¢´ÊçïËé∑‰∫ÜÈîôËØØ„ÄÇ</p>
<p>ÁªìÊûúÂπ∂‰∏çÊòØËøôÊ†∑ÁöÑÔºåÂÆÉËµ∞ÁöÑÊòØ.then ÈáåÈù¢Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;then: &quot;</span> <span class="string">&quot;Error: error!!!&quot;</span></span><br></pre></td></tr></table></figure>

<p>Ëøô‰πüÈ™åËØÅ‰∫ÜÁ¨¨ 4 ÁÇπÂíåÁ¨¨ 6 ÁÇπÔºåËøîÂõû‰ªªÊÑè‰∏Ä‰∏™Èùû promise ÁöÑÂÄºÈÉΩ‰ºöË¢´ÂåÖË£πÊàê promise ÂØπË±°ÔºåÂõ†Ê≠§ËøôÈáåÁöÑ<strong>return new Error(‚Äòerror!!!‚Äô)</strong> ‰πüË¢´ÂåÖË£πÊàê‰∫Ü**return Promise.resolve(new Error(‚Äòerror!!!‚Äô))**„ÄÇ</p>
<p>ÂΩìÁÑ∂Â¶ÇÊûú‰Ω†ÊäõÂá∫‰∏Ä‰∏™ÈîôËØØÁöÑËØùÔºåÂèØ‰ª•Áî®‰∏ãÈù¢ üëá ‰∏§ÁöÑ‰ªªÊÑè‰∏ÄÁßçÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;error!!!&quot;</span>));</span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;error!!!&quot;</span>);</span><br></pre></td></tr></table></figure>

<h5 id="3-7-È¢òÁõÆ‰∏É"><a href="#3-7-È¢òÁõÆ‰∏É" class="headerlink" title="3.7 È¢òÁõÆ‰∏É"></a>3.7 È¢òÁõÆ‰∏É</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> promise;</span><br><span class="line">&#125;);</span><br><span class="line">promise.<span class="title function_">catch</span>(<span class="variable language_">console</span>.<span class="property">err</span>);</span><br></pre></td></tr></table></figure>

<p>.then Êàñ .catch ËøîÂõûÁöÑÂÄº‰∏çËÉΩÊòØ promise Êú¨Ë∫´ÔºåÂê¶Âàô‰ºöÈÄ†ÊàêÊ≠ªÂæ™ÁéØ„ÄÇ</p>
<p>Âõ†Ê≠§ÁªìÊûú‰ºöÊä•ÈîôÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Uncaught</span> (<span class="keyword">in</span> promise) <span class="title class_">TypeError</span>: <span class="title class_">Chaining</span> cycle detected <span class="keyword">for</span> promise #&lt;<span class="title class_">Promise</span>&gt;</span><br></pre></td></tr></table></figure>

<h5 id="3-8-È¢òÁõÆÂÖ´"><a href="#3-8-È¢òÁõÆÂÖ´" class="headerlink" title="3.8 È¢òÁõÆÂÖ´"></a>3.8 È¢òÁõÆÂÖ´</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">1</span>).<span class="title function_">then</span>(<span class="number">2</span>).<span class="title function_">then</span>(<span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">3</span>)).<span class="title function_">then</span>(<span class="variable language_">console</span>.<span class="property">log</span>);</span><br></pre></td></tr></table></figure>

<p>ËÆ∞‰ΩèÂéüÂàô 8Ôºö.then ÊàñËÄÖ .catch ÁöÑÂèÇÊï∞ÊúüÊúõÊòØÂáΩÊï∞Ôºå‰º†ÂÖ•ÈùûÂáΩÊï∞Âàô‰ºöÂèëÁîüÂÄºÁ©øÈÄè„ÄÇ</p>
<p>Á¨¨‰∏Ä‰∏™ then ÂíåÁ¨¨‰∫å‰∏™ then ‰∏≠‰º†ÂÖ•ÁöÑÈÉΩ‰∏çÊòØÂáΩÊï∞Ôºå‰∏Ä‰∏™ÊòØÊï∞Â≠óÁ±ªÂûãÔºå‰∏Ä‰∏™ÊòØÂØπË±°Á±ªÂûãÔºåÂõ†Ê≠§ÂèëÁîü‰∫ÜÁ©øÈÄèÔºåÂ∞Ü resolve(1) ÁöÑÂÄºÁõ¥Êé•‰º†Âà∞ÊúÄÂêé‰∏Ä‰∏™ then Èáå„ÄÇ</p>
<p>ÊâÄ‰ª•ËæìÂá∫ÁªìÊûú‰∏∫Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<h5 id="3-9-È¢òÁõÆ‰πù"><a href="#3-9-È¢òÁõÆ‰πù" class="headerlink" title="3.9 È¢òÁõÆ‰πù"></a>3.9 È¢òÁõÆ‰πù</h5><p>‰∏ãÈù¢Êù•‰ªãÁªç‰∏Ä‰∏ã.then ÂáΩÊï∞‰∏≠ÁöÑ‰∏§‰∏™ÂèÇÊï∞„ÄÇ</p>
<p>Á¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØÁî®Êù•Â§ÑÁêÜ Promise ÊàêÂäüÁöÑÂáΩÊï∞ÔºåÁ¨¨‰∫å‰∏™ÂàôÊòØÂ§ÑÁêÜÂ§±Ë¥•ÁöÑÂáΩÊï∞„ÄÇ</p>
<p>‰πüÂ∞±ÊòØËØ¥ Promise.resolve(‚Äò1‚Äô)ÁöÑÂÄº‰ºöËøõÂÖ•ÊàêÂäüÁöÑÂáΩÊï∞ÔºåPromise.reject(‚Äò2‚Äô)ÁöÑÂÄº‰ºöËøõÂÖ•Â§±Ë¥•ÁöÑÂáΩÊï∞„ÄÇ</p>
<h6 id="a"><a href="#a" class="headerlink" title="(a)"></a>(a)</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">&quot;err!!!&quot;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(</span><br><span class="line">    <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;success&quot;</span>, res);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;error&quot;</span>, err);</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;catch&quot;</span>, err);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>ËøôÈáåÁöÑÊâßË°åÁªìÊûúÊòØÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;error&#x27;</span> <span class="string">&#x27;err!!!&#x27;</span></span><br></pre></td></tr></table></figure>

<h6 id="b"><a href="#b" class="headerlink" title="(b)"></a>(b)</h6><p>ÂÆÉËøõÂÖ•ÁöÑÊòØ then()‰∏≠ÁöÑÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÈáåÈù¢ÔºåËÄåÂ¶ÇÊûúÊääÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÂéªÊéâÔºåÂ∞±ËøõÂÖ•‰∫Ü catch()‰∏≠Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">&quot;err!!!&quot;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;success&quot;</span>, res);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;catch&quot;</span>, err);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>ÊâßË°åÁªìÊûúÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;catch&#x27;</span> <span class="string">&#x27;error!!!&#x27;</span></span><br></pre></td></tr></table></figure>

<h6 id="c"><a href="#c" class="headerlink" title="(c)"></a>(c)</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>()</span><br><span class="line">  .<span class="title function_">then</span>(</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;error!!!&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fail1</span>(<span class="params">err</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;fail1&quot;</span>, err);</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="keyword">function</span> <span class="title function_">fail2</span>(<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;fail2&quot;</span>, err);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>Áî±‰∫é Promise Ë∞ÉÁî®ÁöÑÊòØ resolve()ÔºåÂõ†Ê≠§.then()ÊâßË°åÁöÑÂ∫îËØ•ÊòØ success()ÂáΩÊï∞ÔºåÂèØÊòØ success()ÂáΩÊï∞ÊäõÂá∫ÁöÑÊòØ‰∏Ä‰∏™ÈîôËØØÔºåÂÆÉ‰ºöË¢´ÂêéÈù¢ÁöÑ catch()ÁªôÊçïËé∑Âà∞ÔºåËÄå‰∏çÊòØË¢´ fail1 ÂáΩÊï∞ÊçïËé∑„ÄÇ</p>
<p>Âõ†Ê≠§ÊâßË°åÁªìÊûú‰∏∫Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fail2 <span class="title class_">Error</span>: error!!!</span><br></pre></td></tr></table></figure>

<h5 id="3-10-È¢òÁõÆÂçÅ"><a href="#3-10-È¢òÁõÆÂçÅ" class="headerlink" title="3.10 È¢òÁõÆÂçÅ"></a>3.10 È¢òÁõÆÂçÅ</h5><p>Êé•ÁùÄÊù•ÁúãÁúã.finally()ÔºåËøô‰∏™ÂäüËÉΩ‰∏ÄËà¨‰∏çÂ§™Áî®Âú®Èù¢ËØï‰∏≠Ôºå‰∏çËøáÂ¶ÇÊûúÁ¢∞Âà∞‰∫Ü‰Ω†‰πüÂ∫îËØ•Áü•ÈÅìËØ•Â¶Ç‰ΩïÂ§ÑÁêÜ„ÄÇ</p>
<p>ÂÖ∂ÂÆû‰Ω†Âè™Ë¶ÅËÆ∞‰ΩèÂÆÉ‰∏â‰∏™ÂæàÈáçË¶ÅÁöÑÁü•ËØÜÁÇπÂ∞±ÂèØ‰ª•‰∫ÜÔºö</p>
<ul>
<li>.finally()ÊñπÊ≥ï‰∏çÁÆ° Promise ÂØπË±°ÊúÄÂêéÁöÑÁä∂ÊÄÅÂ¶Ç‰ΩïÈÉΩ‰ºöÊâßË°å</li>
<li>.finally()ÊñπÊ≥ïÁöÑÂõûË∞ÉÂáΩÊï∞‰∏çÊé•Âèó‰ªª‰ΩïÁöÑÂèÇÊï∞Ôºå‰πüÂ∞±ÊòØËØ¥‰Ω†Âú®.finally()ÂáΩÊï∞‰∏≠ÊòØÊ≤°Ê≥ïÁü•ÈÅì Promise ÊúÄÁªàÁöÑÁä∂ÊÄÅÊòØ resolved ËøòÊòØ rejected ÁöÑ</li>
<li>ÂÆÉÊúÄÁªàËøîÂõûÁöÑÈªòËÆ§‰ºöÊòØ‰∏Ä‰∏™ÂéüÊù•ÁöÑ Promise ÂØπË±°ÂÄºÔºå‰∏çËøáÂ¶ÇÊûúÊäõÂá∫ÁöÑÊòØ‰∏Ä‰∏™ÂºÇÂ∏∏ÂàôËøîÂõûÂºÇÂ∏∏ÁöÑ Promise ÂØπË±°„ÄÇ</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="string">&quot;1&quot;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">finally</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;finally&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="string">&quot;2&quot;</span>)</span><br><span class="line">  .<span class="title function_">finally</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;finally2&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ÊàëÊòØfinally2ËøîÂõûÁöÑÂÄº&quot;</span>;</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;finally2ÂêéÈù¢ÁöÑthenÂáΩÊï∞&quot;</span>, res);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>Ëøô‰∏§‰∏™ Promise ÁöÑ.finally ÈÉΩ‰ºöÊâßË°åÔºå‰∏îÂ∞±ÁÆó finally2 ËøîÂõû‰∫ÜÊñ∞ÁöÑÂÄºÔºåÂÆÉÂêéÈù¢ÁöÑ then()ÂáΩÊï∞Êé•Êî∂Âà∞ÁöÑÁªìÊûúÂç¥ËøòÊòØ‚Äô2‚ÄôÔºåÂõ†Ê≠§ÊâìÂç∞ÁªìÊûú‰∏∫Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;1&#x27;</span></span><br><span class="line"><span class="string">&#x27;finally2&#x27;</span></span><br><span class="line"><span class="string">&#x27;finally&#x27;</span></span><br><span class="line"><span class="string">&#x27;finally2ÂêéÈù¢ÁöÑthenÂáΩÊï∞&#x27;</span> <span class="string">&#x27;2&#x27;</span></span><br></pre></td></tr></table></figure>

<p>Ëá≥‰∫é‰∏∫‰ªÄ‰πà finally2 ÁöÑÊâìÂç∞Ë¶ÅÂú® finally ÂâçÈù¢ÔºåËØ∑Áúã‰∏ã‰∏Ä‰∏™‰æãÂ≠ê‰∏≠ÁöÑËß£Êûê„ÄÇ</p>
<p>‰∏çËøáÂú®Ê≠§‰πãÂâçËÆ©Êàë‰ª¨ÂÜçÊù•Á°ÆËÆ§‰∏Ä‰∏ãÔºåfinally ‰∏≠Ë¶ÅÊòØÊäõÂá∫ÁöÑÊòØ‰∏Ä‰∏™ÂºÇÂ∏∏ÊòØÊÄéÊ†∑ÁöÑÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="string">&quot;1&quot;</span>)</span><br><span class="line">  .<span class="title function_">finally</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;finally1&quot;</span>);</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;ÊàëÊòØfinally‰∏≠ÊäõÂá∫ÁöÑÂºÇÂ∏∏&quot;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;finallyÂêéÈù¢ÁöÑthenÂáΩÊï∞&quot;</span>, res);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ÊçïËé∑ÈîôËØØ&quot;</span>, err);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>ÊâßË°åÁªìÊûú‰∏∫Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;finally1&#x27;</span></span><br><span class="line"><span class="string">&#x27;ÊçïËé∑ÈîôËØØ&#x27;</span> <span class="title class_">Error</span>: ÊàëÊòØ<span class="keyword">finally</span>‰∏≠ÊäõÂá∫ÁöÑÂºÇÂ∏∏</span><br></pre></td></tr></table></figure>

<p>‰ΩÜÊòØÂ¶ÇÊûúÊîπ‰∏∫ return new Error(‚ÄòÊàëÊòØ finally ‰∏≠ÊäõÂá∫ÁöÑÂºÇÂ∏∏‚Äô)ÔºåÊâìÂç∞Âá∫Êù•ÁöÑÂ∞±ÊòØ‚Äôfinally ÂêéÈù¢ÁöÑ then ÂáΩÊï∞ 1‚Äô</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">promise1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise1&quot;</span>);</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">promise2</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">reject</span>(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">promise1</span>()</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(res))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err))</span><br><span class="line">  .<span class="title function_">finally</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;finally1&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="title function_">promise2</span>()</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(res))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err))</span><br><span class="line">  .<span class="title function_">finally</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;finally2&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>ÊâßË°åËøáÁ®ãÔºö</p>
<ul>
<li>È¶ñÂÖàÂÆö‰πâ‰∫Ü‰∏§‰∏™ÂáΩÊï∞ promise1 Âíå promise2ÔºåÂÖà‰∏çÁÆ°Êé•ÁùÄÂæÄ‰∏ãÁúã„ÄÇ</li>
<li>promise1 ÂáΩÊï∞ÂÖàË¢´Ë∞ÉÁî®‰∫ÜÔºåÁÑ∂ÂêéÊâßË°åÈáåÈù¢ new Promise ÁöÑÂêåÊ≠•‰ª£Á†ÅÊâìÂç∞Âá∫ promise1</li>
<li>‰πãÂêéÈÅáÂà∞‰∫Ü resolve(1)ÔºåÂ∞Ü p ÁöÑÁä∂ÊÄÅÊîπ‰∏∫‰∫Ü resolved Âπ∂Â∞ÜÁªìÊûú‰øùÂ≠ò‰∏ãÊù•„ÄÇ</li>
<li>Ê≠§Êó∂ promise1 ÂÜÖÁöÑÂáΩÊï∞ÂÜÖÂÆπÂ∑≤ÁªèÊâßË°åÂÆå‰∫ÜÔºåË∑≥Âá∫ËØ•ÂáΩÊï∞</li>
<li>Á¢∞Âà∞‰∫Ü promise1().then()ÔºåÁî±‰∫é promise1 ÁöÑÁä∂ÊÄÅÂ∑≤ÁªèÂèëÁîü‰∫ÜÊîπÂèò‰∏î‰∏∫ resolved Âõ†Ê≠§Â∞Ü promise1().then()ËøôÊù°ÂæÆ‰ªªÂä°Âä†ÂÖ•Êú¨ËΩÆÁöÑÂæÆ‰ªªÂä°ÂàóË°®(ËøôÊòØÁ¨¨‰∏Ä‰∏™ÂæÆ‰ªªÂä°)</li>
<li>ËøôÊó∂ÂÄôË¶ÅÊ≥®ÊÑè‰∫ÜÔºå‰ª£Á†ÅÂπ∂‰∏ç‰ºöÊé•ÁùÄÂæÄÈìæÂºèË∞ÉÁî®ÁöÑ‰∏ãÈù¢Ëµ∞Ôºå‰πüÂ∞±ÊòØ‰∏ç‰ºöÂÖàÂ∞Ü.finally Âä†ÂÖ•ÂæÆ‰ªªÂä°ÂàóË°®ÔºåÈÇ£ÊòØÂõ†‰∏∫.then Êú¨Ë∫´Â∞±ÊòØ‰∏Ä‰∏™ÂæÆ‰ªªÂä°ÔºåÂÆÉÈìæÂºèÂêéÈù¢ÁöÑÂÜÖÂÆπÂøÖÈ°ªÂæóÁ≠âÂΩìÂâçËøô‰∏™ÂæÆ‰ªªÂä°ÊâßË°åÂÆåÊâç‰ºöÊâßË°åÔºåÂõ†Ê≠§ËøôÈáåÊàë‰ª¨ÂÖà‰∏çÁÆ°.finally()</li>
<li>ÂÜçÂæÄ‰∏ãËµ∞Á¢∞Âà∞‰∫Ü promise2()ÂáΩÊï∞ÔºåÂÖ∂‰∏≠ËøîÂõûÁöÑ new Promise ‰∏≠Âπ∂Ê≤°ÊúâÂêåÊ≠•‰ª£Á†ÅÈúÄË¶ÅÊâßË°åÔºåÊâÄ‰ª•ÊâßË°å reject(‚Äòerror‚Äô)ÁöÑÊó∂ÂÄôÂ∞Ü promise2 ÂáΩÊï∞‰∏≠ÁöÑ Promise ÁöÑÁä∂ÊÄÅÂèò‰∏∫‰∫Ü rejected</li>
<li>Ë∑≥Âá∫ promise2 ÂáΩÊï∞ÔºåÈÅáÂà∞‰∫Ü promise2().then()ÔºåÂ∞ÜÂÖ∂Âä†ÂÖ•ÂΩìÂâçÁöÑÂæÆ‰ªªÂä°ÈòüÂàó(ËøôÊòØÁ¨¨‰∫å‰∏™ÂæÆ‰ªªÂä°)Ôºå‰∏îÈìæÂºèË∞ÉÁî®ÂêéÈù¢ÁöÑÂÜÖÂÆπÂæóÁ≠âËØ•‰ªªÂä°ÊâßË°åÂÆåÂêéÊâçÊâßË°åÔºåÂíå.then()‰∏ÄÊ†∑„ÄÇ</li>
<li>OKÔºå Êú¨ËΩÆÁöÑÂÆè‰ªªÂä°ÂÖ®ÈÉ®ÊâßË°åÂÆå‰∫ÜÔºåÊù•ÁúãÁúãÂæÆ‰ªªÂä°ÂàóË°®ÔºåÂ≠òÂú® promise1().then()ÔºåÊâßË°åÂÆÉÔºåÊâìÂç∞Âá∫ 1ÔºåÁÑ∂ÂêéÈÅáÂà∞‰∫Ü.finally()Ëøô‰∏™ÂæÆ‰ªªÂä°Â∞ÜÂÆÉÂä†ÂÖ•ÂæÆ‰ªªÂä°ÂàóË°®(ËøôÊòØÁ¨¨‰∏â‰∏™ÂæÆ‰ªªÂä°)Á≠âÂæÖÊâßË°å</li>
<li>ÂÜçÊâßË°å promise2().catch()ÊâìÂç∞Âá∫ errorÔºåÊâßË°åÂÆåÂêéÂ∞Ü finally2 Âä†ÂÖ•ÂæÆ‰ªªÂä°Âä†ÂÖ•ÂæÆ‰ªªÂä°ÂàóË°®(ËøôÊòØÁ¨¨Âõõ‰∏™ÂæÆ‰ªªÂä°)</li>
<li>OKÔºå Êú¨ËΩÆÂèàÂÖ®ÈÉ®ÊâßË°åÂÆå‰∫ÜÔºå‰ΩÜÊòØÂæÆ‰ªªÂä°ÂàóË°®ËøòÊúâ‰∏§‰∏™Êñ∞ÁöÑÂæÆ‰ªªÂä°Ê≤°ÊúâÊâßË°åÂÆåÔºåÂõ†Ê≠§‰æùÊ¨°ÊâßË°å finally1 Âíå finally2„ÄÇ</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;promise1&quot;</span>;</span><br><span class="line"><span class="string">&quot;1&quot;</span>;</span><br><span class="line"><span class="string">&quot;error&quot;</span>;</span><br><span class="line"><span class="string">&quot;finally1&quot;</span>;</span><br><span class="line"><span class="string">&quot;finally2&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>Âú®ËøôÈÅìÈ¢ò‰∏≠ÂÖ∂ÂÆûËÉΩÊâ©Â±ïÁöÑ‰∏úË•øÊå∫Â§öÁöÑÔºå‰πãÂâçÊ≤°ÊúâÊèêÂà∞ÔºåÈÇ£Â∞±ÊòØ‰Ω†ÂèØ‰ª•ÁêÜËß£‰∏∫ÈìæÂºèË∞ÉÁî®ÂêéÈù¢ÁöÑÂÜÖÂÆπÈúÄË¶ÅÁ≠âÂâç‰∏Ä‰∏™Ë∞ÉÁî®ÊâßË°åÂÆåÊâç‰ºöÊâßË°å„ÄÇ</p>
<p>Â∞±ÂÉèÊòØËøôÈáåÁöÑ finally()‰ºöÁ≠â promise1().then()ÊâßË°åÂÆåÊâç‰ºöÂ∞Ü finally()Âä†ÂÖ•ÂæÆ‰ªªÂä°ÈòüÂàóÔºåÂÖ∂ÂÆûÂ¶ÇÊûúËøôÈÅìÈ¢ò‰∏≠‰Ω†Êää finally()Êç¢ÊàêÊòØ then()‰πüÊòØËøôÊ†∑ÁöÑ:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">promise1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise1&quot;</span>);</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">promise2</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">reject</span>(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">promise1</span>()</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(res))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err))</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;finally1&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="title function_">promise2</span>()</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(res))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err))</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;finally2&quot;</span>));</span><br></pre></td></tr></table></figure>

<h4 id="4-Promise-‰∏≠ÁöÑ-all-Âíå-race"><a href="#4-Promise-‰∏≠ÁöÑ-all-Âíå-race" class="headerlink" title="4. Promise ‰∏≠ÁöÑ all Âíå race"></a>4. Promise ‰∏≠ÁöÑ all Âíå race</h4><p>ÈÄö‰øóÊù•ËØ¥Ôºå.all()ÁöÑ‰ΩúÁî®ÊòØÊé•Êî∂‰∏ÄÁªÑÂºÇÊ≠•‰ªªÂä°ÔºåÁÑ∂ÂêéÂπ∂Ë°åÊâßË°åÂºÇÊ≠•‰ªªÂä°ÔºåÂπ∂‰∏îÂú®ÊâÄÊúâÂºÇÊ≠•Êìç‰ΩúÊâßË°åÂÆåÂêéÊâçÊâßË°åÂõûË∞É„ÄÇ</p>
<p>.race()ÁöÑ‰ΩúÁî®‰πüÊòØÊé•Êî∂‰∏ÄÁªÑÂºÇÊ≠•‰ªªÂä°ÔºåÁÑ∂ÂêéÂπ∂Ë°åÊâßË°åÂºÇÊ≠•‰ªªÂä°ÔºåÂè™‰øùÁïôÂèñÁ¨¨‰∏Ä‰∏™ÊâßË°åÂÆåÊàêÁöÑÂºÇÊ≠•Êìç‰ΩúÁöÑÁªìÊûúÔºåÂÖ∂‰ªñÁöÑÊñπÊ≥ï‰ªçÂú®ÊâßË°åÔºå‰∏çËøáÊâßË°åÁªìÊûú‰ºöË¢´ÊäõÂºÉ„ÄÇ</p>
<h5 id="4-1-È¢òÁõÆ‰∏Ä"><a href="#4-1-È¢òÁõÆ‰∏Ä" class="headerlink" title="4.1 È¢òÁõÆ‰∏Ä"></a>4.1 È¢òÁõÆ‰∏Ä</h5><p>Êàë‰ª¨Áü•ÈÅìÂ¶ÇÊûúÁõ¥Êé•Âú®ËÑöÊú¨Êñá‰ª∂‰∏≠ÂÆö‰πâ‰∏Ä‰∏™ PromiseÔºåÂÆÉÊûÑÈÄ†ÂáΩÊï∞ÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØ‰ºöÁ´ãÂç≥ÊâßË°åÁöÑÔºåÂ∞±ÂÉèËøôÊ†∑Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">r</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Á´ãÂç≥ÊâìÂç∞&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>ÊéßÂà∂Âè∞‰∏≠‰ºöÁ´ãÂç≥ÊâìÂç∞Âá∫ ‚ÄúÁ´ãÂç≥ÊâìÂç∞‚Äù„ÄÇ</p>
<p>Âõ†Ê≠§‰∏∫‰∫ÜÊéßÂà∂ÂÆÉ‰ªÄ‰πàÊó∂ÂÄôÊâßË°åÔºåÊàë‰ª¨ÂèØ‰ª•Áî®‰∏Ä‰∏™ÂáΩÊï∞ÂåÖË£πÁùÄÂÆÉÔºåÂú®ÈúÄË¶ÅÂÆÉÊâßË°åÁöÑÊó∂ÂÄôÔºåË∞ÉÁî®Ëøô‰∏™ÂáΩÊï∞Â∞±ÂèØ‰ª•‰∫ÜÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">runP1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">r</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Á´ãÂç≥ÊâìÂç∞&quot;</span>));</span><br><span class="line">  <span class="keyword">return</span> p1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">runP1</span>(); <span class="comment">// Ë∞ÉÁî®Ê≠§ÂáΩÊï∞Êó∂ÊâçÊâßË°å</span></span><br></pre></td></tr></table></figure>

<p>OK üëåÔºå ËÆ©Êàë‰ª¨ÂõûÂΩíÊ≠£È¢ò„ÄÇ</p>
<p>Áé∞Âú®Êù•ÊûÑÂª∫Ëøô‰πà‰∏Ä‰∏™ÂáΩÊï∞Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">runAsync</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">r</span>) =&gt;</span> <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="title function_">r</span>(x, <span class="variable language_">console</span>.<span class="title function_">log</span>(x)), <span class="number">1000</span>));</span><br><span class="line">  <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ËØ•ÂáΩÊï∞‰º†ÂÖ•‰∏Ä‰∏™ÂÄº xÔºåË∞ÉÁî® runAsync(x)ÁÑ∂ÂêéÈó¥Èöî‰∏ÄÁßíÂêéÊâìÂç∞Âá∫Ëøô‰∏™ x„ÄÇ</p>
<p>Â¶ÇÊûúÊàëÁî®.all()Êù•ÊâßË°åÂÆÉ‰ºöÊÄéÊ†∑Âë¢Ôºü</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">runAsync</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">r</span>) =&gt;</span> <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="title function_">r</span>(x, <span class="variable language_">console</span>.<span class="title function_">log</span>(x)), <span class="number">1000</span>));</span><br><span class="line">  <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>([<span class="title function_">runAsync</span>(<span class="number">1</span>), <span class="title function_">runAsync</span>(<span class="number">2</span>), <span class="title function_">runAsync</span>(<span class="number">3</span>)]).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>ÂÖàÊù•ÊÉ≥ÊÉ≥Ê≠§ÊÆµ‰ª£Á†ÅÂú®ÊµèËßàÂô®‰∏≠‰ºöÂ¶Ç‰ΩïÊâßË°åÔºü</p>
<p>Ê≤°ÈîôÔºåÂΩì‰Ω†ÊâìÂºÄÈ°µÈù¢ÁöÑÊó∂ÂÄôÔºåÂú®Èó¥Èöî‰∏ÄÁßíÂêéÔºåÊéßÂà∂Âè∞‰ºöÂêåÊó∂ÊâìÂç∞Âá∫ 1, 2, 3ÔºåËøòÊúâ‰∏Ä‰∏™Êï∞ÁªÑ[1, 2, 3]„ÄÇ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>;</span><br><span class="line"><span class="number">2</span>;</span><br><span class="line">(<span class="number">3</span>)[(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)];</span><br></pre></td></tr></table></figure>

<p>ÊâÄ‰ª•‰Ω†Áé∞Âú®ËÉΩÁêÜËß£ËøôÂè•ËØùÁöÑÊÑèÊÄù‰∫ÜÂêóÔºöÊúâ‰∫Ü allÔºå‰Ω†Â∞±ÂèØ‰ª•Âπ∂Ë°åÊâßË°åÂ§ö‰∏™ÂºÇÊ≠•Êìç‰ΩúÔºåÂπ∂‰∏îÂú®‰∏Ä‰∏™ÂõûË∞É‰∏≠Â§ÑÁêÜÊâÄÊúâÁöÑËøîÂõûÊï∞ÊçÆ„ÄÇ</p>
<p>.all()ÂêéÈù¢ÁöÑ.then()ÈáåÁöÑÂõûË∞ÉÂáΩÊï∞Êé•Êî∂ÁöÑÂ∞±ÊòØÊâÄÊúâÂºÇÊ≠•Êìç‰ΩúÁöÑÁªìÊûú„ÄÇ</p>
<p>ËÄå‰∏îËøô‰∏™ÁªìÊûú‰∏≠Êï∞ÁªÑÁöÑÈ°∫Â∫èÂíå Promise.all()Êé•Êî∂Âà∞ÁöÑÊï∞ÁªÑÈ°∫Â∫è‰∏ÄËá¥ÔºÅÔºÅÔºÅ</p>
<p>üë£ Êúâ‰∏Ä‰∏™Âú∫ÊôØÊòØÂæàÈÄÇÂêàÁî®Ëøô‰∏™ÁöÑÔºå‰∏Ä‰∫õÊ∏∏ÊàèÁ±ªÁöÑÁ¥†ÊùêÊØîËæÉÂ§öÁöÑÂ∫îÁî®ÔºåÊâìÂºÄÁΩëÈ°µÊó∂ÔºåÈ¢ÑÂÖàÂä†ËΩΩÈúÄË¶ÅÁî®Âà∞ÁöÑÂêÑÁßçËµÑÊ∫êÂ¶ÇÂõæÁâá„ÄÅflash ‰ª•ÂèäÂêÑÁßçÈùôÊÄÅÊñá‰ª∂„ÄÇÊâÄÊúâÁöÑÈÉΩÂä†ËΩΩÂÆåÂêéÔºåÊàë‰ª¨ÂÜçËøõË°åÈ°µÈù¢ÁöÑÂàùÂßãÂåñ„ÄÇ</p>
<h5 id="4-2-È¢òÁõÆ‰∫å"><a href="#4-2-È¢òÁõÆ‰∫å" class="headerlink" title="4.2 È¢òÁõÆ‰∫å"></a>4.2 È¢òÁõÆ‰∫å</h5><p>ÊàëÊñ∞Â¢û‰∫Ü‰∏Ä‰∏™ runReject ÂáΩÊï∞ÔºåÂÆÉÁî®Êù•Âú® 1000 * x ÁßíÂêé reject ‰∏Ä‰∏™ÈîôËØØ„ÄÇ<br>ÂêåÊó∂.catch()ÂáΩÊï∞ËÉΩÂ§üÊçïËé∑Âà∞.all()ÈáåÊúÄÂÖàÁöÑÈÇ£‰∏™ÂºÇÂ∏∏ÔºåÂπ∂‰∏îÂè™ÊâßË°å‰∏ÄÊ¨°„ÄÇ</p>
<p>ÊÉ≥ÊÉ≥ËøôÈÅìÈ¢ò‰ºöÊÄéÊ†∑ÊâßË°åÂë¢ ü§îÔ∏èÔºü</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">runAsync</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">r</span>) =&gt;</span> <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="title function_">r</span>(x, <span class="variable language_">console</span>.<span class="title function_">log</span>(x)), <span class="number">1000</span>));</span><br><span class="line">  <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">runReject</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">res, rej</span>) =&gt;</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="title function_">rej</span>(<span class="string">`Error: <span class="subst">$&#123;x&#125;</span>`</span>, <span class="variable language_">console</span>.<span class="title function_">log</span>(x)), <span class="number">1000</span> * x)</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>([<span class="title function_">runAsync</span>(<span class="number">1</span>), <span class="title function_">runReject</span>(<span class="number">4</span>), <span class="title function_">runAsync</span>(<span class="number">3</span>), <span class="title function_">runReject</span>(<span class="number">2</span>)])</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(res, <span class="string">&quot;a&quot;</span>))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err, <span class="string">&quot;b&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>‰∏çÂçñÂÖ≥Â≠ê‰∫Ü üòÅÔºåËÆ©ÊàëÊù•ÂÖ¨Â∏ÉÁ≠îÊ°àÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="comment">// 2sÂêéËæìÂá∫:</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="title class_">Error</span>: <span class="number">2</span> b</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4sÂêéËæìÂá∫:</span></span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure>

<p>Ê≤°ÈîôÔºåÂ∞±ÂÉèÊàë‰πãÂâçËØ¥ÁöÑÔºå.catch ÊòØ‰ºöÊçïËé∑ÊúÄÂÖàÁöÑÈÇ£‰∏™ÂºÇÂ∏∏ÔºåÂú®ËøôÈÅìÈ¢òÁõÆ‰∏≠ÊúÄÂÖàÁöÑÂºÇÂ∏∏Â∞±ÊòØ runReject(2)ÁöÑÁªìÊûú„ÄÇ</p>
<p>Âè¶Â§ñÔºå<strong>Â¶ÇÊûú‰∏ÄÁªÑÂºÇÊ≠•Êìç‰Ωú‰∏≠Êúâ‰∏Ä‰∏™ÂºÇÂ∏∏ÈÉΩ‰∏ç‰ºöËøõÂÖ•.then()ÁöÑÁ¨¨‰∏Ä‰∏™ÂõûË∞ÉÂáΩÊï∞ÂèÇÊï∞‰∏≠</strong>„ÄÇ</p>
<p>Ê≥®ÊÑèÔºå‰∏∫‰ªÄ‰πà‰∏çËØ¥ÊòØ‰∏çËøõÂÖ•.then()‰∏≠Âë¢ ü§îÔ∏èÔºü</p>
<p>ÂìàÂìàÔºåÂ§ßÂÆ∂Âà´Âøò‰∫Ü.then()ÊñπÊ≥ïÁöÑÁ¨¨‰∫å‰∏™ÂèÇÊï∞‰πüÊòØÂèØ‰ª•ÊçïËé∑ÈîôËØØÁöÑÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>([<span class="title function_">runAsync</span>(<span class="number">1</span>), <span class="title function_">runReject</span>(<span class="number">4</span>), <span class="title function_">runAsync</span>(<span class="number">3</span>), <span class="title function_">runReject</span>(<span class="number">2</span>)]).<span class="title function_">then</span>(</span><br><span class="line">  <span class="function">(<span class="params">res</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(res),</span><br><span class="line">  <span class="function">(<span class="params">err</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="4-3-È¢òÁõÆ‰∏â"><a href="#4-3-È¢òÁõÆ‰∏â" class="headerlink" title="4.3 È¢òÁõÆ‰∏â"></a>4.3 È¢òÁõÆ‰∏â</h5><p>.race()ÊñπÊ≥ïÔºåÂÆÉÂè™‰ºöËé∑ÂèñÊúÄÂÖàÊâßË°åÂÆåÊàêÁöÑÈÇ£‰∏™ÁªìÊûúÔºåÂÖ∂ÂÆÉÁöÑÂºÇÊ≠•‰ªªÂä°ËôΩÁÑ∂‰πü‰ºöÁªßÁª≠ËøõË°å‰∏ãÂéªÔºå‰∏çËøá race Â∑≤Áªè‰∏çÁÆ°ÈÇ£‰∫õ‰ªªÂä°ÁöÑÁªìÊûú‰∫Ü„ÄÇ</p>
<p>Êù•ÔºåÊîπÈÄ†‰∏Ä‰∏ã 4.1 ËøôÈÅìÈ¢òÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">runAsync</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">r</span>) =&gt;</span> <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="title function_">r</span>(x, <span class="variable language_">console</span>.<span class="title function_">log</span>(x)), <span class="number">1000</span>));</span><br><span class="line">  <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">race</span>([<span class="title function_">runAsync</span>(<span class="number">1</span>), <span class="title function_">runAsync</span>(<span class="number">2</span>), <span class="title function_">runAsync</span>(<span class="number">3</span>)])</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;result: &quot;</span>, res))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err));</span><br></pre></td></tr></table></figure>

<p>ÊâßË°åÁªìÊûú‰∏∫Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line"><span class="string">&#x27;result: &#x27;</span> <span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>üë£ Ëøô‰∏™ race Êúâ‰ªÄ‰πàÁî®Âë¢Ôºü‰ΩøÁî®Âú∫ÊôØËøòÊòØÂæàÂ§öÁöÑÔºåÊØîÂ¶ÇÊàë‰ª¨ÂèØ‰ª•Áî® race ÁªôÊüê‰∏™ÂºÇÊ≠•ËØ∑Ê±ÇËÆæÁΩÆË∂ÖÊó∂Êó∂Èó¥ÔºåÂπ∂‰∏îÂú®Ë∂ÖÊó∂ÂêéÊâßË°åÁõ∏Â∫îÁöÑÊìç‰Ωú</p>
<h5 id="4-4-È¢òÁõÆÂõõ"><a href="#4-4-È¢òÁõÆÂõõ" class="headerlink" title="4.4 È¢òÁõÆÂõõ"></a>4.4 È¢òÁõÆÂõõ</h5><p>ÊîπÈÄ†‰∏Ä‰∏ãÈ¢òÁõÆ 4.2Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">runAsync</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">r</span>) =&gt;</span> <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="title function_">r</span>(x, <span class="variable language_">console</span>.<span class="title function_">log</span>(x)), <span class="number">1000</span>));</span><br><span class="line">  <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">runReject</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">res, rej</span>) =&gt;</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="title function_">rej</span>(<span class="string">`Error: <span class="subst">$&#123;x&#125;</span>`</span>, <span class="variable language_">console</span>.<span class="title function_">log</span>(x)), <span class="number">1000</span> * x)</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">race</span>([<span class="title function_">runReject</span>(<span class="number">0</span>), <span class="title function_">runAsync</span>(<span class="number">1</span>), <span class="title function_">runAsync</span>(<span class="number">2</span>), <span class="title function_">runAsync</span>(<span class="number">3</span>)])</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;result: &quot;</span>, res))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err));</span><br></pre></td></tr></table></figure>

<p>ÈÅáÂà∞ÈîôËØØÁöÑËØùÔºå‰πüÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂú®ËøôÈÅìÈ¢ò‰∏≠ÔºårunReject(0)ÊúÄÂÖàÊâßË°åÂÆåÔºåÊâÄ‰ª•ËøõÂÖ•‰∫Ü catch()‰∏≠Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>;</span><br><span class="line">(<span class="string">&quot;Error: 0&quot;</span>);</span><br><span class="line"><span class="number">1</span>;</span><br><span class="line"><span class="number">2</span>;</span><br><span class="line"><span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<p><strong>ÊÄªÁªì</strong>:<br>Â•ΩÁöÑÔºåËÆ©Êàë‰ª¨Êù•ÊÄªÁªì‰∏Ä‰∏ã.then()Âíå.race()ÂêßÔºåüòÑ</p>
<ul>
<li>Promise.all()ÁöÑ‰ΩúÁî®ÊòØÊé•Êî∂‰∏ÄÁªÑÂºÇÊ≠•‰ªªÂä°ÔºåÁÑ∂ÂêéÂπ∂Ë°åÊâßË°åÂºÇÊ≠•‰ªªÂä°ÔºåÂπ∂‰∏îÂú®ÊâÄÊúâÂºÇÊ≠•Êìç‰ΩúÊâßË°åÂÆåÂêéÊâçÊâßË°åÂõûË∞É„ÄÇ</li>
<li>.race()ÁöÑ‰ΩúÁî®‰πüÊòØÊé•Êî∂‰∏ÄÁªÑÂºÇÊ≠•‰ªªÂä°ÔºåÁÑ∂ÂêéÂπ∂Ë°åÊâßË°åÂºÇÊ≠•‰ªªÂä°ÔºåÂè™‰øùÁïôÂèñÁ¨¨‰∏Ä‰∏™ÊâßË°åÂÆåÊàêÁöÑÂºÇÊ≠•Êìç‰ΩúÁöÑÁªìÊûúÔºåÂÖ∂‰ªñÁöÑÊñπÊ≥ï‰ªçÂú®ÊâßË°åÔºå‰∏çËøáÊâßË°åÁªìÊûú‰ºöË¢´ÊäõÂºÉ„ÄÇ</li>
<li>Promise.all().then()ÁªìÊûú‰∏≠Êï∞ÁªÑÁöÑÈ°∫Â∫èÂíå Promise.all()Êé•Êî∂Âà∞ÁöÑÊï∞ÁªÑÈ°∫Â∫è‰∏ÄËá¥„ÄÇ</li>
</ul>
<h4 id="5-async-await-ÁöÑÂá†ÈÅìÈ¢ò"><a href="#5-async-await-ÁöÑÂá†ÈÅìÈ¢ò" class="headerlink" title="5. async&#x2F;await ÁöÑÂá†ÈÅìÈ¢ò"></a>5. async&#x2F;await ÁöÑÂá†ÈÅìÈ¢ò</h4><p>Êó¢ÁÑ∂Ë∞àÂà∞‰∫Ü PromiseÔºåÈÇ£Â∞±ËÇØÂÆöÂæóÂÜçËØ¥ËØ¥ async&#x2F;awaitÔºåÂú®ÂæàÂ§öÊó∂ÂÄô async Âíå Promise ÁöÑËß£Ê≥ïÂ∑Æ‰∏çÂ§öÔºåÂèàÊúâ‰∫õ‰∏ç‰∏ÄÊ†∑„ÄÇ‰∏ç‰ø°‰Ω†Êù•ÁúãÁúãÈ¢òÁõÆ‰∏Ä„ÄÇ</p>
<h5 id="5-1-È¢òÁõÆ‰∏Ä"><a href="#5-1-È¢òÁõÆ‰∏Ä" class="headerlink" title="5.1 È¢òÁõÆ‰∏Ä"></a>5.1 È¢òÁõÆ‰∏Ä</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async1 start&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">async2</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async1 end&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async2</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async2&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;start1&quot;</span>);</span><br><span class="line"><span class="title function_">async1</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;start2&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>Á≠îÊ°àÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;start1&quot;</span>;</span><br><span class="line"><span class="string">&quot;async1 start&quot;</span>;</span><br><span class="line"><span class="string">&quot;async2&quot;</span>;</span><br><span class="line"><span class="string">&quot;start2&quot;</span>;</span><br><span class="line"><span class="string">&quot;async1 end&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>ËøáÁ®ãÂàÜÊûêÔºö</p>
<ul>
<li>È¶ñÂÖà‰∏ÄËøõÊù•ÊòØÂàõÂª∫‰∫Ü‰∏§‰∏™ÂáΩÊï∞ÁöÑÔºåÊàë‰ª¨ÂÖà‰∏çÁúãÂáΩÊï∞ÁöÑÂàõÂª∫‰ΩçÁΩÆÔºåËÄåÊòØÁúãÂÆÉÁöÑË∞ÉÁî®‰ΩçÁΩÆ</li>
<li>ÂèëÁé∞ async1 ÂáΩÊï∞Ë¢´Ë∞ÉÁî®‰∫ÜÔºåÁÑ∂ÂêéÂéªÁúãÁúãË∞ÉÁî®ÁöÑÂÜÖÂÆπ</li>
<li>ÊâßË°åÂáΩÊï∞‰∏≠ÁöÑÂêåÊ≠•‰ª£Á†Å async1 startÔºå‰πãÂêéÁ¢∞Âà∞‰∫Ü awaitÔºåÂÆÉ‰ºöÈòªÂ°û async1 ÂêéÈù¢‰ª£Á†ÅÁöÑÊâßË°åÔºåÂõ†Ê≠§‰ºöÂÖàÂéªÊâßË°å async2 ‰∏≠ÁöÑÂêåÊ≠•‰ª£Á†Å async2ÔºåÁÑ∂ÂêéË∑≥Âá∫ async1</li>
<li>Ë∑≥Âá∫ async1 ÂáΩÊï∞ÂêéÔºåÊâßË°åÂêåÊ≠•‰ª£Á†Å start</li>
<li>Âú®‰∏ÄËΩÆÂÆè‰ªªÂä°ÂÖ®ÈÉ®ÊâßË°åÂÆå‰πãÂêéÔºåÂÜçÊù•ÊâßË°åÂàöÂàö await ÂêéÈù¢ÁöÑÂÜÖÂÆπ async1 end„ÄÇ<br>ÔºàÂú®ËøôÈáåÔºå‰Ω†ÂèØ‰ª•ÁêÜËß£‰∏∫ await ÂêéÈù¢ÁöÑÂÜÖÂÆπÂ∞±Áõ∏ÂΩì‰∫éÊîæÂà∞‰∫Ü Promise.then ÁöÑÈáåÈù¢Ôºâ</li>
</ul>
<p>Êù•ÁúãÁúãÂå∫Âà´ÔºåÂ¶ÇÊûúÊàë‰ª¨Êää await async2()Êç¢Êàê‰∏Ä‰∏™ new Promise Âë¢Ôºü</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async1 start&quot;</span>);</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async1 end&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">async1</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;start&quot;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;async1 start&quot;</span>;</span><br><span class="line"><span class="string">&quot;promise&quot;</span>;</span><br><span class="line"><span class="string">&quot;async1 end&quot;</span>;</span><br><span class="line"><span class="string">&quot;start&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>ÂèØ‰ª•ÁúãÂà∞ new Promise()Âπ∂‰∏ç‰ºöÈòªÂ°ûÂêéÈù¢ÁöÑÂêåÊ≠•‰ª£Á†Å async1 end ÁöÑÊâßË°å„ÄÇ</p>
<h5 id="5-2-È¢òÁõÆ‰∫å"><a href="#5-2-È¢òÁõÆ‰∫å" class="headerlink" title="5.2 È¢òÁõÆ‰∫å"></a>5.2 È¢òÁõÆ‰∫å</h5><p>Áé∞Âú®Â∞Ü async ÁªìÂêàÂÆöÊó∂Âô®ÁúãÁúã„ÄÇ</p>
<p>ÁªôÈ¢òÁõÆ‰∏Ä‰∏≠ÁöÑ async2 ÂáΩÊï∞‰∏≠Âä†‰∏ä‰∏Ä‰∏™ÂÆöÊó∂Âô®Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async1 start&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">async2</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async1 end&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async2</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;timer&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async2&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">async1</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;start&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>Ê≤°ÈîôÔºåÂÆöÊó∂Âô®ÂßãÁªàËøòÊòØÊúÄÂêéÊâßË°åÁöÑÔºåÂÆÉË¢´ÊîæÂà∞‰∏ã‰∏ÄÊù°ÂÆè‰ªªÂä°ÁöÑÂª∂ËøüÈòüÂàó‰∏≠„ÄÇ</p>
<p>Á≠îÊ°àÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;async1 start&quot;</span>;</span><br><span class="line"><span class="string">&quot;async2&quot;</span>;</span><br><span class="line"><span class="string">&quot;start&quot;</span>;</span><br><span class="line"><span class="string">&quot;async1 end&quot;</span>;</span><br><span class="line"><span class="string">&quot;timer&quot;</span>;</span><br></pre></td></tr></table></figure>

<h5 id="5-3-È¢òÁõÆ‰∏â"><a href="#5-3-È¢òÁõÆ‰∏â" class="headerlink" title="5.3 È¢òÁõÆ‰∏â"></a>5.3 È¢òÁõÆ‰∏â</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async1 start&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">async2</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async1 end&quot;</span>);</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;timer1&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async2</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;timer2&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async2&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">async1</span>();</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;timer3&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;start&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>ÊÄùËÄÉ‰∏Ä‰∏ã ü§îÔºåÊâßË°åÁªìÊûú‰ºöÊòØ‰ªÄ‰πàÔºü</p>
<p>ÂÖ∂ÂÆûÂ¶ÇÊûú‰Ω†ËÉΩÂÅöÂà∞ËøôÈáå‰∫ÜÔºåËØ¥Êòé‰Ω†ÂâçÈù¢ÁöÑÈÇ£‰∫õÁü•ËØÜÁÇπ‰πüÈÉΩÊéåÊè°‰∫ÜÔºåÊàëÂ∞±‰∏çÈúÄË¶ÅÂ§™ËøáËØ¶ÁªÜÁöÑÊ≠•È™§ÂàÜÊûê‰∫Ü„ÄÇ</p>
<p>Áõ¥Êé•ÂÖ¨Â∏ÉÁ≠îÊ°àÂêßÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;async1 start&quot;</span>;</span><br><span class="line"><span class="string">&quot;async2&quot;</span>;</span><br><span class="line"><span class="string">&quot;start&quot;</span>;</span><br><span class="line"><span class="string">&quot;async1 end&quot;</span>;</span><br><span class="line"><span class="string">&quot;timer2&quot;</span>;</span><br><span class="line"><span class="string">&quot;timer3&quot;</span>;</span><br><span class="line"><span class="string">&quot;timer1&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>ÂÆöÊó∂Âô®Ë∞ÅÂÖàÊâßË°åÔºå‰Ω†Âè™ÈúÄË¶ÅÂÖ≥Ê≥®Ë∞ÅÂÖàË¢´Ë∞ÉÁî®ÁöÑ‰ª•ÂèäÂª∂ËøüÊó∂Èó¥ÊòØÂ§öÂ∞ëÔºåËøôÈÅìÈ¢ò‰∏≠Âª∂ËøüÊó∂Èó¥ÈÉΩÊòØ 0ÔºåÊâÄ‰ª•Âè™Ë¶ÅÂÖ≥Ê≥®Ë∞ÅÂÖàË¢´Ë∞ÉÁî®ÁöÑ„ÄÇ„ÄÇ</p>
<h5 id="5-4-È¢òÁõÆÂõõ"><a href="#5-4-È¢òÁõÆÂõõ" class="headerlink" title="5.4 È¢òÁõÆÂõõ"></a>5.4 È¢òÁõÆÂõõ</h5><p>Ê≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºåasync ‰∏≠ÁöÑ await ÂëΩ‰ª§ÊòØ‰∏Ä‰∏™ Promise ÂØπË±°ÔºåËøîÂõûËØ•ÂØπË±°ÁöÑÁªìÊûú„ÄÇ</p>
<p>‰ΩÜÂ¶ÇÊûú‰∏çÊòØ Promise ÂØπË±°ÁöÑËØùÔºåÂ∞±‰ºöÁõ¥Êé•ËøîÂõûÂØπÂ∫îÁöÑÂÄºÔºåÁõ∏ÂΩì‰∫é Promise.resolve()</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// return await 1234</span></span><br><span class="line">  <span class="comment">// Á≠âÂêå‰∫é</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">123</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(res));</span><br></pre></td></tr></table></figure>

<p>ÁªìÊûúÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">123</span>;</span><br></pre></td></tr></table></figure>

<h5 id="5-5-È¢òÁõÆ‰∫î"><a href="#5-5-È¢òÁõÆ‰∫î" class="headerlink" title="5.5 È¢òÁõÆ‰∫î"></a>5.5 È¢òÁõÆ‰∫î</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async1 start&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise1&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async1 success&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;async1 end&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;srcipt start&quot;</span>);</span><br><span class="line"><span class="title function_">async1</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(res));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;srcipt end&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>Âú® async1 ‰∏≠ await ÂêéÈù¢ÁöÑ Promise ÊòØÊ≤°ÊúâËøîÂõûÂÄºÁöÑÔºå‰πüÂ∞±ÊòØÂÆÉÁöÑÁä∂ÊÄÅÂßãÁªàÊòØ pending Áä∂ÊÄÅÔºåÂõ†Ê≠§Áõ∏ÂΩì‰∫é‰∏ÄÁõ¥Âú® awaitÔºåawaitÔºåawait Âç¥ÂßãÁªàÊ≤°ÊúâÂìçÂ∫î‚Ä¶</p>
<p>ÊâÄ‰ª•Âú® await ‰πãÂêéÁöÑÂÜÖÂÆπÊòØ‰∏ç‰ºöÊâßË°åÁöÑÔºå‰πüÂåÖÊã¨ async1 ÂêéÈù¢ÁöÑ .then„ÄÇ</p>
<p>Á≠îÊ°à‰∏∫Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;script start&quot;</span>;</span><br><span class="line"><span class="string">&quot;async1 start&quot;</span>;</span><br><span class="line"><span class="string">&quot;promise1&quot;</span>;</span><br><span class="line"><span class="string">&quot;script end&quot;</span>;</span><br></pre></td></tr></table></figure>

<h5 id="5-6-È¢òÁõÆÂÖ≠"><a href="#5-6-È¢òÁõÆÂÖ≠" class="headerlink" title="5.6 È¢òÁõÆÂÖ≠"></a>5.6 È¢òÁõÆÂÖ≠</h5><p>ËÆ©Êàë‰ª¨Áªô 5.5 ‰∏≠ÁöÑ Promise Âä†‰∏ä resolveÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async1 start&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise33&quot;</span>);</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&quot;promise22 resolve&quot;</span>);</span><br><span class="line">  &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(res, <span class="string">&quot;55&quot;</span>));</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async11 success&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;async1 end&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;srcipt start&quot;</span>);</span><br><span class="line"><span class="title function_">async1</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(res, <span class="string">&quot;44&quot;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;srcipt end&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>Áé∞Âú® Promise Êúâ‰∫ÜËøîÂõûÂÄº‰∫ÜÔºåÂõ†Ê≠§ await ÂêéÈù¢ÁöÑÂÜÖÂÆπÂ∞Ü‰ºöË¢´ÊâßË°åÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">srcipt start</span><br><span class="line">async1 start</span><br><span class="line">promise33</span><br><span class="line">srcipt end</span><br><span class="line">promise22 resolve <span class="number">55</span></span><br><span class="line">async11 success</span><br><span class="line">async1 end <span class="number">44</span></span><br></pre></td></tr></table></figure>

<h5 id="5-7-È¢òÁõÆ‰∏É"><a href="#5-7-È¢òÁõÆ‰∏É" class="headerlink" title="5.7 È¢òÁõÆ‰∏É"></a>5.7 È¢òÁõÆ‰∏É</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async1 start&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise1&quot;</span>);</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&quot;promise resolve&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async1 success&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;async1 end&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;srcipt start&quot;</span>);</span><br><span class="line"><span class="title function_">async1</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise2&quot;</span>);</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;timer&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ËøôÈÅìÈ¢òÂ∫îËØ•‰πü‰∏çÈöæÔºå‰∏çËøáÊúâ‰∏ÄÁÇπÈúÄË¶ÅÊ≥®ÊÑèÁöÑÔºåÂú® async1 ‰∏≠ÁöÑ new Promise ÂÆÉÁöÑ resovle ÁöÑÂÄºÂíå async1().then()ÈáåÁöÑÂÄºÊòØÊ≤°ÊúâÂÖ≥Á≥ªÁöÑÔºåÂæàÂ§öÂ∞è‰ºô‰º¥ÂèØËÉΩÁúãÂà∞ resovle(‚Äòpromise resolve‚Äô)Â∞±‰ºöËØØ‰ª•‰∏∫ÊòØ async1().then()‰∏≠ÁöÑËøîÂõûÂÄº„ÄÇ</p>
<p>Âõ†Ê≠§ËøôÈáåÁöÑÊâßË°åÁªìÊûú‰∏∫Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;script start&quot;</span>;</span><br><span class="line"><span class="string">&quot;async1 start&quot;</span>;</span><br><span class="line"><span class="string">&quot;promise1&quot;</span>;</span><br><span class="line"><span class="string">&quot;promise2&quot;</span>;</span><br><span class="line"><span class="string">&quot;async1 success&quot;</span>;</span><br><span class="line"><span class="string">&quot;sync1 end&quot;</span>;</span><br><span class="line"><span class="string">&quot;timer&quot;</span>;</span><br></pre></td></tr></table></figure>

<h5 id="5-8-È¢òÁõÆÂÖ´"><a href="#5-8-È¢òÁõÆÂÖ´" class="headerlink" title="5.8 È¢òÁõÆÂÖ´"></a>5.8 È¢òÁõÆÂÖ´</h5><p>Êàë‰ª¨ÂÜçÊù•Áúã‰∏ÄÈÅìÂ§¥Êù°ÊõæÁªèÁöÑÈù¢ËØïÈ¢òÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async1 start&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">async2</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async1 end&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async2</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async2&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;script start&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;setTimeout&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">async1</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise1&quot;</span>);</span><br><span class="line">  <span class="title function_">resolve</span>();</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise2&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;script end&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>Ëá™‰ø°ÁöÑÂÜô‰∏ã‰Ω†‰ª¨ÁöÑÁ≠îÊ°àÂêß„ÄÇ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;script start&quot;</span>;</span><br><span class="line"><span class="string">&quot;async1 start&quot;</span>;</span><br><span class="line"><span class="string">&quot;async2&quot;</span>;</span><br><span class="line"><span class="string">&quot;promise1&quot;</span>;</span><br><span class="line"><span class="string">&quot;script end&quot;</span>;</span><br><span class="line"><span class="string">&quot;async1 end&quot;</span>;</span><br><span class="line"><span class="string">&quot;promise2&quot;</span>;</span><br><span class="line"><span class="string">&quot;setTimeout&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>(ËøôÈÅìÈ¢òÊúÄÂêé async1 end Âíå promise2 ÁöÑÈ°∫Â∫èÂÖ∂ÂÆûÂú®ÁΩë‰∏äÈ•±Âèó‰∫âËÆÆÔºåÊàëËøôÈáå‰ΩøÁî®ÊµèËßàÂô® Chrome V80ÔºåNode v12.16.1 ÁöÑÊâßË°åÁªìÊûúÈÉΩÊòØ‰∏äÈù¢Ëøô‰∏™Á≠îÊ°à)</p>
<h5 id="5-9-È¢òÁõÆ‰πù"><a href="#5-9-È¢òÁõÆ‰πù" class="headerlink" title="5.9 È¢òÁõÆ‰πù"></a>5.9 È¢òÁõÆ‰πù</h5><p>Â•ΩÁöÑ üëåÔºåasync&#x2F;await Â§ßÊ≥ïÂ∑≤ÁªÉÊàêÔºåÂí±‰ª¨ÁªßÁª≠Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">testSometing</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ÊâßË°åtestSometing&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;testSometing&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">testAsync</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ÊâßË°åtestAsync&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="string">&quot;hello async&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;test start...&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> v1 = <span class="keyword">await</span> <span class="title function_">testSometing</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(v1);</span><br><span class="line">  <span class="keyword">const</span> v2 = <span class="keyword">await</span> <span class="title function_">testAsync</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(v2);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(v1, v2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise start...&quot;</span>);</span><br><span class="line">  <span class="title function_">resolve</span>(<span class="string">&quot;promise&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function">(<span class="params">val</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(val));</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;test end...&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>Á≠îÊ°àÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;test start...&#x27;</span></span><br><span class="line"><span class="string">&#x27;ÊâßË°åtestSometing&#x27;</span></span><br><span class="line"><span class="string">&#x27;promise start...&#x27;</span></span><br><span class="line"><span class="string">&#x27;test end...&#x27;</span></span><br><span class="line"><span class="string">&#x27;testSometing&#x27;</span></span><br><span class="line"><span class="string">&#x27;ÊâßË°åtestAsync&#x27;</span></span><br><span class="line"><span class="string">&#x27;promise&#x27;</span></span><br><span class="line"><span class="string">&#x27;hello async&#x27;</span></span><br><span class="line"><span class="string">&#x27;testSometing&#x27;</span> <span class="string">&#x27;hello async&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="6-async-Â§ÑÁêÜÈîôËØØ"><a href="#6-async-Â§ÑÁêÜÈîôËØØ" class="headerlink" title="6. async Â§ÑÁêÜÈîôËØØ"></a>6. async Â§ÑÁêÜÈîôËØØ</h4><h5 id="6-1-È¢òÁõÆ‰∏Ä"><a href="#6-1-È¢òÁõÆ‰∏Ä" class="headerlink" title="6.1 È¢òÁõÆ‰∏Ä"></a>6.1 È¢òÁõÆ‰∏Ä</h5><p>Âú® async ‰∏≠ÔºåÂ¶ÇÊûú await ÂêéÈù¢ÁöÑÂÜÖÂÆπÊòØ‰∏Ä‰∏™ÂºÇÂ∏∏ÊàñËÄÖÈîôËØØÁöÑËØùÔºå‰ºöÊÄéÊ†∑Âë¢Ôºü</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">async2</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async1&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;async1 success&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async2</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async2&quot;</span>);</span><br><span class="line">    <span class="title function_">reject</span>(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">async1</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(res));</span><br></pre></td></tr></table></figure>

<p>‰æãÂ¶ÇËøôÈÅìÈ¢ò‰∏≠Ôºåawait ÂêéÈù¢Ë∑üÁùÄÁöÑÊòØ‰∏Ä‰∏™Áä∂ÊÄÅ‰∏∫ rejected ÁöÑ promise„ÄÇ</p>
<p>Â¶ÇÊûúÂú® async ÂáΩÊï∞‰∏≠ÊäõÂá∫‰∫ÜÈîôËØØÔºåÂàôÁªàÊ≠¢ÈîôËØØÁªìÊûúÔºå‰∏ç‰ºöÁªßÁª≠Âêë‰∏ãÊâßË°å„ÄÇ</p>
<p>ÊâÄ‰ª•Á≠îÊ°à‰∏∫Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;async2&#x27;</span></span><br><span class="line"><span class="title class_">Uncaught</span> (<span class="keyword">in</span> promise) error</span><br></pre></td></tr></table></figure>

<p>Â¶ÇÊûúÊîπ‰∏∫ throw new Error ‰πüÊòØ‰∏ÄÊ†∑ÁöÑÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async1&quot;</span>);</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;error!!!&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;async1 success&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">async1</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(res));</span><br></pre></td></tr></table></figure>

<p>ÁªìÊûú‰∏∫Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;async1&#x27;</span></span><br><span class="line"><span class="title class_">Uncaught</span> (<span class="keyword">in</span> promise) <span class="title class_">Error</span>: error!!!</span><br></pre></td></tr></table></figure>

<h5 id="6-2-È¢òÁõÆ‰∫å"><a href="#6-2-È¢òÁõÆ‰∫å" class="headerlink" title="6.2 È¢òÁõÆ‰∫å"></a>6.2 È¢òÁõÆ‰∫å</h5><p>Â¶ÇÊûúÊÉ≥Ë¶Å‰ΩøÂæóÈîôËØØÁöÑÂú∞Êñπ‰∏çÂΩ±Âìç async ÂáΩÊï∞ÂêéÁª≠ÁöÑÊâßË°åÁöÑËØùÔºåÂèØ‰ª•‰ΩøÁî® try catch</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">&quot;error!!!&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async1&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="string">&quot;async1 success&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">async1</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(res));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;script start&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>ËøôÈáåÁöÑÁªìÊûú‰∏∫Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;script start&quot;</span>;</span><br><span class="line"><span class="string">&quot;error!!!&quot;</span>;</span><br><span class="line"><span class="string">&quot;async1&quot;</span>;</span><br><span class="line"><span class="string">&quot;async1 success&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>ÊàñËÄÖ‰Ω†ÂèØ‰ª•Áõ¥Êé•Âú® Promise.reject ÂêéÈù¢Ë∑üÁùÄ‰∏Ä‰∏™ catch()ÊñπÊ≥ïÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// try &#123;</span></span><br><span class="line">  <span class="comment">//   await Promise.reject(&#x27;error!!!&#x27;)</span></span><br><span class="line">  <span class="comment">// &#125; catch(e) &#123;</span></span><br><span class="line">  <span class="comment">//   console.log(e)</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">  <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">&quot;error!!!&quot;</span>).<span class="title function_">catch</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(e));</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async1&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="string">&quot;async1 success&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">async1</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(res));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;script start&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>ËøêË°åÁªìÊûúÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ</p>
<h4 id="7-ÁªºÂêàÈ¢ò"><a href="#7-ÁªºÂêàÈ¢ò" class="headerlink" title="7. ÁªºÂêàÈ¢ò"></a>7. ÁªºÂêàÈ¢ò</h4><h5 id="7-1-È¢òÁõÆ‰∏Ä"><a href="#7-1-È¢òÁõÆ‰∏Ä" class="headerlink" title="7.1 È¢òÁõÆ‰∏Ä"></a>7.1 È¢òÁõÆ‰∏Ä</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">first</span> = (<span class="params"></span>) =&gt;</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">7</span>);</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span>);</span><br><span class="line">        <span class="title function_">resolve</span>(<span class="number">6</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(p);</span><br><span class="line">      &#125;, <span class="number">0</span>);</span><br><span class="line">      <span class="title function_">resolve</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="number">2</span>);</span><br><span class="line">    p.<span class="title function_">then</span>(<span class="function">(<span class="params">arg</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(arg);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="title function_">first</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">arg</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(arg);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>);</span><br></pre></td></tr></table></figure>

<p>ËøáÁ®ãÂàÜÊûêÔºö</p>
<ul>
<li>Á¨¨‰∏ÄÊÆµ‰ª£Á†ÅÂÆö‰πâÁöÑÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÔºåÊâÄ‰ª•Êàë‰ª¨ÂæóÁúãÁúãÂÆÉÊòØÂú®Âì™ÊâßË°åÁöÑÔºåÂèëÁé∞ÂÆÉÂú® 4 ‰πãÂâçÔºåÊâÄ‰ª•ÂèØ‰ª•Êù•ÁúãÁúã first ÂáΩÊï∞ÈáåÈù¢ÁöÑÂÜÖÂÆπ‰∫Ü„ÄÇ(Ëøô‰∏ÄÊ≠•ÊúâÁÇπÁ±ª‰ºº‰∫éÈ¢òÁõÆ 1.5)</li>
<li>ÂáΩÊï∞ first ËøîÂõûÁöÑÊòØ‰∏Ä‰∏™ new Promise()ÔºåÂõ†Ê≠§ÂÖàÊâßË°åÈáåÈù¢ÁöÑÂêåÊ≠•‰ª£Á†Å 3</li>
<li>Êé•ÁùÄÂèàÈÅáÂà∞‰∫Ü‰∏Ä‰∏™ new Promise()ÔºåÁõ¥Êé•ÊâßË°åÈáåÈù¢ÁöÑÂêåÊ≠•‰ª£Á†Å 7</li>
<li>ÊâßË°åÂÆå 7 ‰πãÂêéÔºåÂú® p ‰∏≠ÔºåÈÅáÂà∞‰∫Ü‰∏Ä‰∏™ÂÆöÊó∂Âô®ÔºåÂÖàÂ∞ÜÂÆÉÊîæÂà∞‰∏ã‰∏Ä‰∏™ÂÆè‰ªªÂä°ÈòüÂàóÈáå‰∏çÁÆ°ÂÆÉÔºåÊé•ÁùÄÂêë‰∏ãËµ∞</li>
<li>Á¢∞Âà∞‰∫Ü resolve(1)ÔºåËøôÈáåÂ∞±Êää p ÁöÑÁä∂ÊÄÅÊîπ‰∏∫‰∫Ü resolvedÔºå‰∏îËøîÂõûÂÄº‰∏∫ 1Ôºå‰∏çËøáËøôÈáå‰πüÂÖà‰∏çÊâßË°å</li>
<li>Ë∑≥Âá∫ pÔºåÁ¢∞Âà∞‰∫Ü resolve(2)ÔºåËøôÈáåÁöÑ resolve(2)ÔºåË°®Á§∫ÁöÑÊòØÊää first ÂáΩÊï∞ËøîÂõûÁöÑÈÇ£‰∏™ Promise ÁöÑÁä∂ÊÄÅÊîπ‰∫ÜÔºå‰πüÂÖà‰∏çÁÆ°ÂÆÉ„ÄÇ</li>
<li>ÁÑ∂ÂêéÁ¢∞Âà∞‰∫Ü p.thenÔºåÂ∞ÜÂÆÉÂä†ÂÖ•Êú¨Ê¨°Âæ™ÁéØÁöÑÂæÆ‰ªªÂä°ÂàóË°®ÔºåÁ≠âÂæÖÊâßË°å</li>
<li>Ë∑≥Âá∫ first ÂáΩÊï∞ÔºåÈÅáÂà∞‰∫Ü first().then()ÔºåÂ∞ÜÂÆÉÂä†ÂÖ•Êú¨Ê¨°Âæ™ÁéØÁöÑÂæÆ‰ªªÂä°ÂàóË°®(p.then ÁöÑÂêéÈù¢ÊâßË°å)</li>
<li>ÁÑ∂ÂêéÊâßË°åÂêåÊ≠•‰ª£Á†Å 4</li>
<li>Êú¨ËΩÆÁöÑÂêåÊ≠•‰ª£Á†ÅÂÖ®ÈÉ®ÊâßË°åÂÆåÊØïÔºåÊü•ÊâæÂæÆ‰ªªÂä°ÂàóË°®ÔºåÂèëÁé∞ p.then Âíå first().then()Ôºå‰æùÊ¨°ÊâßË°åÔºåÊâìÂç∞Âá∫ 1 Âíå 2</li>
<li>Êú¨ËΩÆ‰ªªÂä°ÊâßË°åÂÆåÊØï‰∫ÜÔºåÂèëÁé∞ËøòÊúâ‰∏Ä‰∏™ÂÆöÊó∂Âô®Ê≤°ÊúâË∑ëÂÆåÔºåÊé•ÁùÄÊâßË°åËøô‰∏™ÂÆöÊó∂Âô®ÈáåÁöÑÂÜÖÂÆπÔºåÊâßË°åÂêåÊ≠•‰ª£Á†Å 5</li>
<li>ÁÑ∂ÂêéÂèàÈÅáÂà∞‰∫Ü‰∏Ä‰∏™ resolve(6)ÔºåÂÆÉÊòØÊîæÂú® p ÈáåÁöÑÔºå‰ΩÜÊòØ p ÁöÑÁä∂ÊÄÅÂú®‰πãÂâçÂ∑≤ÁªèÂèëÁîüËøáÊîπÂèò‰∫ÜÔºå- Âõ†Ê≠§ËøôÈáåÂ∞±‰∏ç‰ºöÂÜçÊîπÂèòÔºå‰πüÂ∞±ÊòØËØ¥ resolve(6)Áõ∏ÂΩì‰∫éÊ≤°‰ªª‰ΩïÁî®Â§ÑÔºåÂõ†Ê≠§ÊâìÂç∞Âá∫Êù•ÁöÑ p ‰∏∫<code>Promise&#123;&lt;resolved&gt;: 1&#125;</code>„ÄÇ(Ëøô‰∏ÄÊ≠•Á±ª‰ºº‰∫éÈ¢òÁõÆ 3.1)</li>
</ul>
<p>ÁªìÊûúÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">7</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="title class_">Promise</span>&#123;&lt;resolved&gt;: <span class="number">1</span>&#125;</span><br></pre></td></tr></table></figure>

<h5 id="7-2-È¢òÁõÆ‰∫å"><a href="#7-2-È¢òÁõÆ‰∫å" class="headerlink" title="7.2 È¢òÁõÆ‰∫å"></a>7.2 È¢òÁõÆ‰∫å</h5><h6 id="A"><a href="#A" class="headerlink" title="A"></a>A</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">async1</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async1&quot;</span>); <span class="comment">//2</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;timer1&quot;</span>); <span class="comment">//h1 - 2s 8</span></span><br><span class="line">  &#125;, <span class="number">2000</span>);</span><br><span class="line">  <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise1&quot;</span>); <span class="comment">//3</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async1 end&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;async1 success&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;script start&quot;</span>); <span class="comment">//1</span></span><br><span class="line"><span class="title function_">async1</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(res));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;script end&quot;</span>); <span class="comment">//4</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">1</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="number">2</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">3</span>))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="number">4</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(res)); <span class="comment">//w1 5-1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;timer2&quot;</span>); <span class="comment">//h2 - 1s 6</span></span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<p>Ê≥®ÊÑèÁöÑÁü•ËØÜÁÇπÔºö</p>
<ul>
<li>async ÂáΩÊï∞‰∏≠ await ÁöÑ new Promise Ë¶ÅÊòØÊ≤°ÊúâËøîÂõûÂÄºÁöÑËØùÂàô‰∏çÊâßË°åÂêéÈù¢ÁöÑÂÜÖÂÆπ(Á±ª‰ººÈ¢ò 5.5)</li>
<li>.then ÂáΩÊï∞‰∏≠ÁöÑÂèÇÊï∞ÊúüÂæÖÁöÑÊòØÂáΩÊï∞ÔºåÂ¶ÇÊûú‰∏çÊòØÂáΩÊï∞ÁöÑËØù‰ºöÂèëÁîüÁ©øÈÄè(Á±ª‰ººÈ¢ò 3.8 )</li>
<li>Ê≥®ÊÑèÂÆöÊó∂Âô®ÁöÑÂª∂ËøüÊó∂Èó¥</li>
</ul>
<p>Âõ†Ê≠§Êú¨È¢òÁ≠îÊ°à‰∏∫Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;script start&quot;</span>;</span><br><span class="line"><span class="string">&quot;async1&quot;</span>;</span><br><span class="line"><span class="string">&quot;promise1&quot;</span>;</span><br><span class="line"><span class="string">&quot;script end&quot;</span>;</span><br><span class="line"><span class="number">1</span>;</span><br><span class="line">(<span class="string">&quot;timer2&quot;</span>);</span><br><span class="line">(<span class="string">&quot;timer1&quot;</span>);</span><br></pre></td></tr></table></figure>

<h6 id="B"><a href="#B" class="headerlink" title="B"></a>B</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">async1</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async1&quot;</span>); <span class="comment">//2</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;timer1&quot;</span>); <span class="comment">//h1 - 2s 9</span></span><br><span class="line">  &#125;, <span class="number">2000</span>);</span><br><span class="line">  <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;promise1&quot;</span>); <span class="comment">//3</span></span><br><span class="line">    <span class="title function_">resolve</span>(<span class="number">0</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;async1 end&quot;</span>); <span class="comment">//w1 5</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;async1 success&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;script start&quot;</span>); <span class="comment">//1</span></span><br><span class="line"><span class="title function_">async1</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(res)); <span class="comment">//w2 6async1 success</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;script end&quot;</span>); <span class="comment">//4</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">1</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="number">2</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">3</span>))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="number">4</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(res)); <span class="comment">//w3 7 1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;timer2&quot;</span>); <span class="comment">//h2 - 1s 8</span></span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<p>Á≠îÊ°àÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">script start</span><br><span class="line">async1</span><br><span class="line">promise1</span><br><span class="line">script end</span><br><span class="line">async1 end</span><br><span class="line">async1 success</span><br><span class="line"><span class="number">1</span></span><br><span class="line">timer2</span><br><span class="line">timer1</span><br></pre></td></tr></table></figure>

<h5 id="7-3-È¢òÁõÆ‰∏â"><a href="#7-3-È¢òÁõÆ‰∏â" class="headerlink" title="7.3 È¢òÁõÆ‰∏â"></a>7.3 È¢òÁõÆ‰∏â</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&quot;resolve3&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;timer1&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">  <span class="title function_">resolve</span>(<span class="string">&quot;resovle1&quot;</span>);</span><br><span class="line">  <span class="title function_">resolve</span>(<span class="string">&quot;resolve2&quot;</span>);</span><br><span class="line">&#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(p1);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">finally</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;finally&quot;</span>, res);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>Ê≥®ÊÑèÁöÑÁü•ËØÜÁÇπÔºö</p>
<ul>
<li>Promise ÁöÑÁä∂ÊÄÅ‰∏ÄÊó¶ÊîπÂèòÂ∞±Êó†Ê≥ïÊîπÂèò(Á±ª‰ººÈ¢òÁõÆ 3.5)</li>
<li>finally ‰∏çÁÆ° Promise ÁöÑÁä∂ÊÄÅÊòØ resolved ËøòÊòØ rejected ÈÉΩ‰ºöÊâßË°åÔºå‰∏îÂÆÉÁöÑÂõûË∞ÉÂáΩÊï∞ÊòØÊ≤°ÊúâÂèÇÊï∞ÁöÑ(Á±ª‰ºº 3.10)</li>
</ul>
<p>Á≠îÊ°àÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;resolve1&#x27;</span></span><br><span class="line"><span class="string">&#x27;finally&#x27;</span> <span class="literal">undefined</span></span><br><span class="line"><span class="string">&#x27;timer1&#x27;</span></span><br><span class="line"><span class="title class_">Promise</span>&#123;&lt;resolved&gt;: <span class="literal">undefined</span>&#125;</span><br></pre></td></tr></table></figure>

<h4 id="8-Âá†ÈÅìÂ§ßÂéÇÁöÑÈù¢ËØïÈ¢ò"><a href="#8-Âá†ÈÅìÂ§ßÂéÇÁöÑÈù¢ËØïÈ¢ò" class="headerlink" title="8. Âá†ÈÅìÂ§ßÂéÇÁöÑÈù¢ËØïÈ¢ò"></a>8. Âá†ÈÅìÂ§ßÂéÇÁöÑÈù¢ËØïÈ¢ò</h4><h5 id="8-1-‰ΩøÁî®-Promise-ÂÆûÁé∞ÊØèÈöî-1-ÁßíËæìÂá∫-1-2-3"><a href="#8-1-‰ΩøÁî®-Promise-ÂÆûÁé∞ÊØèÈöî-1-ÁßíËæìÂá∫-1-2-3" class="headerlink" title="8.1 ‰ΩøÁî® Promise ÂÆûÁé∞ÊØèÈöî 1 ÁßíËæìÂá∫ 1,2,3"></a>8.1 ‰ΩøÁî® Promise ÂÆûÁé∞ÊØèÈöî 1 ÁßíËæìÂá∫ 1,2,3</h5><p>ËøôÈÅìÈ¢òÊØîËæÉÁÆÄÂçïÁöÑ‰∏ÄÁßçÂÅöÊ≥ïÊòØÂèØ‰ª•Áî® Promise ÈÖçÂêàÁùÄ reduce ‰∏çÂÅúÁöÑÂú® promise ÂêéÈù¢Âè†Âä†.thenÔºåËØ∑Áúã‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">arr.<span class="title function_">reduce</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> a.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a, b);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(<span class="variable language_">console</span>.<span class="title function_">log</span>(b));</span><br><span class="line">      &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;, <span class="title class_">Promise</span>.<span class="title function_">resolve</span>());</span><br></pre></td></tr></table></figure>

<p>ÊàñËÄÖ‰Ω†ÂèØ‰ª•Êõ¥ÁÆÄÂçï‰∏ÄÁÇπÂÜôÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">arr.<span class="title function_">reduce</span>(</span><br><span class="line">  <span class="function">(<span class="params">p, x</span>) =&gt;</span></span><br><span class="line">    p.<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">r</span>) =&gt;</span> <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="title function_">r</span>(<span class="variable language_">console</span>.<span class="title function_">log</span>(x)), <span class="number">1000</span>))),</span><br><span class="line">  <span class="title class_">Promise</span>.<span class="title function_">resolve</span>()</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="8-2-‰ΩøÁî®-Promise-ÂÆûÁé∞Á∫¢ÁªøÁÅØ‰∫§ÊõøÈáçÂ§ç‰∫Æ"><a href="#8-2-‰ΩøÁî®-Promise-ÂÆûÁé∞Á∫¢ÁªøÁÅØ‰∫§ÊõøÈáçÂ§ç‰∫Æ" class="headerlink" title="8.2 ‰ΩøÁî® Promise ÂÆûÁé∞Á∫¢ÁªøÁÅØ‰∫§ÊõøÈáçÂ§ç‰∫Æ"></a>8.2 ‰ΩøÁî® Promise ÂÆûÁé∞Á∫¢ÁªøÁÅØ‰∫§ÊõøÈáçÂ§ç‰∫Æ</h5><p>Á∫¢ÁÅØ 3 Áßí‰∫Æ‰∏ÄÊ¨°ÔºåÈªÑÁÅØ 2 Áßí‰∫Æ‰∏ÄÊ¨°ÔºåÁªøÁÅØ 1 Áßí‰∫Æ‰∏ÄÊ¨°ÔºõÂ¶Ç‰ΩïËÆ©‰∏â‰∏™ÁÅØ‰∏çÊñ≠‰∫§ÊõøÈáçÂ§ç‰∫ÆÁÅØÔºüÔºàÁî® Promise ÂÆûÁé∞Ôºâ‰∏â‰∏™‰∫ÆÁÅØÂáΩÊï∞Â∑≤ÁªèÂ≠òÂú®Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">red</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;red&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">green</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;green&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">yellow</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;yellow&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Á≠îÊ°àÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">red</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;red&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">green</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;green&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">yellow</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;yellow&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> light = <span class="keyword">function</span> (<span class="params">timer, cb</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">cb</span>();</span><br><span class="line">      <span class="title function_">resolve</span>();</span><br><span class="line">    &#125;, timer);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> step = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Promise</span>.<span class="title function_">resolve</span>()</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">light</span>(<span class="number">3000</span>, red);</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">light</span>(<span class="number">2000</span>, green);</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">light</span>(<span class="number">1000</span>, yellow);</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">step</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">step</span>();</span><br></pre></td></tr></table></figure>

<h5 id="8-3-ÂÆûÁé∞-mergePromise-ÂáΩÊï∞"><a href="#8-3-ÂÆûÁé∞-mergePromise-ÂáΩÊï∞" class="headerlink" title="8.3 ÂÆûÁé∞ mergePromise ÂáΩÊï∞"></a>8.3 ÂÆûÁé∞ mergePromise ÂáΩÊï∞</h5><p>ÂÆûÁé∞ mergePromise ÂáΩÊï∞ÔºåÊää‰º†ËøõÂéªÁöÑÊï∞ÁªÑÊåâÈ°∫Â∫èÂÖàÂêéÊâßË°åÔºåÂπ∂‰∏îÊääËøîÂõûÁöÑÊï∞ÊçÆÂÖàÂêéÊîæÂà∞Êï∞ÁªÑ data ‰∏≠„ÄÇ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">time</span> = (<span class="params">timer</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">resolve</span>();</span><br><span class="line">    &#125;, timer);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">ajax1</span> = (<span class="params"></span>) =&gt;</span><br><span class="line">  <span class="title function_">time</span>(<span class="number">2000</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">ajax2</span> = (<span class="params"></span>) =&gt;</span><br><span class="line">  <span class="title function_">time</span>(<span class="number">1000</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">ajax3</span> = (<span class="params"></span>) =&gt;</span><br><span class="line">  <span class="title function_">time</span>(<span class="number">1000</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">mergePromise</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// Âú®ËøôÈáåÂÜô‰ª£Á†Å</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">mergePromise</span>([ajax1, ajax2, ajax3]).<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;done&quot;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(data); <span class="comment">// data ‰∏∫ [1, 2, 3]</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Ë¶ÅÊ±ÇÂàÜÂà´ËæìÂá∫</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"><span class="comment">// done</span></span><br><span class="line"><span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure>

<p>ËøôÈÅìÈ¢òÊúâÁÇπÁ±ª‰ºº‰∫é Promise.all()Ôºå‰∏çËøá.all()‰∏çÈúÄË¶ÅÁÆ°ÊâßË°åÈ°∫Â∫èÔºåÂè™ÈúÄË¶ÅÂπ∂ÂèëÊâßË°åÂ∞±Ë°å‰∫Ü„ÄÇ‰ΩÜÊòØËøôÈáåÈúÄË¶ÅÁ≠â‰∏ä‰∏Ä‰∏™ÊâßË°åÂÆåÊØï‰πãÂêéÊâçËÉΩÊâßË°å‰∏ã‰∏Ä‰∏™„ÄÇ</p>
<p>Ëß£È¢òÊÄùË∑ØÔºö</p>
<ul>
<li>ÂÆö‰πâ‰∏Ä‰∏™Êï∞ÁªÑ data Áî®‰∫é‰øùÂ≠òÊâÄÊúâÂºÇÊ≠•Êìç‰ΩúÁöÑÁªìÊûú</li>
<li>ÂàùÂßãÂåñ‰∏Ä‰∏™ const promise &#x3D; Promise.resolve()ÔºåÁÑ∂ÂêéÂæ™ÁéØÈÅçÂéÜÊï∞ÁªÑÔºåÂú® promise ÂêéÈù¢Ê∑ªÂä†ÊâßË°å ajax ‰ªªÂä°ÔºåÂêåÊó∂Ë¶ÅÂ∞ÜÊ∑ªÂä†ÁöÑÁªìÊûúÈáçÊñ∞ËµãÂÄºÂà∞ promise ‰∏ä„ÄÇ</li>
</ul>
<p>Á≠îÊ°àÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">mergePromise</span>(<span class="params">ajaxArray</span>) &#123;</span><br><span class="line">  <span class="comment">// Â≠òÊîæÊØè‰∏™ajaxÁöÑÁªìÊûú</span></span><br><span class="line">  <span class="keyword">const</span> data = [];</span><br><span class="line">  <span class="keyword">let</span> promise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>();</span><br><span class="line">  ajaxArray.<span class="title function_">forEach</span>(<span class="function">(<span class="params">ajax</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Á¨¨‰∏ÄÊ¨°ÁöÑthen‰∏∫‰∫ÜÁî®Êù•Ë∞ÉÁî®ajax</span></span><br><span class="line">    <span class="comment">// Á¨¨‰∫åÊ¨°ÁöÑthenÊòØ‰∏∫‰∫ÜËé∑ÂèñajaxÁöÑÁªìÊûú</span></span><br><span class="line">    promise = promise.<span class="title function_">then</span>(ajax).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      data.<span class="title function_">push</span>(res);</span><br><span class="line">      <span class="keyword">return</span> data; <span class="comment">// ÊääÊØèÊ¨°ÁöÑÁªìÊûúËøîÂõû</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// ÊúÄÂêéÂæóÂà∞ÁöÑpromiseÂÆÉÁöÑÂÄºÂ∞±ÊòØdata</span></span><br><span class="line">  <span class="keyword">return</span> promise;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="8-4-Ê†πÊçÆ-promiseA-ÂÆûÁé∞‰∏Ä‰∏™Ëá™Â∑±ÁöÑ-promise"><a href="#8-4-Ê†πÊçÆ-promiseA-ÂÆûÁé∞‰∏Ä‰∏™Ëá™Â∑±ÁöÑ-promise" class="headerlink" title="8.4 Ê†πÊçÆ promiseA+ÂÆûÁé∞‰∏Ä‰∏™Ëá™Â∑±ÁöÑ promise"></a>8.4 Ê†πÊçÆ promiseA+ÂÆûÁé∞‰∏Ä‰∏™Ëá™Â∑±ÁöÑ promise</h5><p>ËØ¥ÁúüÁöÑÔºåËøôÈÅìÈ¢òË¢´ÈóÆÂà∞ÁöÑÊ¶ÇÁéáËøòÊòØÊå∫È´òÁöÑÔºåËÄå‰∏îË¶ÅËØ¥ÁöÑÂÜÖÂÆπ‰πüÂæàÂ§ö‚Ä¶<br>ÈúñÂëÜÂëÜËøôÈáåÂÅ∑‰∏™ÊáíÔºå‰∏çÊÉ≥ÁªÜËØ¥‰∫Ü‚Ä¶<br>‰∏çËøáÂìàÔºåÊàë‰øùËØÅÔºå‰∏ã‰∏ãÈ¢òÊàë‰∏ÄÂÆö‰ªîÁªÜËØ¥ üòº.</p>
<p>Êù•ÂêßÔºåÁªô‰Ω†‰ª¨‰∏Ä‰∫õÂ•ΩÁöÑÂÆùÂÖ∏Ôºö<br>„ÄäPromise ‰∏ç‰ºöÔºüÔºüÁúãËøôÈáåÔºÅÔºÅÔºÅÂè≤‰∏äÊúÄÈÄö‰øóÊòìÊáÇÁöÑ PromiseÔºÅÔºÅÔºÅ„Äã<br>„ÄäÂÜô‰∏Ä‰∏™Á¨¶Âêà Promises&#x2F;A+ ËßÑËåÉÂπ∂ÂèØÈÖçÂêà ES7 async&#x2F;await ‰ΩøÁî®ÁöÑ Promise„Äã</p>
<h5 id="8-5-Â∞ÅË£Ö‰∏Ä‰∏™ÂºÇÊ≠•Âä†ËΩΩÂõæÁâáÁöÑÊñπÊ≥ï"><a href="#8-5-Â∞ÅË£Ö‰∏Ä‰∏™ÂºÇÊ≠•Âä†ËΩΩÂõæÁâáÁöÑÊñπÊ≥ï" class="headerlink" title="8.5 Â∞ÅË£Ö‰∏Ä‰∏™ÂºÇÊ≠•Âä†ËΩΩÂõæÁâáÁöÑÊñπÊ≥ï"></a>8.5 Â∞ÅË£Ö‰∏Ä‰∏™ÂºÇÊ≠•Âä†ËΩΩÂõæÁâáÁöÑÊñπÊ≥ï</h5><p>Ëøô‰∏™Áõ∏ÂØπÁÆÄÂçï‰∏Ä‰∫õÔºåÂè™ÈúÄË¶ÅÂú®ÂõæÁâáÁöÑ onload ÂáΩÊï∞‰∏≠Ôºå‰ΩøÁî® resolve ËøîÂõû‰∏Ä‰∏ãÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ</p>
<p>Êù•ÁúãÁúãÂÖ∑‰Ωì‰ª£Á†ÅÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">loadImg</span>(<span class="params">url</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>();</span><br><span class="line">    img.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;‰∏ÄÂº†ÂõæÁâáÂä†ËΩΩÂÆåÊàê&quot;</span>);</span><br><span class="line">      <span class="title function_">resolve</span>(img);</span><br><span class="line">    &#125;;</span><br><span class="line">    img.<span class="property">onerror</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Could not load image at&#x27;</span> + url));</span><br><span class="line">    &#125;;</span><br><span class="line">    img.<span class="property">src</span> = url;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h5 id="8-6-ÈôêÂà∂ÂºÇÊ≠•Êìç‰ΩúÁöÑÂπ∂Âèë‰∏™Êï∞Âπ∂Â∞ΩÂèØËÉΩÂø´ÁöÑÂÆåÊàêÂÖ®ÈÉ®"><a href="#8-6-ÈôêÂà∂ÂºÇÊ≠•Êìç‰ΩúÁöÑÂπ∂Âèë‰∏™Êï∞Âπ∂Â∞ΩÂèØËÉΩÂø´ÁöÑÂÆåÊàêÂÖ®ÈÉ®" class="headerlink" title="8.6 ÈôêÂà∂ÂºÇÊ≠•Êìç‰ΩúÁöÑÂπ∂Âèë‰∏™Êï∞Âπ∂Â∞ΩÂèØËÉΩÂø´ÁöÑÂÆåÊàêÂÖ®ÈÉ®"></a>8.6 ÈôêÂà∂ÂºÇÊ≠•Êìç‰ΩúÁöÑÂπ∂Âèë‰∏™Êï∞Âπ∂Â∞ΩÂèØËÉΩÂø´ÁöÑÂÆåÊàêÂÖ®ÈÉ®</h5><p>Êúâ 8 ‰∏™ÂõæÁâáËµÑÊ∫êÁöÑ urlÔºåÂ∑≤ÁªèÂ≠òÂÇ®Âú®Êï∞ÁªÑ urls ‰∏≠„ÄÇ</p>
<p>urls Á±ª‰ºº‰∫é[‚Äò<a href="https://image1.png/">https://image1.png</a>‚Äò, ‚Äò<a href="https://image2.png/">https://image2.png</a>‚Äò, ‚Ä¶.]</p>
<p>ËÄå‰∏îÂ∑≤ÁªèÊúâ‰∏Ä‰∏™ÂáΩÊï∞ function loadImgÔºåËæìÂÖ•‰∏Ä‰∏™ url ÈìæÊé•ÔºåËøîÂõû‰∏Ä‰∏™ PromiseÔºåËØ• Promise Âú®ÂõæÁâá‰∏ãËΩΩÂÆåÊàêÁöÑÊó∂ÂÄô resolveÔºå‰∏ãËΩΩÂ§±Ë¥•Âàô reject„ÄÇ</p>
<p>‰ΩÜÊúâ‰∏Ä‰∏™Ë¶ÅÊ±ÇÔºå‰ªª‰ΩïÊó∂ÂàªÂêåÊó∂‰∏ãËΩΩÁöÑÈìæÊé•Êï∞Èáè‰∏çÂèØ‰ª•Ë∂ÖËøá 3 ‰∏™„ÄÇ</p>
<p>ËØ∑ÂÜô‰∏ÄÊÆµ‰ª£Á†ÅÂÆûÁé∞Ëøô‰∏™ÈúÄÊ±ÇÔºåË¶ÅÊ±ÇÂ∞ΩÂèØËÉΩÂø´ÈÄüÂú∞Â∞ÜÊâÄÊúâÂõæÁâá‰∏ãËΩΩÂÆåÊàê„ÄÇ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> urls = [</span><br><span class="line">  <span class="string">&quot;https://hexo-blog-1256114407.cos.ap-shenzhen-fsi.myqcloud.com/AboutMe-painting1.png&quot;</span>,</span><br><span class="line">  <span class="string">&quot;https://hexo-blog-1256114407.cos.ap-shenzhen-fsi.myqcloud.com/AboutMe-painting2.png&quot;</span>,</span><br><span class="line">  <span class="string">&quot;https://hexo-blog-1256114407.cos.ap-shenzhen-fsi.myqcloud.com/AboutMe-painting3.png&quot;</span>,</span><br><span class="line">  <span class="string">&quot;https://hexo-blog-1256114407.cos.ap-shenzhen-fsi.myqcloud.com/AboutMe-painting4.png&quot;</span>,</span><br><span class="line">  <span class="string">&quot;https://hexo-blog-1256114407.cos.ap-shenzhen-fsi.myqcloud.com/AboutMe-painting5.png&quot;</span>,</span><br><span class="line">  <span class="string">&quot;https://hexo-blog-1256114407.cos.ap-shenzhen-fsi.myqcloud.com/bpmn6.png&quot;</span>,</span><br><span class="line">  <span class="string">&quot;https://hexo-blog-1256114407.cos.ap-shenzhen-fsi.myqcloud.com/bpmn7.png&quot;</span>,</span><br><span class="line">  <span class="string">&quot;https://hexo-blog-1256114407.cos.ap-shenzhen-fsi.myqcloud.com/bpmn8.png&quot;</span>,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">loadImg</span>(<span class="params">url</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>();</span><br><span class="line">    img.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;‰∏ÄÂº†ÂõæÁâáÂä†ËΩΩÂÆåÊàê&quot;</span>);</span><br><span class="line">      <span class="title function_">resolve</span>(img);</span><br><span class="line">    &#125;;</span><br><span class="line">    img.<span class="property">onerror</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">reject</span>(<span class="title function_">newError</span>(<span class="string">&quot;Could not load image at&quot;</span> + url));</span><br><span class="line">    &#125;;</span><br><span class="line">    img.<span class="property">src</span> = url;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÁúãÂà∞ËøôÈÅìÈ¢òÊó∂ÔºåÊàëÊúÄÂºÄÂßãÁöÑÊÉ≥Ê≥ïÊòØÔºö</p>
<p>ÊãøÂà∞ urlsÔºåÁÑ∂ÂêéÂ∞ÜËøô‰∏™Êï∞ÁªÑÊØè 3 ‰∏™ url ‰∏ÄÁªÑÂàõÂª∫Êàê‰∏Ä‰∏™‰∫åÁª¥Êï∞ÁªÑ<br>ÁÑ∂ÂêéÁî® Promise.all()ÊØèÊ¨°Âä†ËΩΩ‰∏ÄÁªÑ urlÔºà‰πüÂ∞±ÊòØÂπ∂Âèë 3 ‰∏™ÔºâÔºåËøô‰∏ÄÁªÑÂä†ËΩΩÂÆåÂÜçÂä†ËΩΩ‰∏ã‰∏ÄÁªÑ„ÄÇ<br>Ëøô‰∏™ÊÉ≥Ê≥ï‰ªéÊäÄÊúØ‰∏äËØ¥Âπ∂‰∏çÈöæÂÆûÁé∞ÔºåÊúâÁÇπÁ±ª‰ºº‰∫éÁ¨¨‰∏âÈ¢ò„ÄÇ‰∏çËøáÁº∫ÁÇπ‰πüÊòéÊòæÔºåÈÇ£Â∞±ÊòØÊØèÊ¨°ÈÉΩË¶ÅÁ≠âÂà∞‰∏ä‰∏ÄÁªÑÂÖ®ÈÉ®Âä†ËΩΩÂÆå‰πãÂêéÔºåÊâçÂä†ËΩΩ‰∏ã‰∏ÄÁªÑÔºåÈÇ£Â¶ÇÊûú‰∏ä‰∏ÄÁªÑÊúâ 2 ‰∏™Â∑≤ÁªèÂä†ËΩΩÂÆå‰∫ÜÔºåËøòÊúâ 1 ‰∏™ÁâπÂà´ÊÖ¢ÔºåËøòÂú®Âä†ËΩΩÔºåË¶ÅÁ≠âËøô‰∏™ÊÖ¢ÁöÑ‰πüÂä†ËΩΩÂÆåÊâçËÉΩËøõÂÖ•‰∏ã‰∏ÄÁªÑ„ÄÇËøôÊòéÊòæ‰ºöÁÖßÂ∏∏Âç°È°øÔºåÂΩ±ÂìçÂä†ËΩΩÊïàÁéá„ÄÇ</p>
<p>‰ΩÜÊòØÂºÄÂßãÊ≤°ÊúâËÄÉËôëËøô‰πàÂ§öÔºåÂõ†Ê≠§Êúâ‰∫ÜÁ¨¨‰∏Ä‰∏™ÁâàÊú¨„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†ÊúâÂÖ¥Ë∂£ÂèØ‰ª•ÁúãÁúãÊÉ≥Ê≥ï‰∏ÄÁöÑ‰ª£Á†ÅÔºåËôΩÁÑ∂ÂØπ‰Ω†Ê≤°‰ªÄ‰πàÂ∏ÆÂä©ÔºåÊÉ≥Áõ¥Êé•Áü•ÈÅìÊØîËæÉÂ•ΩÁöÑÂÅöÊ≥ïÁöÑÂ∞è‰ºô‰º¥ËØ∑Ë∑≥Âà∞ÊÉ≥Ê≥ï‰∫å</p>
<h6 id="ÊÉ≥Ê≥ï‰∏Ä-üí°Ôºö"><a href="#ÊÉ≥Ê≥ï‰∏Ä-üí°Ôºö" class="headerlink" title="ÊÉ≥Ê≥ï‰∏Ä üí°Ôºö"></a>ÊÉ≥Ê≥ï‰∏Ä üí°Ôºö</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">limitLoad</span>(<span class="params">urls, handler, limit</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> data = []; <span class="comment">// Â≠òÂÇ®ÊâÄÊúâÁöÑÂä†ËΩΩÁªìÊûú</span></span><br><span class="line">  <span class="keyword">let</span> p = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>();</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleUrls</span> = (<span class="params">urls</span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// Ëøô‰∏™ÂáΩÊï∞ÊòØ‰∏∫‰∫ÜÁîüÊàê3‰∏™url‰∏∫‰∏ÄÁªÑÁöÑ‰∫åÁª¥Êï∞ÁªÑ</span></span><br><span class="line">    <span class="keyword">const</span> doubleDim = [];</span><br><span class="line">    <span class="keyword">const</span> len = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(urls.<span class="property">length</span> / limit); <span class="comment">// Math.ceil(8 / 3) = 3</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(len); <span class="comment">// 3, Ë°®Á§∫‰∫åÁª¥Êï∞ÁªÑÁöÑÈïøÂ∫¶‰∏∫3</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">      doubleDim.<span class="title function_">push</span>(urls.<span class="title function_">slice</span>(i * limit, (i + <span class="number">1</span>) * limit));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> doubleDim;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">ajaxImage</span> = (<span class="params">urlCollect</span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// Â∞Ü‰∏ÄÁªÑÂ≠óÁ¨¶‰∏≤url ËΩ¨Êç¢‰∏∫‰∏Ä‰∏™Âä†ËΩΩÂõæÁâáÁöÑÊï∞ÁªÑ</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(urlCollect);</span><br><span class="line">    <span class="keyword">return</span> urlCollect.<span class="title function_">map</span>(<span class="function">(<span class="params">url</span>) =&gt;</span> <span class="title function_">handler</span>(url));</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> doubleDim = <span class="title function_">handleUrls</span>(urls); <span class="comment">// ÂæóÂà∞3‰∏™url‰∏∫‰∏ÄÁªÑÁöÑ‰∫åÁª¥Êï∞ÁªÑ</span></span><br><span class="line">  doubleDim.<span class="title function_">forEach</span>(<span class="function">(<span class="params">urlCollect</span>) =&gt;</span> &#123;</span><br><span class="line">    p = p</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>(<span class="title function_">ajaxImage</span>(urlCollect)))</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        data.<span class="title function_">push</span>(...res); <span class="comment">// Â∞ÜÊØèÊ¨°ÁöÑÁªìÊûúÂ±ïÂºÄÔºåÂπ∂Â≠òÂÇ®Âà∞data‰∏≠ (res‰∏∫Ôºö[img, img, img])</span></span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">limitLoad</span>(urls, loadImg, <span class="number">3</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res); <span class="comment">// ÊúÄÁªàÂæóÂà∞ÁöÑÊòØÈïøÂ∫¶‰∏∫8ÁöÑimgÊï∞ÁªÑ: [img, img, img, ...]</span></span><br><span class="line">  res.<span class="title function_">forEach</span>(<span class="function">(<span class="params">img</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(img);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h6 id="ÊÉ≥Ê≥ï‰∫å-üí°"><a href="#ÊÉ≥Ê≥ï‰∫å-üí°" class="headerlink" title="ÊÉ≥Ê≥ï‰∫å üí°:"></a>ÊÉ≥Ê≥ï‰∫å üí°:</h6><p>ÂèÇËÄÉ LHH Â§ßÁø∞‰ªî‰ªî-Promise Èù¢ËØïÈ¢ò</p>
<p>Êó¢ÁÑ∂È¢òÁõÆÁöÑË¶ÅÊ±ÇÊòØ‰øùËØÅÊØèÊ¨°Âπ∂ÂèëËØ∑Ê±ÇÁöÑÊï∞Èáè‰∏∫ 3ÔºåÈÇ£‰πàÊàë‰ª¨ÂèØ‰ª•ÂÖàËØ∑Ê±Ç urls ‰∏≠ÁöÑÂâçÈù¢‰∏â‰∏™(‰∏ãÊ†á‰∏∫ 0,1,2)ÔºåÂπ∂‰∏îËØ∑Ê±ÇÁöÑÊó∂ÂÄô‰ΩøÁî® Promise.race()Êù•ÂêåÊó∂ËØ∑Ê±ÇÔºå‰∏â‰∏™‰∏≠Êúâ‰∏Ä‰∏™ÂÖàÂÆåÊàê‰∫Ü(‰æãÂ¶Ç‰∏ãÊ†á‰∏∫ 1 ÁöÑÂõæÁâá)ÔºåÊàë‰ª¨Â∞±ÊääËøô‰∏™ÂΩìÂâçÊï∞ÁªÑ‰∏≠Â∑≤ÁªèÂÆåÊàêÁöÑÈÇ£‰∏ÄÈ°π(Á¨¨ 1 È°π)Êç¢ÊàêËøòÊ≤°ÊúâËØ∑Ê±ÇÁöÑÈÇ£‰∏ÄÈ°π(urls ‰∏≠‰∏ãÊ†á‰∏∫ 3)„ÄÇ</p>
<p>Áõ¥Âà∞ urls Â∑≤ÁªèÈÅçÂéÜÂÆå‰∫ÜÔºåÁÑ∂ÂêéÂ∞ÜÊúÄÂêé‰∏â‰∏™Ê≤°ÊúâÂÆåÊàêÁöÑËØ∑Ê±Ç(‰πüÂ∞±ÊòØÁä∂ÊÄÅÊ≤°ÊúâÊîπÂèòÁöÑ Promise)Áî® Promise.all()Êù•Âä†ËΩΩÂÆÉ‰ª¨„ÄÇ</p>
<p>‰∏çÂ§öËØ¥ÔºåÊµÅÁ®ãÂõæÈÉΩÁªô‰Ω†ÁîªÂ•Ω‰∫ÜÔºå‰Ω†ÂèØ‰ª•ÁªìÂêàÊµÅÁ®ãÂõæÂÜçÊù•Áúã‰ª£Á†Å„ÄÇ</p>
<p><img src="https://www.daykalif.com/blog_img/promise2.png" alt="promise"></p>
<p>‰∏∫‰∫ÜÊñπ‰æø‰Ω†Êü•ÁúãÔºåÊàëÊà™‰∫Ü‰∏™ÂõæÔºå‰∏çËøá‰ª£Á†ÅÂú®ÂêéÈù¢‰πüÊúâ</p>
<p>(ËØ¥ÁúüÁöÑÔºåË¶ÅÊàëÁúãËøô‰∏ÄÂ§ßÈïø‰∏≤‰ª£Á†ÅÊàë‰πü‰∏çÊÑøÊÑè‚Ä¶)</p>
<p><img src="https://www.daykalif.com/blog_img/promise3.png" alt="promise"></p>
<p>‰ª£Á†ÅÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">limitLoad</span>(<span class="params">urls, handler, limit</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> sequence = [].<span class="title function_">concat</span>(urls); <span class="comment">// Â§çÂà∂urls</span></span><br><span class="line">  <span class="comment">// Ëøô‰∏ÄÊ≠•ÊòØ‰∏∫‰∫ÜÂàùÂßãÂåñ promises Ëøô‰∏™&quot;ÂÆπÂô®&quot;</span></span><br><span class="line">  <span class="keyword">let</span> promises = sequence.<span class="title function_">splice</span>(<span class="number">0</span>, limit).<span class="title function_">map</span>(<span class="function">(<span class="params">url, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">handler</span>(url).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// ËøîÂõû‰∏ãÊ†áÊòØ‰∏∫‰∫ÜÁü•ÈÅìÊï∞ÁªÑ‰∏≠ÊòØÂì™‰∏ÄÈ°πÊúÄÂÖàÂÆåÊàê</span></span><br><span class="line">      <span class="keyword">return</span> index;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// Ê≥®ÊÑèËøôÈáåË¶ÅÂ∞ÜÊï¥‰∏™ÂèòÈáèËøáÁ®ãËøîÂõûÔºåËøôÊ†∑ÂæóÂà∞ÁöÑÂ∞±ÊòØ‰∏Ä‰∏™PromiseÔºåÂèØ‰ª•Âú®Â§ñÈù¢ÈìæÂºèË∞ÉÁî®</span></span><br><span class="line">  <span class="keyword">return</span> sequence</span><br><span class="line">    .<span class="title function_">reduce</span>(<span class="function">(<span class="params">pCollect, url</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> pCollect</span><br><span class="line">        .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">race</span>(promises); <span class="comment">// ËøîÂõûÂ∑≤ÁªèÂÆåÊàêÁöÑ‰∏ãÊ†á</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">then</span>(<span class="function">(<span class="params">fastestIndex</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// Ëé∑ÂèñÂà∞Â∑≤ÁªèÂÆåÊàêÁöÑ‰∏ãÊ†á</span></span><br><span class="line">          <span class="comment">// Â∞Ü&quot;ÂÆπÂô®&quot;ÂÜÖÂ∑≤ÁªèÂÆåÊàêÁöÑÈÇ£‰∏ÄÈ°πÊõøÊç¢</span></span><br><span class="line">          promises[fastestIndex] = <span class="title function_">handler</span>(url).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> fastestIndex; <span class="comment">// Ë¶ÅÁªßÁª≠Â∞ÜËøô‰∏™‰∏ãÊ†áËøîÂõûÔºå‰ª•‰æø‰∏ã‰∏ÄÊ¨°ÂèòÈáè</span></span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">error</span>(err);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;, <span class="title class_">Promise</span>.<span class="title function_">resolve</span>()) <span class="comment">// ÂàùÂßãÂåñ‰º†ÂÖ•</span></span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// ÊúÄÂêé‰∏â‰∏™Áî®.allÊù•Ë∞ÉÁî®</span></span><br><span class="line">      returnPromise.<span class="title function_">all</span>(promises);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">limitLoad</span>(urls, loadImg, <span class="number">3</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ÂõæÁâáÂÖ®ÈÉ®Âä†ËΩΩÂÆåÊØï&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(err);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>ÂèÇËÄÉÊñáÊ°£Ôºö<br>„ÄäES6 ‰πã Promise Â∏∏ËßÅÈù¢ËØïÈ¢ò„Äã<br>„ÄäÂ¶Ç‰ΩïËÆ©ÂºÇÊ≠•Êìç‰ΩúÈ°∫Â∫èÊâßË°å„Äã<br>„ÄäÂ§ßÁôΩËØùËÆ≤Ëß£ PromiseÔºà‰∏ÄÔºâ<br>„ÄäLHH Â§ßÁø∞‰ªî‰ªî-Promise Èù¢ËØïÈ¢ò„Äã<br>„Ää‰ªäÊó•Â§¥Êù° async&#x2F;await Èù¢ËØïÈ¢òÊâßË°åÈ°∫Â∫è„Äã<br>„Ää(2.4w Â≠ó,Âª∫ËÆÆÊî∂Ëóè)üòá ÂéüÁîü JS ÁÅµÈ≠Ç‰πãÈóÆ(‰∏ã), ÂÜ≤Âà∫ üöÄ ËøõÈò∂ÊúÄÂêé‰∏ÄÂÖ¨Èáå(ÈôÑ‰∏™‰∫∫ÊàêÈïøÁªèÈ™åÂàÜ‰∫´)„Äã</p>
<p>ËΩ¨ËΩΩÊñáÊ°£Ôºö<br><a href="https://mp.weixin.qq.com/s/Y-DCZHpEI0g2K8n5vvBcAw">https://mp.weixin.qq.com/s/Y-DCZHpEI0g2K8n5vvBcAw</a></p>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>ÂùöÊåÅÂéüÂàõÊäÄÊúØÂàÜ‰∫´ÔºåÊÇ®ÁöÑÊîØÊåÅÈºìÂä±ÊàëÁªßÁª≠Âàõ‰Ωú</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>Donate</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/WechatPay.png" alt=" WeChat Pay"/>
        <p>WeChat Pay</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/AliPay.jpg" alt=" Alipay"/>
        <p>Alipay</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag"># ÂâçÁ´Ø</a>
          
            <a href="/tags/js/" rel="tag"># js</a>
          
            <a href="/tags/%E5%BC%82%E6%AD%A5/" rel="tag"># ÂºÇÊ≠•</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/11/18/webpack%E5%AD%A6%E4%B9%A0/Webpack%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA/" rel="next" title="WebpackÊ∑±ÂÖ•ÊµÖÂá∫">
                <i class="fa fa-chevron-left"></i> WebpackÊ∑±ÂÖ•ÊµÖÂá∫
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/11/27/%E6%89%A9%E5%B1%95%E7%9F%A5%E8%AF%86/Hexo%E9%94%99%E8%AF%AF%E2%80%9Dexpected-end-of-comment-got-end-of-file%E2%80%9D/" rel="prev" title="HexoÈîôËØØ‚Äùexpected end of comment, got end of file‚Äù">
                HexoÈîôËØØ‚Äùexpected end of comment, got end of file‚Äù <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">115</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">34</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/daykalif" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:r00t_daykalif@aliyun.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.daykalif.com/" title="Daykalif" target="_blank">Daykalif</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Promise-%E7%9A%84%E5%87%A0%E9%81%93%E5%9F%BA%E7%A1%80%E9%A2%98"><span class="nav-number">1.</span> <span class="nav-text">1. Promise ÁöÑÂá†ÈÅìÂü∫Á°ÄÈ¢ò</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-1-%E9%A2%98%E7%9B%AE%E4%B8%80"><span class="nav-number">1.1.</span> <span class="nav-text">1.1 È¢òÁõÆ‰∏Ä</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#1-2-%E9%A2%98%E7%9B%AE%E4%BA%8C"><span class="nav-number">1.2.</span> <span class="nav-text">1.2 È¢òÁõÆ‰∫å</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#1-3-%E9%A2%98%E7%9B%AE%E4%B8%89"><span class="nav-number">1.3.</span> <span class="nav-text">1.3 È¢òÁõÆ‰∏â</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#1-4-%E9%A2%98%E7%9B%AE%E5%9B%9B"><span class="nav-number">1.4.</span> <span class="nav-text">1.4 È¢òÁõÆÂõõ</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#1-5-%E9%A2%98%E7%9B%AE%E4%BA%94"><span class="nav-number">1.5.</span> <span class="nav-text">1.5 È¢òÁõÆ‰∫î</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#1-6-%E9%A2%98%E7%9B%AE%E5%85%AD"><span class="nav-number">1.6.</span> <span class="nav-text">1.6 È¢òÁõÆÂÖ≠</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Promise-%E7%BB%93%E5%90%88-setTimeout"><span class="nav-number">2.</span> <span class="nav-text">2. Promise ÁªìÂêà setTimeout</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#2-1-%E9%A2%98%E7%9B%AE%E4%B8%80"><span class="nav-number">2.1.</span> <span class="nav-text">2.1 È¢òÁõÆ‰∏Ä</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-2-%E9%A2%98%E7%9B%AE%E4%BA%8C"><span class="nav-number">2.2.</span> <span class="nav-text">2.2 È¢òÁõÆ‰∫å</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-3-%E9%A2%98%E7%9B%AE%E4%B8%89"><span class="nav-number">2.3.</span> <span class="nav-text">2.3 È¢òÁõÆ‰∏â</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1"><span class="nav-number">2.3.1.</span> <span class="nav-text">(1)</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2"><span class="nav-number">2.3.2.</span> <span class="nav-text">(2)</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-4-%E9%A2%98%E7%9B%AE%E5%9B%9B"><span class="nav-number">2.4.</span> <span class="nav-text">2.4 È¢òÁõÆÂõõ</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-5-%E9%A2%98%E7%9B%AE%E4%BA%94"><span class="nav-number">2.5.</span> <span class="nav-text">2.5 È¢òÁõÆ‰∫î</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-6-%E9%A2%98%E7%9B%AE%E5%85%AD"><span class="nav-number">2.6.</span> <span class="nav-text">2.6 È¢òÁõÆÂÖ≠</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-Promise-%E4%B8%AD%E7%9A%84-then%E3%80%81catch%E3%80%81finally"><span class="nav-number">3.</span> <span class="nav-text">3. Promise ‰∏≠ÁöÑ then„ÄÅcatch„ÄÅfinally</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#3-1-%E9%A2%98%E7%9B%AE%E4%B8%80"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 È¢òÁõÆ‰∏Ä</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-2-%E9%A2%98%E7%9B%AE%E4%BA%8C"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 È¢òÁõÆ‰∫å</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-3-%E9%A2%98%E7%9B%AE%E4%B8%89"><span class="nav-number">3.3.</span> <span class="nav-text">3.3 È¢òÁõÆ‰∏â</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-4-%E9%A2%98%E7%9B%AE%E5%9B%9B"><span class="nav-number">3.4.</span> <span class="nav-text">3.4 È¢òÁõÆÂõõ</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-5-%E9%A2%98%E7%9B%AE%E4%BA%94"><span class="nav-number">3.5.</span> <span class="nav-text">3.5 È¢òÁõÆ‰∫î</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-6-%E9%A2%98%E7%9B%AE%E5%85%AD"><span class="nav-number">3.6.</span> <span class="nav-text">3.6 È¢òÁõÆÂÖ≠</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-7-%E9%A2%98%E7%9B%AE%E4%B8%83"><span class="nav-number">3.7.</span> <span class="nav-text">3.7 È¢òÁõÆ‰∏É</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-8-%E9%A2%98%E7%9B%AE%E5%85%AB"><span class="nav-number">3.8.</span> <span class="nav-text">3.8 È¢òÁõÆÂÖ´</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-9-%E9%A2%98%E7%9B%AE%E4%B9%9D"><span class="nav-number">3.9.</span> <span class="nav-text">3.9 È¢òÁõÆ‰πù</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#a"><span class="nav-number">3.9.1.</span> <span class="nav-text">(a)</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#b"><span class="nav-number">3.9.2.</span> <span class="nav-text">(b)</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#c"><span class="nav-number">3.9.3.</span> <span class="nav-text">(c)</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-10-%E9%A2%98%E7%9B%AE%E5%8D%81"><span class="nav-number">3.10.</span> <span class="nav-text">3.10 È¢òÁõÆÂçÅ</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-Promise-%E4%B8%AD%E7%9A%84-all-%E5%92%8C-race"><span class="nav-number">4.</span> <span class="nav-text">4. Promise ‰∏≠ÁöÑ all Âíå race</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#4-1-%E9%A2%98%E7%9B%AE%E4%B8%80"><span class="nav-number">4.1.</span> <span class="nav-text">4.1 È¢òÁõÆ‰∏Ä</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-2-%E9%A2%98%E7%9B%AE%E4%BA%8C"><span class="nav-number">4.2.</span> <span class="nav-text">4.2 È¢òÁõÆ‰∫å</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-3-%E9%A2%98%E7%9B%AE%E4%B8%89"><span class="nav-number">4.3.</span> <span class="nav-text">4.3 È¢òÁõÆ‰∏â</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-4-%E9%A2%98%E7%9B%AE%E5%9B%9B"><span class="nav-number">4.4.</span> <span class="nav-text">4.4 È¢òÁõÆÂõõ</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-async-await-%E7%9A%84%E5%87%A0%E9%81%93%E9%A2%98"><span class="nav-number">5.</span> <span class="nav-text">5. async&#x2F;await ÁöÑÂá†ÈÅìÈ¢ò</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#5-1-%E9%A2%98%E7%9B%AE%E4%B8%80"><span class="nav-number">5.1.</span> <span class="nav-text">5.1 È¢òÁõÆ‰∏Ä</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-2-%E9%A2%98%E7%9B%AE%E4%BA%8C"><span class="nav-number">5.2.</span> <span class="nav-text">5.2 È¢òÁõÆ‰∫å</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-3-%E9%A2%98%E7%9B%AE%E4%B8%89"><span class="nav-number">5.3.</span> <span class="nav-text">5.3 È¢òÁõÆ‰∏â</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-4-%E9%A2%98%E7%9B%AE%E5%9B%9B"><span class="nav-number">5.4.</span> <span class="nav-text">5.4 È¢òÁõÆÂõõ</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-5-%E9%A2%98%E7%9B%AE%E4%BA%94"><span class="nav-number">5.5.</span> <span class="nav-text">5.5 È¢òÁõÆ‰∫î</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-6-%E9%A2%98%E7%9B%AE%E5%85%AD"><span class="nav-number">5.6.</span> <span class="nav-text">5.6 È¢òÁõÆÂÖ≠</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-7-%E9%A2%98%E7%9B%AE%E4%B8%83"><span class="nav-number">5.7.</span> <span class="nav-text">5.7 È¢òÁõÆ‰∏É</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-8-%E9%A2%98%E7%9B%AE%E5%85%AB"><span class="nav-number">5.8.</span> <span class="nav-text">5.8 È¢òÁõÆÂÖ´</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-9-%E9%A2%98%E7%9B%AE%E4%B9%9D"><span class="nav-number">5.9.</span> <span class="nav-text">5.9 È¢òÁõÆ‰πù</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-async-%E5%A4%84%E7%90%86%E9%94%99%E8%AF%AF"><span class="nav-number">6.</span> <span class="nav-text">6. async Â§ÑÁêÜÈîôËØØ</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#6-1-%E9%A2%98%E7%9B%AE%E4%B8%80"><span class="nav-number">6.1.</span> <span class="nav-text">6.1 È¢òÁõÆ‰∏Ä</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6-2-%E9%A2%98%E7%9B%AE%E4%BA%8C"><span class="nav-number">6.2.</span> <span class="nav-text">6.2 È¢òÁõÆ‰∫å</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-%E7%BB%BC%E5%90%88%E9%A2%98"><span class="nav-number">7.</span> <span class="nav-text">7. ÁªºÂêàÈ¢ò</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#7-1-%E9%A2%98%E7%9B%AE%E4%B8%80"><span class="nav-number">7.1.</span> <span class="nav-text">7.1 È¢òÁõÆ‰∏Ä</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-2-%E9%A2%98%E7%9B%AE%E4%BA%8C"><span class="nav-number">7.2.</span> <span class="nav-text">7.2 È¢òÁõÆ‰∫å</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#A"><span class="nav-number">7.2.1.</span> <span class="nav-text">A</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#B"><span class="nav-number">7.2.2.</span> <span class="nav-text">B</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-3-%E9%A2%98%E7%9B%AE%E4%B8%89"><span class="nav-number">7.3.</span> <span class="nav-text">7.3 È¢òÁõÆ‰∏â</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-%E5%87%A0%E9%81%93%E5%A4%A7%E5%8E%82%E7%9A%84%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="nav-number">8.</span> <span class="nav-text">8. Âá†ÈÅìÂ§ßÂéÇÁöÑÈù¢ËØïÈ¢ò</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#8-1-%E4%BD%BF%E7%94%A8-Promise-%E5%AE%9E%E7%8E%B0%E6%AF%8F%E9%9A%94-1-%E7%A7%92%E8%BE%93%E5%87%BA-1-2-3"><span class="nav-number">8.1.</span> <span class="nav-text">8.1 ‰ΩøÁî® Promise ÂÆûÁé∞ÊØèÈöî 1 ÁßíËæìÂá∫ 1,2,3</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8-2-%E4%BD%BF%E7%94%A8-Promise-%E5%AE%9E%E7%8E%B0%E7%BA%A2%E7%BB%BF%E7%81%AF%E4%BA%A4%E6%9B%BF%E9%87%8D%E5%A4%8D%E4%BA%AE"><span class="nav-number">8.2.</span> <span class="nav-text">8.2 ‰ΩøÁî® Promise ÂÆûÁé∞Á∫¢ÁªøÁÅØ‰∫§ÊõøÈáçÂ§ç‰∫Æ</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8-3-%E5%AE%9E%E7%8E%B0-mergePromise-%E5%87%BD%E6%95%B0"><span class="nav-number">8.3.</span> <span class="nav-text">8.3 ÂÆûÁé∞ mergePromise ÂáΩÊï∞</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8-4-%E6%A0%B9%E6%8D%AE-promiseA-%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E8%87%AA%E5%B7%B1%E7%9A%84-promise"><span class="nav-number">8.4.</span> <span class="nav-text">8.4 Ê†πÊçÆ promiseA+ÂÆûÁé∞‰∏Ä‰∏™Ëá™Â∑±ÁöÑ promise</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8-5-%E5%B0%81%E8%A3%85%E4%B8%80%E4%B8%AA%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD%E5%9B%BE%E7%89%87%E7%9A%84%E6%96%B9%E6%B3%95"><span class="nav-number">8.5.</span> <span class="nav-text">8.5 Â∞ÅË£Ö‰∏Ä‰∏™ÂºÇÊ≠•Âä†ËΩΩÂõæÁâáÁöÑÊñπÊ≥ï</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8-6-%E9%99%90%E5%88%B6%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C%E7%9A%84%E5%B9%B6%E5%8F%91%E4%B8%AA%E6%95%B0%E5%B9%B6%E5%B0%BD%E5%8F%AF%E8%83%BD%E5%BF%AB%E7%9A%84%E5%AE%8C%E6%88%90%E5%85%A8%E9%83%A8"><span class="nav-number">8.6.</span> <span class="nav-text">8.6 ÈôêÂà∂ÂºÇÊ≠•Êìç‰ΩúÁöÑÂπ∂Âèë‰∏™Êï∞Âπ∂Â∞ΩÂèØËÉΩÂø´ÁöÑÂÆåÊàêÂÖ®ÈÉ®</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%83%B3%E6%B3%95%E4%B8%80-%F0%9F%92%A1%EF%BC%9A"><span class="nav-number">8.6.1.</span> <span class="nav-text">ÊÉ≥Ê≥ï‰∏Ä üí°Ôºö</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%83%B3%E6%B3%95%E4%BA%8C-%F0%9F%92%A1"><span class="nav-number">8.6.2.</span> <span class="nav-text">ÊÉ≥Ê≥ï‰∫å üí°:</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2019 &mdash; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-snowflake-o"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">r00t_daykalif</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">290.7k</span>
  
</div>






<div style="width:300px;margin:0 auto; padding:20px 0;">
	<a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010902002156" style="display:inline-block;text-decoration:none;height:20px;line-height:20px;">
    <img src="https://www.daykalif.com/beian.png" style="float:left;"/>
    <p style="float:left;height:20px;line-height:20px;margin: 0px 0px 0px 5px; color:#939393;">
    ÊµôÂÖ¨ÁΩëÂÆâÂ§á 33010902002156Âè∑
    </p>
  </a>
</div>






        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'NXoB8ypSoELq08t7Y4t4Y7Co-gzGzoHsz',
        appKey: 'q00Ulu1a5iQSaM6XV0ba4QeF',
        placeholder: '„ÉæÔæâ‚âß‚àÄ‚â¶)oÊù•ÂïäÔºåÂø´Ê¥ªÂïä!',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("NXoB8ypSoELq08t7Y4t4Y7Co-gzGzoHsz", "q00Ulu1a5iQSaM6XV0ba4QeF");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

</body>
</html>
