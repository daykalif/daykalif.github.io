<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="stay hungry,stay foolish.">
<meta property="og:type" content="website">
<meta property="og:title" content="Daykalif">
<meta property="og:url" content="https://daykalif.github.io/index.html">
<meta property="og:site_name" content="Daykalif">
<meta property="og:description" content="stay hungry,stay foolish.">
<meta property="og:locale">
<meta property="article:author" content="r00t_daykalif">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"hide","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: "",
      labels: ""
    }
  };
</script>



  <link rel="canonical" href="https://daykalif.github.io/"/>





  <title>Daykalif</title>
  








<meta name="generator" content="Hexo 7.1.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Daykalif</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-é¦–é¡µ">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-æ–‡ç« ">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            æ–‡ç« 
          </a>
        </li>
      
        
        <li class="menu-item menu-item-åˆ†ç±»">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-å‰ç«¯">
          <a href="/categories/web/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            å‰ç«¯
          </a>
        </li>
      
        
        <li class="menu-item menu-item-åç«¯">
          <a href="/categories/server/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-server"></i> <br />
            
            åç«¯
          </a>
        </li>
      
        
        <li class="menu-item menu-item-å…³äºæˆ‘">
          <a href="/categories/aboutMe/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äºæˆ‘
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://daykalif.github.io/2023/04/15/JS/%E3%80%90%E5%8E%9F%E5%88%9B%E3%80%91for-in-for-of%E7%9A%84%E6%9C%AC%E8%B4%A8%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Daykalif">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/04/15/JS/%E3%80%90%E5%8E%9F%E5%88%9B%E3%80%91for-in-for-of%E7%9A%84%E6%9C%AC%E8%B4%A8%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/" itemprop="url">ã€åŸåˆ›ã€‘for in/for ofçš„æœ¬è´¨åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-04-15T12:20:41+08:00">
                2023-04-15
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2023/04/15/JS/%E3%80%90%E5%8E%9F%E5%88%9B%E3%80%91for-in-for-of%E7%9A%84%E6%9C%AC%E8%B4%A8%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2023/04/15/JS/%E3%80%90%E5%8E%9F%E5%88%9B%E3%80%91for-in-for-of%E7%9A%84%E6%9C%AC%E8%B4%A8%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2023/04/15/JS/%E3%80%90%E5%8E%9F%E5%88%9B%E3%80%91for-in-for-of%E7%9A%84%E6%9C%AC%E8%B4%A8%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/" class="leancloud_visitors" data-flag-title="ã€åŸåˆ›ã€‘for in/for ofçš„æœ¬è´¨åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  737
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  3
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="for-in-for-of-çš„æœ¬è´¨åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#for-in-for-of-çš„æœ¬è´¨åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="for in&#x2F;for of çš„æœ¬è´¨åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>for in&#x2F;for of çš„æœ¬è´¨åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h2><h3 id="ä¸€ã€é€‚ç”¨çš„ç›®æ ‡ä¸ä¸€æ ·"><a href="#ä¸€ã€é€‚ç”¨çš„ç›®æ ‡ä¸ä¸€æ ·" class="headerlink" title="ä¸€ã€é€‚ç”¨çš„ç›®æ ‡ä¸ä¸€æ ·"></a>ä¸€ã€é€‚ç”¨çš„ç›®æ ‡ä¸ä¸€æ ·</h3><h4 id="1-for-in"><a href="#1-for-in" class="headerlink" title="1.for in"></a>1.for in</h4><p>for in é€‚ç”¨äº <strong>å¯æšä¸¾æ•°æ®</strong>ï¼Œä¾‹å¦‚å¯¹è±¡ã€æ•°ç»„ã€å­—ç¬¦ä¸²<br>ğŸ§’ ä»€ä¹ˆæ˜¯å¯æšä¸¾å‘¢ï¼Ÿ<br>å±æ€§çš„ enumerate å€¼ä¸º trueï¼Œå’±å°±ç§°ä¸ºæ˜¯å¯æšä¸¾çš„ï¼Œé€šè¿‡<code>Object.getOwnPropertyDescriptors()</code>éªŒè¯&#x2F;æŸ¥çœ‹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> o = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="number">477</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">188</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">getOwnPropertyDescriptors</span>(o));</span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//   name: &#123; value: 477, writable: true, enumerable: true, configurable: true &#125;,</span></span><br><span class="line"><span class="comment">//   age: &#123; value: 188, writable: true, enumerable: true, configurable: true &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•°ç»„</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> a = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">getOwnPropertyDescriptors</span>(a));</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­—ç¬¦ä¸²</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> b = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">getOwnPropertyDescriptors</span>(b));</span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//   &#x27;0&#x27;: &#123; value: &#x27;a&#x27;, writable: true, enumerable: true, configurable: true &#125;,</span></span><br><span class="line"><span class="comment">//   &#x27;1&#x27;: &#123; value: &#x27;b&#x27;, writable: true, enumerable: true, configurable: true &#125;,</span></span><br><span class="line"><span class="comment">//   length: &#123; value: 2, writable: true, enumerable: false, configurable: false &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-for-of"><a href="#2-for-of" class="headerlink" title="2.for of"></a>2.for of</h4><p>for of é€‚ç”¨äº<strong>å¯è¿­ä»£æ•°æ®</strong>ï¼Œä¾‹å¦‚ Arrayã€Stringã€Mapã€Setã€TypedArrayã€å‡½æ•°çš„ arguments å¯¹è±¡ã€NodeList å¯¹è±¡</p>
<p>ğŸ§’ ä»€ä¹ˆæ˜¯å¯è¿­ä»£ï¼Ÿ<br>ES6 ä¸­ï¼Œå…·æœ‰ symbol.iterator å±æ€§ï¼Œå®ƒå¯¹åº”çš„å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°åå¯ä»¥å¾—åˆ°ä¸€ä¸ªå¯¹è±¡ï¼Œæ¯æ¬¡è°ƒç”¨å¯¹è±¡çš„ next æ–¹æ³•èƒ½å¾—åˆ°ç›®æ ‡çš„æ¯ä¸€é¡¹ï¼Œåªè¦ç¬¦åˆè¿™ä¸ªç‰¹ç‚¹å°±æ˜¯å¯è¿­ä»£çš„ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Array</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>];</span><br><span class="line"><span class="keyword">const</span> it = arr[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(it.<span class="title function_">next</span>()); <span class="comment">// &#123; value: &#x27;a&#x27;, done: false &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(it.<span class="title function_">next</span>()); <span class="comment">// &#123; value: &#x27;b&#x27;, done: false &#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// string</span></span><br><span class="line"><span class="keyword">const</span> str = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> it = str[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(it.<span class="title function_">next</span>()); <span class="comment">// &#123; value: &#x27;a&#x27;, done: false &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(it.<span class="title function_">next</span>()); <span class="comment">// &#123; value: &#x27;b&#x27;, done: false &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(it.<span class="title function_">next</span>()); <span class="comment">// &#123; value: &#x27;c&#x27;, done: false &#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>]);</span><br><span class="line"><span class="keyword">const</span> it = str[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(it.<span class="title function_">next</span>()); <span class="comment">// &#123; value: &#x27;a&#x27;, done: false &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(it.<span class="title function_">next</span>()); <span class="comment">// &#123; value: &#x27;b&#x27;, done: false &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(it.<span class="title function_">next</span>()); <span class="comment">// &#123; value: &#x27;c&#x27;, done: false &#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="äºŒã€éå†çš„èŒƒå›´ä¸ä¸€æ ·"><a href="#äºŒã€éå†çš„èŒƒå›´ä¸ä¸€æ ·" class="headerlink" title="äºŒã€éå†çš„èŒƒå›´ä¸ä¸€æ ·"></a>äºŒã€éå†çš„èŒƒå›´ä¸ä¸€æ ·</h3><h4 id="1-for-in-1"><a href="#1-for-in-1" class="headerlink" title="1.for in"></a>1.for in</h4><p>for in åŸå‹ä¸Šçš„å¯æšä¸¾çš„å±æ€§ä¹Ÿèƒ½è¢«éå†åˆ°ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">foo</span> = <span class="number">4</span>;</span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">7</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> attr <span class="keyword">in</span> arr) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(arr[attr]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 7</span></span><br><span class="line"><span class="comment">// 4</span></span><br></pre></td></tr></table></figure>

<h4 id="2-for-of-1"><a href="#2-for-of-1" class="headerlink" title="2.for of"></a>2.for of</h4><p>for of ä¸€èˆ¬åªèƒ½éå†è‡ªèº«çš„ï¼ˆå…·ä½“å’Œè¿­ä»£å™¨çš„å†…éƒ¨å®ç°æœ‰å…³ï¼‰ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">foo</span> = <span class="number">4</span>;</span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">7</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> value <span class="keyword">of</span> arr) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 7</span></span><br></pre></td></tr></table></figure>

<p>æ”¹é€ è¿­ä»£å™¨ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">foo</span> = <span class="number">4</span>;</span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">7</span>];</span><br><span class="line"></span><br><span class="line">arr[<span class="title class_">Symbol</span>.<span class="property">iterator</span>] = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> _this = <span class="variable language_">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">keys</span>(<span class="variable language_">this</span>.<span class="property">__proto__</span>).<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="property">__proto__</span>[item])</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">i</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="title function_">next</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">i</span> &lt; _this.<span class="property">length</span></span><br><span class="line">        ? &#123;</span><br><span class="line">            <span class="attr">value</span>: _this[<span class="variable language_">this</span>.<span class="property">i</span>++],</span><br><span class="line">            <span class="attr">done</span>: <span class="literal">false</span>,</span><br><span class="line">          &#125;</span><br><span class="line">        : &#123;</span><br><span class="line">            <span class="attr">value</span>: <span class="literal">undefined</span>,</span><br><span class="line">            <span class="attr">done</span>: <span class="literal">true</span>,</span><br><span class="line">          &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> value <span class="keyword">of</span> arr) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 7</span></span><br><span class="line"><span class="comment">// 4</span></span><br></pre></td></tr></table></figure>

<h3 id="ä¸‰ã€å¾—åˆ°çš„ç»“æœä¸ä¸€æ ·"><a href="#ä¸‰ã€å¾—åˆ°çš„ç»“æœä¸ä¸€æ ·" class="headerlink" title="ä¸‰ã€å¾—åˆ°çš„ç»“æœä¸ä¸€æ ·"></a>ä¸‰ã€å¾—åˆ°çš„ç»“æœä¸ä¸€æ ·</h3><h4 id="1-for-in-2"><a href="#1-for-in-2" class="headerlink" title="1.for in"></a>1.for in</h4><p>for in å¾—åˆ°çš„æ˜¯ keyï¼ˆå¹¶ä¸”ä¸ä¿è¯é¡ºåºï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">7</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> arr) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(key);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0</span></span><br></pre></td></tr></table></figure>

<h4 id="2-for-of-2"><a href="#2-for-of-2" class="headerlink" title="2.for of"></a>2.for of</h4><p>for of ä¸€èˆ¬å¾—åˆ°çš„æ˜¯ valueï¼ˆå…·ä½“å’Œè¿­ä»£å™¨çš„å†…éƒ¨å®ç°æœ‰å…³ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">7</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> val <span class="keyword">of</span> arr) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(val);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 7</span></span><br></pre></td></tr></table></figure>

<p>æ”¹é€ è¿­ä»£å™¨ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">7</span>];</span><br><span class="line"></span><br><span class="line">arr[<span class="title class_">Symbol</span>.<span class="property">iterator</span>] = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> _this = <span class="variable language_">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">keys</span>(<span class="variable language_">this</span>.<span class="property">__proto__</span>).<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="property">__proto__</span>[item])</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">i</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="title function_">next</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">i</span> &lt; _this.<span class="property">length</span></span><br><span class="line">        ? &#123;</span><br><span class="line">            <span class="attr">value</span>: <span class="variable language_">this</span>.<span class="property">i</span>++,</span><br><span class="line">            <span class="attr">done</span>: <span class="literal">false</span>,</span><br><span class="line">          &#125;</span><br><span class="line">        : &#123;</span><br><span class="line">            <span class="attr">value</span>: <span class="literal">undefined</span>,</span><br><span class="line">            <span class="attr">done</span>: <span class="literal">true</span>,</span><br><span class="line">          &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> val <span class="keyword">of</span> arr) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(val);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0</span></span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://daykalif.github.io/2023/01/31/React/%E3%80%90%E6%90%AC%E3%80%91React-event%E6%80%BB%E7%BA%BF%EF%BC%88%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Daykalif">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/01/31/React/%E3%80%90%E6%90%AC%E3%80%91React-event%E6%80%BB%E7%BA%BF%EF%BC%88%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F%EF%BC%89/" itemprop="url">ã€æ¬ã€‘React eventæ€»çº¿ï¼ˆå‘å¸ƒè®¢é˜…æ¨¡å¼ï¼‰</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-01-31T22:36:42+08:00">
                2023-01-31
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2023/01/31/React/%E3%80%90%E6%90%AC%E3%80%91React-event%E6%80%BB%E7%BA%BF%EF%BC%88%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F%EF%BC%89/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2023/01/31/React/%E3%80%90%E6%90%AC%E3%80%91React-event%E6%80%BB%E7%BA%BF%EF%BC%88%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F%EF%BC%89/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2023/01/31/React/%E3%80%90%E6%90%AC%E3%80%91React-event%E6%80%BB%E7%BA%BF%EF%BC%88%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F%EF%BC%89/" class="leancloud_visitors" data-flag-title="ã€æ¬ã€‘React eventæ€»çº¿ï¼ˆå‘å¸ƒè®¢é˜…æ¨¡å¼ï¼‰">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  199
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1ï¼‰.æ–°å»ºæ–‡ä»¶å¤¹ Emitterï¼š<br>åˆ›å»º index.tsx æ–‡ä»¶:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">EventEmitter</span> &#125; <span class="keyword">from</span> <span class="string">&quot;events&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">emitter</span>: <span class="title class_">EventEmitter</span> = <span class="keyword">new</span> <span class="title class_">EventEmitter</span>();</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> emitter;</span><br></pre></td></tr></table></figure>

<p>2).<br>å­ç»„ä»¶ 1ï¼š<br>å¼•å…¥ emit æ–‡ä»¶ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&quot;../../Emitter&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>è®¾ç½®å€¼ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [emmitSwitch, setEmmitSwitch] = useState &lt; boolean &gt; <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>

<p>åˆ›å»º switch å…ƒç´ :</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;section&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;t-mt&quot;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">marginLeft:</span> &quot;<span class="attr">-8px</span>&quot;, <span class="attr">fontWeight:</span> <span class="attr">600</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">    ä½¿ç”¨ emmit</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;t-mt&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Switch</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">checked</span>=<span class="string">&#123;emmitSwitch&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">        setEmmitSwitch(!emmitSwitch);</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      size=&quot;small&quot;</span></span><br><span class="line"><span class="language-xml">    /&gt;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/section&gt;</span><br></pre></td></tr></table></figure>

<p>ç›‘å¬è¯¥å±æ€§å€¼å˜æ›´ï¼Œè§¦å‘ emitï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  emitter.<span class="title function_">emit</span>(<span class="string">&quot;onSwitch&quot;</span>, emmitSwitch);</span><br><span class="line">&#125;, [emmitSwitch]);</span><br></pre></td></tr></table></figure>

<p>3.å­ç»„ä»¶ 2ï¼š<br>å¼•å…¥ emit æ–‡ä»¶ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&quot;../Emitter&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>ç›‘å¬ emitter ä¸­å±æ€§å€¼å˜åŒ–ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handleSwitch</span> = (<span class="params">...args</span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(...args);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  emitter.<span class="title function_">on</span>(<span class="string">&quot;onSwitch&quot;</span>, handleSwitch);</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    emitter.<span class="title function_">removeListener</span>(<span class="string">&quot;onSwitch&quot;</span>, handleSwitch);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://daykalif.github.io/2023/01/31/React/%E3%80%90%E6%90%AC%E3%80%91%E6%B5%85%E8%B0%88React%E6%95%B0%E6%8D%AE%E6%B5%81%E7%AE%A1%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Daykalif">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/01/31/React/%E3%80%90%E6%90%AC%E3%80%91%E6%B5%85%E8%B0%88React%E6%95%B0%E6%8D%AE%E6%B5%81%E7%AE%A1%E7%90%86/" itemprop="url">ã€æ¬ã€‘æµ…è°ˆReactæ•°æ®æµç®¡ç†</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-01-31T21:57:32+08:00">
                2023-01-31
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2023/01/31/React/%E3%80%90%E6%90%AC%E3%80%91%E6%B5%85%E8%B0%88React%E6%95%B0%E6%8D%AE%E6%B5%81%E7%AE%A1%E7%90%86/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2023/01/31/React/%E3%80%90%E6%90%AC%E3%80%91%E6%B5%85%E8%B0%88React%E6%95%B0%E6%8D%AE%E6%B5%81%E7%AE%A1%E7%90%86/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2023/01/31/React/%E3%80%90%E6%90%AC%E3%80%91%E6%B5%85%E8%B0%88React%E6%95%B0%E6%8D%AE%E6%B5%81%E7%AE%A1%E7%90%86/" class="leancloud_visitors" data-flag-title="ã€æ¬ã€‘æµ…è°ˆReactæ•°æ®æµç®¡ç†">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  5.6k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  19
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h3><p>ä¸ºä»€ä¹ˆæ•°æ®æµç®¡ç†å¦‚æ­¤é‡è¦ï¼Ÿ<br>react çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯ï¼šUI&#x3D;render(data)ï¼Œdata å°±æ˜¯æˆ‘ä»¬è¯´çš„æ•°æ®ï¼Œrender æ˜¯ react æä¾›çš„çº¯å‡½æ•°ï¼Œæ‰€ä»¥ç”¨æˆ·ç•Œé¢çš„å±•ç¤ºå®Œå…¨å–å†³äºæ•°æ®å±‚ã€‚</p>
<p><strong>è¿™ç¯‡æ–‡ç« å¸Œæœ›èƒ½ç”¨æœ€æµ…æ˜¾æ˜“æ‡‚çš„è¯ï¼Œå°† react ä¸­çš„æ•°æ®æµç®¡ç†ï¼Œä»è‡ªèº«åˆ°å€ŸåŠ©ç¬¬ä¸‰æ–¹åº“ï¼Œå°†è¿™äº›æ¦‚å¿µç†æ¸…æ¥šã€‚</strong><br>æˆ‘ä¼šåˆ—ä¸¾å‡ ä¸ªå½“ä¸‹æœ€çƒ­çš„åº“ï¼ŒåŒ…æ‹¬å®ƒä»¬çš„æ€æƒ³ä»¥åŠä¼˜ç¼ºç‚¹ï¼Œé€‚ç”¨äºå“ªäº›ä¸šåŠ¡åœºæ™¯ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ä¸æ˜¯æ•™ç¨‹ï¼Œä¸ä¼šè®²å¦‚ä½•å»ä½¿ç”¨å®ƒä»¬ï¼Œæ›´ä¸ä¼šä¸€è¨€ä¸åˆå°±æ¬æºç ï¼Œæ­£å¦‚æ–‡ç« æ ‡é¢˜æ‰€è¯´ï¼Œåªæ˜¯æµ…è°ˆï¼Œå¸Œæœ›è¯»è€…åœ¨è¯»å®Œä»¥åå°±ç®—åŸå…ˆæ²¡æœ‰ä½¿ç”¨è¿‡è¿™äº›åº“ï¼Œä¹Ÿèƒ½å¤§è‡´æœ‰ä¸ªæ€è·¯ï¼ŒçŸ¥é“è¯¥å¦‚ä½•é€‰æ‹©æ€§åœ°æ·±å…¥å­¦ä¹ ã€‚</p>
<p>åœ¨æœ¬æ–‡æ­£å¼å¼€å§‹ä¹‹å‰ï¼Œæˆ‘å…ˆè¯•å›¾è®²æ¸…æ¥šä¸¤ä¸ªæ¦‚å¿µï¼Œ<strong>çŠ¶æ€å’Œæ•°æ®ï¼š</strong></p>
<p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œreact æ˜¯åˆ©ç”¨å¯å¤ç”¨çš„ç»„ä»¶æ¥æ„å»ºç•Œé¢çš„ï¼Œç»„ä»¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæœ‰é™çŠ¶æ€æœºï¼Œå®ƒèƒ½å¤Ÿè®°ä½å½“å‰æ‰€å¤„çš„çŠ¶æ€ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ ¹æ®ä¸åŒçš„çŠ¶æ€å˜åŒ–åšå‡ºç›¸åº”çš„æ“ä½œã€‚åœ¨ react ä¸­ï¼ŒæŠŠè¿™ç§çŠ¶æ€å®šä¹‰ä¸º stateï¼Œç”¨æ¥æè¿°è¯¥ç»„ä»¶å¯¹åº”çš„å½“å‰äº¤äº’ç•Œé¢ï¼Œè¡¨ç¤ºå½“å‰ç•Œé¢å±•ç¤ºçš„ä¸€ç§çŠ¶å†µï¼Œreact æ­£æ˜¯é€šè¿‡ç®¡ç†çŠ¶æ€æ¥å®ç°å¯¹ç»„ä»¶çš„ç®¡ç†ï¼Œå½“ state å‘ç”Ÿå˜æ›´æ—¶ï¼Œreact ä¼šè‡ªåŠ¨å»æ‰§è¡Œç›¸åº”çš„æ“ä½œï¼šç»˜åˆ¶ç•Œé¢ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥æåˆ°çš„çŠ¶æ€æ˜¯é’ˆå¯¹ react component è¿™ç§æœ‰é™çŠ¶æ€æœºã€‚è€Œæ•°æ®å°±å¹¿æ³›äº†ï¼Œå®ƒä¸å…‰æ˜¯æŒ‡ server å±‚è¿”å›ç»™å‰ç«¯çš„æ•°æ®ï¼Œreact ä¸­çš„çŠ¶æ€ä¹Ÿæ˜¯ä¸€ç§æ•°æ®ã€‚å½“æˆ‘ä»¬æ”¹å˜æ•°æ®çš„åŒæ—¶ï¼Œå°±è¦é€šè¿‡æ”¹å˜çŠ¶æ€å»å¼•å‘ç•Œé¢çš„å˜æ›´ã€‚</p>
<p>æˆ‘ä»¬çœŸæ­£è¦å…³å¿ƒçš„æ˜¯æ•°æ®å±‚çš„ç®¡ç†ï¼Œæˆ‘ä»¬ä»Šå¤©æ‰€è®¨è®ºçš„æ•°æ®æµç®¡ç†æ–¹æ¡ˆï¼Œç‰¹åˆ«æ˜¯åé¢ä»‹ç»çš„å‡ ç§ç¬¬ä¸‰æ–¹åº“ï¼Œä¸å…‰æ˜¯é…åˆ reactï¼Œä¹Ÿå¯ä»¥é…åˆå…¶ä»–çš„ View æ¡†æ¶ï¼ˆVueã€Angular ç­‰ç­‰ï¼‰ï¼Œå°±å¥½æ¯”å¼€å¤´æåˆ°çš„é‚£ä¸ªå…¬å¼ï¼Œå¼•ç”³ä¸€ä¸‹ï¼šUI &#x3D;X(data)ï¼Œä½†ä»Šå¤©ä¸»è¦æ˜¯å›´ç»• react æ¥è®²çš„ï¼Œå› æ­¤æˆ‘ä»¬åœ¨è¯´ react çš„çŠ¶æ€ç®¡ç†å…¶å®å’Œæ•°æ®æµç®¡ç†æ˜¯ä¸€æ ·çš„ï¼ŒåŒ…æ‹¬æˆ‘ä»¬ä¼šå€ŸåŠ©ç¬¬ä¸‰æ–¹åº“æ¥å¸®åŠ© react ç®¡ç†çŠ¶æ€ï¼Œå¸Œæœ›ä¸è¦æœ‰å°ä¼™ä¼´å¤ªçº ç»“äºæ­¤ã€‚</p>
<h3 id="ä¸€ã€react-è‡ªèº«çš„æ•°æ®æµç®¡ç†æ–¹æ¡ˆ"><a href="#ä¸€ã€react-è‡ªèº«çš„æ•°æ®æµç®¡ç†æ–¹æ¡ˆ" class="headerlink" title="ä¸€ã€react è‡ªèº«çš„æ•°æ®æµç®¡ç†æ–¹æ¡ˆ"></a>ä¸€ã€react è‡ªèº«çš„æ•°æ®æµç®¡ç†æ–¹æ¡ˆ</h3><p>æˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸€ä¸‹ï¼Œreact è‡ªèº«æ˜¯å¦‚ä½•ç®¡ç†æ•°æ®æµçš„ï¼ˆä¹Ÿå¯ä»¥ç†è§£ä¸ºå¦‚ä½•ç®¡ç†åº”ç”¨çŠ¶æ€ï¼‰ï¼š</p>
<p>react æ˜¯è‡ªä¸Šè€Œä¸‹çš„å•å‘ç»„ä»¶æ•°æ®æµï¼Œå®¹å™¨ç»„ä»¶&amp;å±•ç¤ºç»„ä»¶ï¼ˆä¹Ÿå«å‚»ç“œç»„ä»¶&amp;èªæ˜ç»„ä»¶ï¼‰æ˜¯æœ€å¸¸ç”¨çš„ react ç»„ä»¶è®¾è®¡æ–¹æ¡ˆï¼Œå®¹å™¨ç»„ä»¶è´Ÿè´£å¤„ç†å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ä»¥åŠæ•°æ®ï¼Œå±•ç¤ºç»„ä»¶è´Ÿè´£å¤„ç† UI å±‚ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šå°†å±•ç¤ºç»„ä»¶æŠ½å‡ºæ¥è¿›è¡Œå¤ç”¨æˆ–è€…ç»„ä»¶åº“çš„å°è£…ï¼Œå®¹å™¨ç»„ä»¶è‡ªèº«é€šè¿‡ state æ¥ç®¡ç†çŠ¶æ€ï¼ŒsetState æ›´æ–°çŠ¶æ€ï¼Œä»è€Œæ›´æ–° UIï¼Œé€šè¿‡ props å°†è‡ªèº«çš„ state ä¼ é€’ç»™å±•ç¤ºç»„ä»¶å®ç°é€šä¿¡ã€‚</p>
<p>è¿™æ˜¯å½“ä¸šåŠ¡éœ€æ±‚ä¸å¤æ‚ï¼Œé¡µé¢è¾ƒç®€å•æ—¶æˆ‘ä»¬å¸¸ç”¨çš„æ•°æ®æµå¤„ç†æ–¹å¼ï¼Œä»…ç”¨ react è‡ªèº«æä¾›çš„ props å’Œ state æ¥ç®¡ç†è¶³çŸ£ï¼Œä½†æ˜¯å¦‚æœç¨å¾®å¢åŠ ä¸€ç‚¹å¤æ‚åº¦å‘¢ï¼Œæ¯”å¦‚å½“æˆ‘ä»¬é¡¹ç›®ä¸­é‡åˆ°è¿™äº›é—®é¢˜ï¼š</p>
<ul>
<li>1ï¼‰å¦‚ä½•å®ç°è·¨ç»„ä»¶é€šä¿¡ã€çŠ¶æ€åŒæ­¥ä»¥åŠçŠ¶æ€å…±äº«ï¼Ÿ</li>
</ul>
<p>react V16.3 ä»¥å‰ï¼Œé€šè¿‡çŠ¶æ€æå‡è‡³æœ€è¿‘çš„å…±åŒçˆ¶ç»„ä»¶æ¥å®ç°ã€‚ï¼ˆè™½ç„¶æœ‰å®˜æ–¹æä¾›çš„ contextAPIï¼Œä½†æ˜¯æ—§ç‰ˆæœ¬å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šçœ‹ä¼¼è·¨ç»„ä»¶ï¼Œå®åˆ™è¿˜æ˜¯é€çº§ä¼ é€’ï¼Œå¦‚æœä¸­é—´ç»„ä»¶ä½¿ç”¨äº† ShouldComponentUpdate æ£€æµ‹åˆ°å½“å‰ state å’Œ props æ²¡æœ‰å˜åŒ–ï¼Œreturnfalseï¼Œé‚£ä¹ˆ context å°±ä¼šæ— æ³•é€ä¼ ï¼Œå› æ­¤ context æ²¡æœ‰è¢«å®˜æ–¹æ¨èä½¿ç”¨ï¼‰ã€‚</p>
<p><img src="https://www.daykalif.com/blog_img/context.jpeg" alt="daykalif"></p>
<p>react V16.3 ç‰ˆæœ¬ä»¥åï¼Œæ–°ç‰ˆæœ¬ context è§£å†³äº†ä¹‹å‰çš„é—®é¢˜ï¼Œå¯ä»¥è½»æ¾å®ç°ï¼Œä½†ä¾ç„¶å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œcontext ä¹Ÿæ˜¯å°†åº•éƒ¨å­ç»„ä»¶çš„çŠ¶æ€æ§åˆ¶äº¤ç»™åˆ°äº†é¡¶çº§ç»„ä»¶ï¼Œä½†æ˜¯é¡¶çº§ç»„ä»¶çŠ¶æ€æ›´æ–°çš„æ—¶å€™ä¸€å®šä¼šè§¦å‘æ‰€æœ‰å­ç»„ä»¶çš„ re-renderï¼Œé‚£ä¹ˆä¹Ÿä¼šå¸¦æ¥æŸè€—ã€‚ï¼ˆè™½ç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€äº›æ‰‹æ®µæ¥å‡å°‘é‡ç»˜ï¼Œæ¯”å¦‚åœ¨ä¸­é—´ç»„ä»¶çš„ SCU é‡Œè¿›è¡Œä¸€äº›åˆ¤æ–­ï¼Œä½†æ˜¯å½“é¡¹ç›®è¾ƒå¤§æ—¶ï¼Œæˆ‘ä»¬éœ€è¦èŠ±å¤ªå¤šçš„ç²¾åŠ›å»åšè¿™ä»¶äº‹ï¼‰<br><img src="https://www.daykalif.com/blog_img/context2.jpeg" alt="daykalif"></p>
<ul>
<li>2ï¼‰å¦‚ä½•é¿å…ç»„ä»¶è‡ƒè‚¿ï¼Ÿ</li>
</ul>
<p>å½“æŸä¸ªç»„ä»¶çš„ä¸šåŠ¡é€»è¾‘éå¸¸å¤æ‚æ—¶ï¼Œæˆ‘ä»¬ä¼šå‘ç°ä»£ç è¶Šå†™è¶Šå¤šï¼Œå› ä¸ºæˆ‘ä»¬åªèƒ½åœ¨ç»„ä»¶å†…éƒ¨å»æ§åˆ¶æ•°æ®æµï¼Œæ²¡åŠæ³•æŠ½ç¦»ï¼ŒModel å’Œ View éƒ½æ”¾åœ¨äº† View å±‚ï¼Œæ•´ä¸ªç»„ä»¶æ˜¾å¾—è‡ƒè‚¿ä¸å ªï¼Œä¸šåŠ¡é€»è¾‘ç»Ÿç»Ÿå †åœ¨ä¸€å—ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚</p>
<ul>
<li>3ï¼‰å¦‚ä½•è®©çŠ¶æ€å˜å¾—å¯é¢„çŸ¥ï¼Œç”šè‡³å¯å›æº¯ï¼Ÿ</li>
</ul>
<p>å½“æ•°æ®æµæ··ä¹±æ—¶ï¼Œæˆ‘ä»¬ä¸€ä¸ªæ‰§è¡ŒåŠ¨ä½œå¯èƒ½ä¼šè§¦å‘ä¸€ç³»åˆ—çš„ setStateï¼Œæˆ‘ä»¬å¦‚ä½•èƒ½å¤Ÿè®©æ•´ä¸ªæ•°æ®æµå˜å¾—å¯â€œç›‘æ§â€ï¼Œç”šè‡³å¯ä»¥æ›´ç»†è‡´åœ°å»æ§åˆ¶æ¯ä¸€æ­¥æ•°æ®æˆ–çŠ¶æ€çš„å˜æ›´ï¼Ÿ</p>
<ul>
<li>4ï¼‰å¦‚ä½•å¤„ç†å¼‚æ­¥æ•°æ®æµï¼Ÿ</li>
</ul>
<p>react è‡ªèº«å¹¶æœªæä¾›å¤šç§å¤„ç†å¼‚æ­¥æ•°æ®æµç®¡ç†çš„æ–¹æ¡ˆï¼Œä»…ç”¨ä¸€ä¸ª setState å·²ç»å¾ˆéš¾æ»¡è¶³ä¸€äº›å¤æ‚çš„å¼‚æ­¥æµåœºæ™¯ï¼›</p>
<h4 id="å¦‚ä½•æ”¹è¿›ï¼Ÿ"><a href="#å¦‚ä½•æ”¹è¿›ï¼Ÿ" class="headerlink" title="å¦‚ä½•æ”¹è¿›ï¼Ÿ"></a>å¦‚ä½•æ”¹è¿›ï¼Ÿ</h4><p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ä¸€ä¸ªçœŸæ­£çš„æ•°æ®æµç®¡ç†å·¥å…·æ¥å¸®åŠ© react äº†ï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒæ˜¯çœŸæ­£è„±ç¦» react ç»„ä»¶çš„æ¦‚å¿µçš„ï¼Œä» UI å±‚å®Œå…¨æŠ½ç¦»å‡ºæ¥ï¼Œåªè´Ÿè´£ç®¡ç†æ•°æ®ï¼Œè®© react åªä¸“æ³¨äº View å±‚çš„ç»˜åˆ¶ã€‚</p>
<p>é‚£è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ä½¿ç”¨é‚£äº›ç¬¬ä¸‰æ–¹æ•°æ®æµç®¡ç†å·¥å…·çš„åŸå› ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥äº†è§£ä¸€äº›å½“å‰ç¤¾åŒºæ¯”è¾ƒçƒ­é—¨çš„æ•°æ®æµç®¡ç†å·¥å…·ã€‚</p>
<h3 id="äºŒã€redux"><a href="#äºŒã€redux" class="headerlink" title="äºŒã€redux"></a>äºŒã€redux</h3><p>æˆ‘ç›´æ¥è·³è¿‡äº† flux æ¥è¯´ reduxï¼Œä¸»è¦æ˜¯å› ä¸º redux æ˜¯ç”± flux æ¼”å˜è€Œæ¥ï¼Œå¯ä»¥è¯´æ˜¯ flux çš„å‡çº§åŠ å¼ºç‰ˆï¼Œflux å…·å¤‡çš„ä¼˜åŠ¿ redux ä¹Ÿåšåˆ°äº†ã€‚</p>
<h4 id="redux-æä¾›äº†å“ªäº›ï¼Ÿ"><a href="#redux-æä¾›äº†å“ªäº›ï¼Ÿ" class="headerlink" title="redux æä¾›äº†å“ªäº›ï¼Ÿ"></a>redux æä¾›äº†å“ªäº›ï¼Ÿ</h4><p><img src="https://www.daykalif.com/blog_img/redux.jpeg" alt="daykalif"></p>
<ul>
<li>1ï¼‰storeï¼šæä¾›äº†ä¸€ä¸ªå…¨å±€çš„ store å˜é‡ï¼Œç”¨æ¥å­˜å‚¨æˆ‘ä»¬å¸Œæœ›ä»ç»„ä»¶å†…éƒ¨æŠ½ç¦»å‡ºå»çš„é‚£äº›å…¬ç”¨çš„çŠ¶æ€ï¼›</li>
<li>2ï¼‰actionï¼šæä¾›äº†ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œç”¨æ¥è®°å½•æˆ‘ä»¬æ¯ä¸€æ¬¡çš„çŠ¶æ€å˜æ›´ï¼Œå¯æ—¥å¿—æ‰“å°ä¸è°ƒè¯•å›æº¯ï¼Œå¹¶ä¸”è¿™æ˜¯å”¯ä¸€çš„é€”å¾„ï¼›</li>
<li>3ï¼‰reducerï¼šæä¾›äº†ä¸€ä¸ªçº¯å‡½æ•°ï¼Œç”¨æ¥è®¡ç®—çŠ¶æ€çš„å˜æ›´ï¼›</li>
</ul>
<h4 id="ä¸ºä»€ä¹ˆéœ€è¦-reduxï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦-reduxï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦ reduxï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦ reduxï¼Ÿ</h4><p>å¾ˆå¤šäººåœ¨ç”¨äº†ä¸€æ®µæ—¶é—´çš„ redux ä¹‹åï¼Œæœ€å¤§çš„æ„Ÿæƒ³å°±æ˜¯ï¼Œredux è¦å†™å¤§é‡çš„æ¨¡æ¿ä»£ç ï¼Œå¾ˆéº»çƒ¦ï¼Œè¿˜ä¸å¦‚åªç”¨ react æ¥ç®¡ç†ã€‚ç‰¹åˆ«æ˜¯åœ¨ react çš„æ–° context æ¨å‡ºä»¥åï¼Œè®¸å¤šäººæ›´æ˜¯ç›´æ¥å¼ƒç”¨äº† reduxï¼Œç”šè‡³è§‰å¾— redux å·²æ­»ã€‚å¦‚æœè¯´æ—§ç‰ˆçš„ context çš„å¼Šç«¯ï¼Œæˆ‘ä»¬é€šè¿‡ redux é…åˆ react-redux æ¥å®ç°è·¨ç»„ä»¶çš„çŠ¶æ€é€šä¿¡åŒæ­¥ç­‰é—®é¢˜ï¼Œé‚£ç¡®å®æ–°ç‰ˆæœ¬çš„ context å¯ä»¥æ›¿æ¢æ‰è¿™ä¸ªåŠŸèƒ½ç‚¹ï¼Œä½†å¦‚æœä½ çš„é¡¹ç›®ä¸­ä»…ä»…æ˜¯ç”¨ redux åšè¿™äº›ï¼Œé‚£æ€è€ƒä¸€ä¸‹ï¼Œä½ æ˜¯å¦çœŸçš„éœ€è¦ reduxï¼Ÿä¹Ÿè®¸ä»ä¸€å¼€å§‹ä½ å°±ä¸éœ€è¦å®ƒã€‚</p>
<p>ï¼ˆè™½ç„¶æ–°ç‰ˆçš„ context åŠŸèƒ½å¼ºå¤§ï¼Œä½†æ˜¯ä¾ç„¶æ˜¯é€šè¿‡ä¸€ä¸ªæ–°çš„å®¹å™¨ç»„ä»¶æ¥æ›¿æˆ‘ä»¬ç®¡ç†çŠ¶æ€ï¼Œé‚£ä¹ˆé€šè¿‡ç»„ä»¶ç®¡ç†çŠ¶æ€çš„é—®é¢˜ä¾æ—§ä¼šå­˜åœ¨ï¼ŒConsumer æ˜¯å’Œ Provider ä¸€ä¸€å¯¹åº”çš„ï¼Œåœ¨é¡¹ç›®å¤æ‚åº¦è¾ƒé«˜æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°å¤šä¸ª Providerï¼Œæ›´å¤šä¸ª Consumerï¼Œç”šè‡³ä¼šä¸€ä¸ª Consumer éœ€è¦å¯¹åº”å¤šä¸ª Provider çš„ä¼ å€¼ç­‰ä¸€ç³»åˆ—å¤æ‚çš„æƒ…å†µï¼Œæ‰€ä»¥æˆ‘ä»¬ä¾ç„¶è¦è°¨æ…ä½¿ç”¨ï¼‰</p>
<h4 id="redux-çš„æ ¸å¿ƒç«äº‰åŠ›"><a href="#redux-çš„æ ¸å¿ƒç«äº‰åŠ›" class="headerlink" title="redux çš„æ ¸å¿ƒç«äº‰åŠ›"></a>redux çš„æ ¸å¿ƒç«äº‰åŠ›</h4><p>1ï¼‰çŠ¶æ€æŒä¹…åŒ–ï¼šglobalstore å¯ä»¥ä¿è¯ç»„ä»¶å°±ç®—é”€æ¯äº†ä¹Ÿä¾ç„¶ä¿ç•™ä¹‹å‰çŠ¶æ€ï¼›<br>2ï¼‰çŠ¶æ€å¯å›æº¯ï¼šæ¯ä¸ª action éƒ½ä¼šè¢«åºåˆ—åŒ–ï¼ŒReducer ä¸ä¼šä¿®æ”¹åŸæœ‰çŠ¶æ€ï¼Œæ€»æ˜¯è¿”å›æ–°çŠ¶æ€ï¼Œæ–¹ä¾¿åšçŠ¶æ€å›æº¯ï¼›<br>3ï¼‰Functional Programmingï¼šä½¿ç”¨çº¯å‡½æ•°ï¼Œè¾“å‡ºå®Œå…¨ä¾èµ–è¾“å…¥ï¼Œæ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨ï¼›<br>4ï¼‰ä¸­é—´ä»¶ï¼šé’ˆå¯¹å¼‚æ­¥æ•°æ®æµï¼Œæä¾›äº†ç±» express ä¸­é—´ä»¶çš„æ¨¡å¼ï¼Œç¤¾åŒºä¹Ÿå‡ºç°äº†ä¸€å¤§æ‰¹ä¼˜ç§€çš„ç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œèƒ½å¤Ÿæ›´ç²¾ç»†åœ°æ§åˆ¶æ•°æ®çš„æµåŠ¨ï¼Œå¯¹å¤æ‚çš„ä¸šåŠ¡åœºæ™¯èµ·åˆ°äº†ç¼“å†²åœ°ä½œç”¨ï¼›<br><img src="https://www.daykalif.com/blog_img/redux3.jpeg" alt="daykalif"></p>
<p>ä¸å…¶è¯´æ˜¯ redux æ¥å¸®åŠ© react ç®¡ç†çŠ¶æ€ï¼Œä¸å¦‚è¯´æ˜¯å°† react çš„éƒ¨åˆ†çŠ¶æ€ç§»äº¤è‡³ redux é‚£é‡Œã€‚redux å½»å¤´å½»å°¾çš„çº¯å‡½æ•°ç†å¿µå°±è¡¨æ˜äº†å®ƒä¸ä¼šå‚ä¸ä»»ä½•çŠ¶æ€å˜åŒ–ï¼Œå®Œå…¨æ˜¯ç”± react è‡ªå·±æ¥å®Œæˆã€‚åªä¸è¿‡ redux ä¼šæä¾›ä¸€å¥—å·¥å…·ï¼Œreact ç…§ç€è¯´æ˜ä¹¦æ¥æ“ä½œç½¢äº†ã€‚</p>
<p>æ‰€ä»¥è¿™æ³¨å®šäº†æƒ³è¦æ¥å— reduxï¼Œå°±å¿…é¡»æŒ‰ç…§å®ƒçš„è§„çŸ©æ¥åšï¼Œé™¤éä½ ä¸æ„¿æ„æ¥å—è¿™ç§ FP çš„æ¨¡å¼ã€‚è¿™ç§æ¨¡å¼æœ‰åˆ©æœ‰å¼Šï¼Œæœ‰åˆ©å°±æ˜¯åœ¨ä¸€ä¸ªå¤§å‹çš„å¤šäººå›¢é˜Ÿä¸­ï¼Œè¿™ç§å¼€å‘æ¨¡å¼åè€Œå®¹æ˜“å½¢æˆä¸€ç§è§„çº¦ï¼Œè®©æ•´ä¸ªçŠ¶æ€æµç¨‹å˜å¾—æ¸…æ™°ï¼Œå¼Šç«¯å°±æ˜¯å¯¹äºå°è§„æ¨¡å›¢é˜Ÿï¼Œå°¤å…¶æ˜¯ç€æ€¥å‘å¸ƒä¸Šçº¿çš„ï¼Œè¿™ç§ç¹é‡çš„ä»£ç æ¨¡æ¿æ— ç–‘æ˜¯ä¸€ç§è´Ÿæ‹…ã€‚</p>
<h4 id="redux-çš„ç¼ºç‚¹ï¼š"><a href="#redux-çš„ç¼ºç‚¹ï¼š" class="headerlink" title="redux çš„ç¼ºç‚¹ï¼š"></a>redux çš„ç¼ºç‚¹ï¼š</h4><p>1ï¼‰ç¹é‡çš„ä»£ç æ¨¡æ¿ï¼šä¿®æ”¹ä¸€ä¸ª state å¯èƒ½è¦åŠ¨å››äº”ä¸ªæ–‡ä»¶ï¼Œå¯è°“ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ï¼›<br>2ï¼‰store é‡ŒçŠ¶æ€æ®‹ç•™ï¼šå¤šç»„ä»¶å…±ç”¨ store é‡ŒæŸä¸ªçŠ¶æ€æ—¶è¦æ³¨æ„åˆå§‹åŒ–æ¸…ç©ºé—®é¢˜ï¼›<br>3ï¼‰æ— è„‘çš„å‘å¸ƒè®¢é˜…ï¼šæ¯æ¬¡ dispatch ä¸€ä¸ª action éƒ½ä¼šéå†æ‰€æœ‰çš„ reducerï¼Œé‡æ–°è®¡ç®— connectï¼Œè¿™æ— ç–‘æ˜¯ä¸€ç§æŸè€—ï¼›<br>4ï¼‰äº¤äº’é¢‘ç¹æ—¶ä¼šæœ‰å¡é¡¿ï¼šå¦‚æœ store è¾ƒå¤§æ—¶ï¼Œä¸”é¢‘ç¹åœ°ä¿®æ”¹ storeï¼Œä¼šæ˜æ˜¾çœ‹åˆ°é¡µé¢å¡é¡¿ï¼›<br>5ï¼‰ä¸æ”¯æŒ typescriptï¼›</p>
<p>å…³äºå¦‚ä½•ä¼˜åŒ–ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šä¼˜ç§€çš„æ¡ˆä¾‹ï¼Œredux å®˜æ–¹ä¹Ÿæä¾›äº†å¾ˆå¤šæ–¹æ³•ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚redux æœªæ¥ä¸ä¼šæœ‰å¤ªå¤§çš„å˜åŒ–ï¼Œé‚£äº›å¼Šç«¯è¿˜æ˜¯ä¼šç»§ç»­ä¿ç•™ï¼Œä½†æ˜¯è¿™ä¾ç„¶ä¸ä¼šå¦¨ç¢å¿ çˆ±å®ƒçš„ç”¨æˆ·å»ä½¿ç”¨å®ƒã€‚</p>
<p>å¦‚æœè¯´ redux é‚£ç§å¼ºç¡¬çš„å‡½æ•°å¼ç¼–ç¨‹æ¨¡å¼è®©å¾ˆå¤šäººéš¾ä»¥æ¥å—ï¼Œé‚£ä¹ˆå½“ä»–ä»¬å¼€å§‹ mobx çš„ä½¿ç”¨çš„æ—¶å€™ï¼Œæ— ç–‘æ˜¯ä¸€ç§è§£è„±ã€‚</p>
<h3 id="ä¸‰ã€mobx"><a href="#ä¸‰ã€mobx" class="headerlink" title="ä¸‰ã€mobx"></a>ä¸‰ã€mobx</h3><p>æœ€å¼€å§‹æ¥è§¦ mobx ä¹Ÿæ˜¯å› ä¸º redux ä½œè€… DanAbramov çš„é‚£å¥ï¼šUnhappywith reduxï¼Ÿtry mobxï¼Œæˆ‘ç›¸ä¿¡å¾ˆå¤šäººä¹Ÿæ˜¯å› ä¸ºè¿™å¥è¯è€Œå¼€å§‹äº†è§£å­¦ä¹ å¹¶ä½¿ç”¨å®ƒçš„ã€‚</p>
<p>ä¸‹é¢åˆ—ä¸¾ä¸€äº› mobx çš„ä¼˜åŠ¿ï¼ˆå’Œ redux è¿›è¡Œä¸€ä¸ªå¯¹æ¯”ï¼‰</p>
<p>1ï¼‰redux ä¸å…è®¸ç›´æ¥ä¿®æ”¹ stateï¼Œè€Œ mobx å¯éšæ„ä¿®æ”¹ï¼›<br>2ï¼‰redux ä¿®æ”¹çŠ¶æ€å¿…é¡»èµ°ä¸€å¥—æŒ‡å®šçš„æµç¨‹è¾ƒéº»çƒ¦ï¼Œè€Œ mobx å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ç›´æ¥ä¿®æ”¹ï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸‹ï¼‰ï¼›<br>3ï¼‰redux æ¨¡æ¿ä»£ç æ–‡ä»¶å¤šï¼Œè€Œ mobx éå¸¸ç®€æ´ï¼Œå°±ä¸€ä¸ªæ–‡ä»¶ï¼›<br>4ï¼‰redux åªæœ‰ä¸€ä¸ª storeï¼Œstate orstore éš¾ä»¥å–èˆï¼Œè€Œ mobx å¤š storeï¼Œä½ å¯ä»¥æŠŠæ‰€æœ‰çš„ state éƒ½æ”¾å…¥ store ä¸­ï¼Œå®Œå…¨äº¤ç»™ mobx æ¥ç®¡ç†ï¼Œå‡å°‘é¡¾è™‘ï¼›<br>5ï¼‰redux éœ€è¦å¯¹ç›‘å¬çš„ç»„ä»¶åš SCU ä¼˜åŒ–ï¼Œå‡å°‘é‡å¤ renderï¼›è€Œ mobx éƒ½æ˜¯ SmartComponentï¼Œä¸ç”¨æˆ‘ä»¬æ‰‹åŠ¨åš SCUï¼›</p>
<p>mobx çš„è®¾è®¡æ€æƒ³ï¼š<br><img src="https://www.daykalif.com/blog_img/redux4.jpeg" alt="daykalif"></p>
<p>è¯´äº†è¿™ä¹ˆå¤šï¼Œå¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡äº†è§£ mobxï¼Œæ˜¯ä¸æ˜¯å¬ç€å°±æ„Ÿè§‰å¾ˆçˆ½ï¼æ²¡é”™ï¼Œè¿™å°±æ˜¯ mobx çš„é­…åŠ›ï¼Œé‚£å®ƒæ˜¯å¦‚ä½•å®ç°è¿™äº›åŠŸèƒ½çš„å‘¢ï¼Ÿ</p>
<p>è¿™é‡Œä»¥ mobx 5 ç‰ˆæœ¬ä¸ºä¾‹ï¼Œå®é™…ä¸Šå®ƒæ˜¯åˆ©ç”¨äº† ES6 çš„ proxy æ¥è¿½è¸ªå±æ€§ï¼ˆæ—§ç‰ˆæœ¬æ˜¯ç”¨ Object.defineProperty æ¥å®ç°çš„ï¼‰é€šè¿‡éšå¼è®¢é˜…ï¼Œè‡ªåŠ¨è¿½è¸ªè¢«ç›‘å¬çš„å¯¹è±¡å˜åŒ–ï¼Œç„¶åè§¦å‘ç»„ä»¶çš„ UI æ›´æ–°ã€‚</p>
<p>å¦‚æœè¯´ redux æ˜¯æŠŠè¦åšçš„äº‹æƒ…éƒ½äº¤ç»™äº†ç”¨æˆ·ï¼Œæ¥ä¿è¯è‡ªå·±çš„çº¯å‡€ï¼Œé‚£ä¹ˆ mobx å°±æ˜¯æŠŠæœ€ç®€æ˜“çš„æ“ä½œç»™äº†ç”¨æˆ·ï¼Œå…¶å®ƒçš„äº¤ç»™ mobx å†…éƒ¨å»å®ç°ã€‚ç”¨æˆ·ä¸å¿…å…³å¿ƒè¿™ä¸ªè¿‡ç¨‹ï¼ŒModel å’Œ View å®Œå…¨åˆ†ç¦»ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥å°†ä¸šåŠ¡é€»è¾‘å†™åœ¨ action é‡Œï¼Œç”¨æˆ·åªéœ€è¦æ“ä½œ Observabledata å°±è¡Œäº†ã€‚</p>
<p>Observerview ä¼šè‡ªåŠ¨åšå‡ºå“åº”ï¼Œè¿™å°±æ˜¯ mobx ä¸»æ‰“çš„å“åº”å¼è®¾è®¡ï¼Œä½†æ˜¯ç¼–ç¨‹é£æ ¼ä¾ç„¶æ˜¯ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡çš„ OO èŒƒå¼ã€‚ï¼ˆç†Ÿæ‚‰ Vue çš„æœ‹å‹ä¸€å®šå¯¹è¿™ç§å“åº”å¼è®¾è®¡ä¸é™Œç”Ÿï¼ŒVue å°±æ˜¯åˆ©ç”¨äº†æ•°æ®åŠ«æŒæ¥å®ç°åŒå‘ç»‘å®šï¼Œå…¶å® React +Mobx å°±æ˜¯ä¸€ä¸ªå¤æ‚ç‚¹çš„ Vueï¼ŒVue 3 ç‰ˆæœ¬ä¸€ä¸ªé‡å¤§æ”¹å˜ä¹Ÿæ˜¯å°†ä»£ç†äº¤ç»™äº† proxyï¼‰</p>
<p>åˆšåˆš mobx çš„ä¼˜åŠ¿è¯´å¾—æ¯”è¾ƒå¤šäº†ï¼Œè¿™è¾¹å†æ€»ç»“ä¸€ä¸‹ï¼š</p>
<p>1ï¼‰ä»£ç é‡å°‘ï¼›<br>2ï¼‰åŸºäºæ•°æ®åŠ«æŒæ¥å®ç°ç²¾å‡†å®šä½ï¼ˆçœŸæ­£æ„ä¹‰ä¸Šçš„å±€éƒ¨æ›´æ–°ï¼‰ï¼›<br>3ï¼‰å¤š store æŠ½ç¦»ä¸šåŠ¡é€»è¾‘ï¼ˆModel View åˆ†ç¦»ï¼‰ï¼›<br>4ï¼‰å“åº”å¼æ€§èƒ½è‰¯å¥½ï¼ˆé¢‘ç¹çš„äº¤äº’ä¾ç„¶å¯ä»¥èƒœä»»ï¼‰ï¼›<br>5ï¼‰å®Œå…¨å¯ä»¥æ›¿ä»£ react è‡ªèº«çš„çŠ¶æ€ç®¡ç†ï¼›<br>6ï¼‰æ”¯æŒ typescriptï¼›</p>
<p>ä½†æ˜¯ mobx çœŸçš„è¿™ä¹ˆå®Œç¾å—ï¼Œå½“ç„¶ä¹Ÿæœ‰ç¼ºé™·ï¼š</p>
<p>1ï¼‰æ²¡æœ‰çŠ¶æ€å›æº¯èƒ½åŠ›ï¼šmobx æ˜¯ç›´æ¥ä¿®æ”¹å¯¹è±¡å¼•ç”¨ï¼Œæ‰€ä»¥å¾ˆéš¾å»åšçŠ¶æ€å›æº¯ï¼›ï¼ˆè¿™ç‚¹ redux çš„ä¼˜åŠ¿å°±ç¬é—´ä½“ç°å‡ºæ¥äº†ï¼‰<br>2ï¼‰æ²¡æœ‰ä¸­é—´ä»¶ï¼šå’Œ redux ä¸€æ ·ï¼Œmobx ä¹Ÿæ²¡æœ‰å¾ˆå¥½åœ°åŠæ³•å¤„ç†å¼‚æ­¥æ•°æ®æµï¼Œæ²¡åŠæ³•æ›´ç²¾ç»†åœ°å»æ§åˆ¶æ•°æ®æµåŠ¨ï¼›ï¼ˆredux è™½ç„¶è‡ªå·±ä¸åšï¼Œä½†æ˜¯å®ƒæä¾›äº† applyMiddlewareï¼ï¼‰<br>3ï¼‰store å¤ªå¤šï¼šéšç€ store æ•°çš„å¢å¤šï¼Œç»´æŠ¤æˆæœ¬ä¹Ÿä¼šå¢åŠ ï¼Œè€Œä¸”å¤š store ä¹‹é—´çš„æ•°æ®å…±äº«ä»¥åŠç›¸äº’å¼•ç”¨ä¹Ÿä¼šå®¹æ˜“å‡ºé”™<br>4ï¼‰å‰¯ä½œç”¨ï¼šmobx ç›´æ¥ä¿®æ”¹æ•°æ®ï¼Œå’Œå‡½æ•°å¼ç¼–ç¨‹æ¨¡å¼å¼ºè°ƒçš„çº¯å‡½æ•°ç›¸åï¼Œè¿™ä¹Ÿå¯¼è‡´äº†æ•°æ®çš„å¾ˆå¤šæœªçŸ¥æ€§</p>
<p>å…¶å®ç°åœ¨ä¸»æµçš„æ•°æ®æµç®¡ç†åˆ†ä¸ºä¸¤å¤§æ´¾ï¼Œä¸€ç±»æ˜¯ä»¥ redux ä¸ºé¦–çš„å‡½æ•°å¼åº“ï¼Œè¿˜æœ‰ä¸€ç±»æ˜¯ä»¥ mobx ä¸ºé¦–çš„å“åº”å¼åº“ï¼Œå…¶å®é€šè¿‡åˆšåˆšçš„ä»‹ç»ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œredux å’Œ mobx æœ‰ä¸€ä¸ªå…±åŒçš„çŸ­æ¿ï¼Œé‚£å°±æ˜¯åœ¨å¤„ç†å¼‚æ­¥æ•°æ®æµçš„æ—¶å€™ï¼Œæ²¡æœ‰ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œè‡³å°‘ä»…ä»…ä¾é è‡ªèº«æ¯”è¾ƒåƒåŠ›ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥ç»™å¤§å®¶ä»‹ç»ä¸€ä¸ªå¤„ç†å¼‚æ­¥æ•°æ®æµçš„é«˜æ‰‹ï¼šrxjsã€‚</p>
<h3 id="å››ã€rxjs"><a href="#å››ã€rxjs" class="headerlink" title="å››ã€rxjs"></a>å››ã€rxjs</h3><p>æˆ‘ç›¸ä¿¡å¾ˆå¤šäººå¬è¯´è¿‡ rxjs å­¦ä¹ æ›²çº¿å¼‚å¸¸é™¡å³­ï¼Œæ˜¯çš„ï¼Œé™¤äº†çœ¼èŠ±ç¼­ä¹±çš„å„ç±»æ“ä½œç¬¦ï¼ˆç›®å‰ rxjs V6 ç‰ˆæœ¬æœ‰ 120+ä¸ªï¼‰ï¼Œå…³é”®æ˜¯å®ƒè¦æ±‚æˆ‘ä»¬åœ¨å¤„ç†äº‹åŠ¡çš„æ—¶å€™è¦è´¯å½»â€œä¸€åˆ‡çš†ä¸ºæµâ€çš„ç†å¿µï¼Œæ›´æ˜¯è®©åˆå­¦è€…éš¾ä»¥ç†è§£ã€‚</p>
<p>è¿™ä¸€å°èŠ‚å¹¶ä¸èƒ½è®©è¯»è€…è¾¾åˆ°èƒ½å¤Ÿä¸Šæ‰‹ä½¿ç”¨çš„ç¨‹åº¦ï¼Œæ­£å¦‚æ–‡ç« å¼€å¤´æ‰€è¯´ï¼Œå¸Œæœ›è¯»è€…ï¼ˆæ–°æ‰‹ï¼‰èƒ½å¯¹ rxjs æœ‰ä¸€ä¸ªæ–°çš„è®¤çŸ¥ï¼ŒçŸ¥é“å®ƒæ˜¯åšä»€ä¹ˆçš„ï¼Œå®ƒæ˜¯å¦‚ä½•å®ç°çš„ï¼Œå®ƒæœ‰å“ªäº›ä¼˜åŠ¿ï¼Œæˆ‘ä»¬å¦‚ä½•é€‰æ‹©å®ƒï¼Œå¦‚æœæ„Ÿå…´è¶£è¿˜éœ€è¦ç§ä¸‹èŠ±å¤§é‡æ—¶é—´å»å­¦ä¹ æŒæ¡å„ç§æ“ä½œç¬¦ï¼Œä½†æˆ‘ä¹Ÿä¼šå°è¯•å°½å¯èƒ½åœ°ç›¸å¯¹äºå‰ä¸¤ä¸ªè¯´å¾—æ›´ç»†è‡´ä¸€äº›ã€‚</p>
<p>åœ¨å¼€å§‹ä»‹ç» rxjs ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥ç®€å•åœ°èŠèŠä»€ä¹ˆæ˜¯å“åº”å¼ç¼–ç¨‹ï¼Ÿæˆ‘ä»¥ä¸€ä¸ªå¾ˆç®€å•çš„å°ä¾‹å­æ¥çœ‹ï¼ša + b &#x3D; cã€‚</p>
<p>å¦‚æœç«™åœ¨ä¼ ç»Ÿçš„å‘½ä»¤å¼ç¼–ç¨‹çš„è§’åº¦æ¥çœ‹è¿™æ®µå…¬å¼ï¼šc çš„å€¼å®Œå…¨ä¾èµ–äº a å’Œ bï¼Œè¿™æ—¶å€™æˆ‘ä»¬å»æ”¹å˜ a çš„å€¼ï¼Œé‚£æˆ‘ä»¬å°±éœ€è¦å†å»æ‰‹åŠ¨è®¡ç®— a + b çš„å€¼ï¼Œaã€b å’Œ c æ˜¯ç›¸äº’ä¾èµ–çš„ã€‚</p>
<p>é‚£ä¹ˆå¦‚æœç«™åœ¨å“åº”å¼ç¼–ç¨‹çš„è§’åº¦æ¥çœ‹ï¼Œè¿™ä¸ªå…¬å¼åˆä¼šå˜æˆè¿™æ ·ï¼šc :&#x3D; a + bï¼Œa å’Œ b å®Œå…¨ä¸å…³å¿ƒ c çš„å€¼ï¼Œc ä¹Ÿå®Œå…¨ä¸å…³å¿ƒç­‰å¼é‚£è¾¹æ˜¯ a æˆ–è€… bï¼Œæˆ–è€…è¿˜æœ‰ä»€ä¹ˆ dï¼Œeï¼Œfã€‚ã€‚ã€‚ç­‰å¼å³è¾¹æ”¹å˜å€¼äº†ï¼Œå·¦è¾¹ä¼šè‡ªåŠ¨æ›´æ”¹æ•°å€¼ï¼Œè¿™å°±æ˜¯å“åº”å¼ç¼–ç¨‹çš„æ€ç»´æ–¹å¼ã€‚</p>
<p>æˆ‘ä»¬å†æ¥çœ‹å‰ç«¯çš„æ¡†æ¶å†å²ï¼Œä¼ ç»Ÿå‘½ä»¤å¼ç¼–ç¨‹çš„ä»£è¡¨ï¼šjQueryï¼Œåœ¨è¿‡å»æˆ‘ä»¬æ˜¯å¦‚ä½•ç»˜åˆ¶ä¸€ä¸ªé¡µé¢çš„ï¼Ÿæˆ‘ä»¬ä¼šç”¨ jQuery æä¾›çš„ä¸€å¥— APIï¼Œç„¶åæ‰‹åŠ¨æ“ä½œ Dom æ¥è¿›è¡Œç»˜åˆ¶ï¼Œå¾ˆç²¾å‡†ï¼Œä½†æ˜¯å¾ˆç´¯ï¼Œå› ä¸ºå®Œå…¨é æ‰‹åŠ¨æ“ä½œï¼Œä¸”æ”¹åŠ¨æ—¶æ€§èƒ½æŸè€—è¾ƒå¤§ï¼Œå¼€å‘è€…çš„æ³¨æ„åŠ›å®Œå…¨åœ¨â€œå¦‚ä½•å»ç»˜åˆ¶â€ä¸Šé¢äº†ã€‚</p>
<p>é‚£æˆ‘ä»¬å†æ¥çœ‹å“åº”å¼ç¼–ç¨‹çš„ reactï¼Œå®ƒæ˜¯å¦‚ä½•æ¥å®ç°çš„ï¼Ÿ</p>
<p>å¼€å‘è€…æ ¹æœ¬ä¸ç”¨å…³å¿ƒç•Œé¢å¦‚ä½•ç»˜åˆ¶ï¼Œåªè¦å‘Šè¯‰ react æˆ‘ä»¬å¸Œæœ›é¡µé¢é•¿ä»€ä¹ˆæ ·å­ï¼Œå°±å¯ä»¥äº†ï¼Œå‰©ä¸‹çš„äº¤ç»™ reactï¼Œreact å°±ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬ç»˜åˆ¶ç•Œé¢ï¼Œè¿˜è®°å¾—å¼€å¤´æ—¶çš„é‚£ä¸ªæ ¸å¿ƒæ€æƒ³å—ï¼šUI &#x3D;render(data)ï¼Œæˆ‘ä»¬åªè¦æ“ä½œ data å°±å¯ä»¥äº†ï¼Œé¡µé¢ UI ä¼šè‡ªåŠ¨ä½œå‡ºå“åº”ï¼Œè€Œä¸”æˆ‘ä»¬ä¸€åˆ‡çš„æ“ä½œéƒ½æ˜¯åŸºäºå†…å­˜ä¹‹ä¸­ï¼Œä¸ä¼šæœ‰è¾ƒå¤§çš„æ€§èƒ½æŸè€—ï¼Œè¿™å°±æ˜¯ react å“åº”å¼ç¼–ç¨‹çš„ç²¾é«“ï¼Œä¹Ÿæ˜¯ä¸ºä½•å®ƒå«ä½œ reactã€‚</p>
<p>å›åˆ°æˆ‘ä»¬çš„ rxjs ä¸Šï¼Œrxjs æ˜¯å¦‚ä½•åšåˆ°å“åº”å¼çš„å‘¢ï¼Ÿå¤šäºäº†å®ƒä¸¤ç§å¼ºå¤§çš„è®¾è®¡æ¨¡å¼ï¼šè§‚å¯Ÿè€…æ¨¡å¼å’Œè¿­ä»£å™¨æ¨¡å¼ï¼›ç®€å•åœ°ä»‹ç»ä¸€ä¸‹ï¼š</p>
<ul>
<li>1ï¼‰è§‚å¯Ÿè€…æ¨¡å¼ï¼š</li>
</ul>
<p><img src="https://www.daykalif.com/blog_img/rxjs.jpeg" alt="daykalif"></p>
<p>åœ¨è§‚å¯Ÿè€…æ¨¡å¼ä¸­ï¼Œæœ‰ä¸¤ä¸ªé‡è¦çš„è§’è‰²ï¼šObservable å’Œ Observerï¼Œç†Ÿæ‚‰ mobx çš„åŒå­¦å¯¹è¿™ä¸ªä¸€å®šä¸é™Œç”Ÿï¼ˆæ‰€ä»¥æˆ‘å»ºè®®æƒ³è¦å­¦ä¹  rxjs çš„åŒå­¦ï¼Œå¦‚æœå¯¹ mobx ä¸ç†Ÿæ‚‰ï¼Œå¯ä»¥å…ˆå­¦ä¹ ä¸€ä¸‹ mobxï¼Œç„¶åå†å­¦ä¹  rxjsï¼Œè¿™æ ·ä¼šæ›´å®¹æ˜“ç†è§£ä¸€äº›ï¼‰ã€‚</p>
<p>å°±æ˜¯å¯è§‚å¯Ÿå¯¹è±¡å’Œè§‚å¯Ÿè€…ï¼Œå¯è§‚å¯Ÿå¯¹è±¡ï¼ˆObservableï¼‰ä¹Ÿå°±æ˜¯äº‹ä»¶å‘å¸ƒè€…ï¼Œè´Ÿè´£äº§ç”Ÿäº‹ä»¶ï¼Œè€Œè§‚å¯Ÿè€…ï¼ˆObserverï¼‰ä¹Ÿå°±æ˜¯äº‹ä»¶å“åº”è€…ï¼Œè´Ÿè´£å¯¹å‘å¸ƒçš„äº‹ä»¶ä½œå‡ºå“åº”ï¼Œä½†æ˜¯å¦‚ä½•è¿æ¥ä¸€ä¸ªå‘å¸ƒè€…å’Œå“åº”è€…å‘¢ï¼Ÿ</p>
<p>é€šè¿‡è®¢é˜…çš„å½¢å¼ï¼Œä¹Ÿå°±æ˜¯ subscribe æ–¹æ³•ï¼ˆè¿™ä¹Ÿç±»ä¼¼äº redux çš„ store.subscribeï¼‰ï¼Œè€Œåœ¨è®¢é˜…ä¹‹å‰ï¼Œä»–ä»¬ä¸¤è€…æ˜¯æ¯«æ— å…³è”çš„ï¼Œæ— è®º Observable å‘å‡ºå¤šå°‘äº‹ä»¶ï¼ŒObserver ä¹Ÿä¸ä¼šåšå‡ºä»»ä½•å“åº”ï¼ŒåŒæ ·ï¼Œå½“è¿™ç§è®¢é˜…å…³ç³»ä¸­æ–­æ—¶ä¹Ÿä¸ä¼šã€‚</p>
<ul>
<li>2ï¼‰è¿­ä»£å™¨æ¨¡å¼ï¼š</li>
</ul>
<p>åœ¨è¿™é‡Œè¦å…ˆå¼•å‡ºä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼šæ‹‰å–ï¼ˆpullï¼‰å’Œæ¨é€ï¼ˆpushï¼‰ï¼Œrxjs å®˜æ–¹è¿™ä¸¤ç§åè®®æœ‰æ›´è¯¦ç»†çš„è§£é‡Šï¼Œæˆ‘è¿™é‡Œå°±ç›´æ¥å¼•ç”¨ä¸€ä¸‹ï¼š<br><img src="https://www.daykalif.com/blog_img/rxjs2.jpeg" alt="daykalif"></p>
<p>æ‹‰å–å’Œæ¨é€å®é™…ä¸Šå¯¹äºè§‚å¯Ÿè€…æ¥è¯´å°±æ˜¯ä¸€ä¸ªä¸»åŠ¨ä¸è¢«åŠ¨çš„åŒºåˆ«ï¼Œæ˜¯ä¸»åŠ¨å»è·å–è¿˜æ˜¯è¢«åŠ¨åœ°æ¥æ”¶ã€‚åœ¨ rxjs ä¸­ï¼Œä½œä¸ºäº‹ä»¶å“åº”è€…ï¼ˆæ¶ˆè´¹è€…ï¼‰çš„ Observer å¯¹è±¡ä¹Ÿæœ‰ä¸€ä¸ª next å±æ€§ï¼ˆå›è°ƒå‡½æ•°ï¼‰ï¼Œç”¨æ¥æ¥æ”¶ä»å‘å¸ƒè€…é‚£é‡Œâ€œæ¨â€è¿‡æ¥çš„æ•°æ®ã€‚</p>
<p>ï¼ˆç«™åœ¨å¼€å‘è€…çš„è§’åº¦ï¼Œæˆ‘ä»¬ä¸€å®šæ˜¯å¸Œæœ›æ¶ˆæ¯æ˜¯è¢«åŠ¨åœ°æ¥æ”¶ï¼Œå› ä¸ºæˆ‘ä»¬å€¡å¯¼çš„å°±æ˜¯é€šè¿‡æ“ä½œ data æ•°æ®å±‚ï¼Œè®© View å±‚è¿›è¡Œä¸€ä¸ªå“åº”ï¼Œé‚£ä¹ˆè¿™é‡Œ data æ•°æ®å±‚ä¸€å®šæ˜¯äº‹ä»¶å‘å¸ƒè€…ï¼Œè€Œ View å±‚å°±æ˜¯äº‹ä»¶å“åº”è€…ï¼Œæ¯å½“ data æ•°æ®å±‚å‘ç”Ÿå˜åŒ–æ—¶ï¼Œéƒ½ä¼šä¸»åŠ¨æ¨é€ä¸€ä¸ªå€¼ç»™ View å±‚ï¼Œè¿™æ‰ç¬¦åˆçœŸæ­£æ„ä¹‰ä¸Šçš„å“åº”å¼ç¼–ç¨‹ï¼Œè€Œ rxjs åšåˆ°äº†ï¼ï¼‰</p>
<p>å¦‚ä½•é…åˆ reactï¼Ÿ</p>
<p>å¦‚æœè¯´ redux å’Œ mobx çš„å‡ºç°æˆ–å¤šæˆ–å°‘æ˜¯å› ä¸º react çš„å­˜åœ¨ï¼Œé‚£ä¹ˆä¸åŒçš„æ˜¯ rxjs å’Œ react å¹¶æ²¡æœ‰ä»€ä¹ˆå…³è”ï¼Œå…³äº rxjs çš„å†å²è¿™é‡Œä¸å¤šè¯´ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥äº†è§£ä¸€ä¸‹ ReactiveExtensionï¼Œrxjs åªæ˜¯å“åº”å¼ç¼–ç¨‹åœ¨ JavaScript ä¸­çš„åº”ç”¨ã€‚</p>
<p>é‚£ä¹ˆå¦‚ä½•å¸®åŠ© react å®ç°çŠ¶æ€ç®¡ç†å‘¢ï¼Œæˆ‘ä»¬åªéœ€è¦å°†ç»„ä»¶ä½œä¸ºäº‹ä»¶å“åº”è€…ï¼Œç„¶ååœ¨ next å›è°ƒé‡Œå®šä¹‰å¥½æ›´æ–°ç»„ä»¶çŠ¶æ€çš„åŠ¨ä½œ setStateï¼Œå½“æ¥æ”¶åˆ°æ•°æ®æ¨é€æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨è§¦å‘ setStateï¼Œå®Œæˆç•Œé¢æ›´æ–°ï¼Œè¿™å…¶å®æœ‰ç‚¹ç±»ä¼¼äº mobx åšçš„äº‹æƒ…ã€‚ï¼ˆå¾ˆå¤šäººåœ¨ react é¡¹ç›®ä¸­å¹¶æ²¡æœ‰å®Œå…¨åªä½¿ç”¨ rxjsï¼Œè€Œæ˜¯ç”¨äº†è¿™ä¸ª redux-observable ä¸­é—´ä»¶ï¼Œåˆ©ç”¨ rxjs çš„æ“ä½œç¬¦æ¥å¤„ç†å¼‚æ­¥ actionï¼‰</p>
<p>é™¤äº†å“åº”å¼ç¼–ç¨‹çš„é­…åŠ›ï¼Œrxjs è¿˜æœ‰ä»€ä¹ˆä¼˜åŠ¿å‘¢ï¼Ÿ</p>
<p>1ï¼‰çº¯å‡½æ•°ï¼šrxjs ä¸­æ•°æ®æµåŠ¨çš„è¿‡ç¨‹ä¸­ï¼Œä¸ä¼šæ”¹å˜å·²ç»å­˜åœ¨çš„ Observable å®ä¾‹ï¼Œä¼šè¿”å›ä¸€ä¸ªæ–°çš„ Observableï¼Œæ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨ï¼›<br>2ï¼‰å¼ºå¤§çš„æ“ä½œç¬¦ï¼šrxjs åˆè¢«ç§°ä¸º lodash forasyncï¼Œå’Œ lodash ä¸€æ ·ï¼Œæ‹¥æœ‰ä¼—å¤šå¼ºå¤§çš„æ“ä½œç¬¦æ¥æ“ä½œæ•°æ®æµï¼Œä¸å…‰æ˜¯åŒæ­¥æ•°æ®ï¼Œç‰¹åˆ«æ˜¯é’ˆå¯¹å„ç§å¤æ‚çš„å¼‚æ­¥æ•°æ®æµï¼Œç”šè‡³å¯ä»¥å¤šç§äº‹ä»¶æµç»„åˆæ­é…ï¼Œæ±‡æ€»åˆ°ä¸€èµ·å¤„ç†ï¼›<br>3ï¼‰æ›´ç‹¬ç«‹ï¼šrxjs å¹¶ä¸ä¾èµ–äºä»»ä½•ä¸€ä¸ªæ¡†æ¶ï¼Œå®ƒå¯ä»¥ä»»æ„æ­é…ï¼Œå› ä¸ºå®ƒçš„å…³æ³¨ç‚¹å®Œå…¨å°±æ˜¯åœ¨äºæ•°æ®æµçš„å¤„ç†ä¸Šï¼Œè€Œä¸”å®ƒæ›´ååº•å±‚ä¸€äº›</p>
<p>é‚£ rxjs æœ‰å“ªäº›ç¼ºç‚¹å‘¢ï¼Ÿ</p>
<p>1ï¼‰å­¦ä¹ æ›²çº¿é™¡å³­ï¼šå…‰æ˜¯è¿™ä¸€ç‚¹å°±å·²ç»è®©å¤§å¤šæ•°äººæ­¢æ­¥äºæ­¤ï¼›<br>2ï¼‰äº‹ä»¶æµé«˜åº¦æŠ½è±¡ï¼šç”¨ rxjs çš„ç”¨æˆ·åé¦ˆä¸€èˆ¬éƒ½æ˜¯ä¸¤ç§æç«¯æƒ…å†µï¼Œç”¨å¾—å¥½çš„éƒ½è§‰å¾—è¿™ä¸ªå¤ªå‰å®³äº†ï¼Œç”¨å¾—ä¸å¥½çš„éƒ½è§‰å¾—æ„Ÿè§‰æœ‰ç‚¹éº»çƒ¦ï¼Œå¢åŠ äº†é¡¹ç›®å¤æ‚åº¦ã€‚</p>
<h3 id="äº”ã€ç»“è¯­"><a href="#äº”ã€ç»“è¯­" class="headerlink" title="äº”ã€ç»“è¯­"></a>äº”ã€ç»“è¯­</h3><p>æœ€åï¼Œæ€»ç»“ä¸€ä¸‹å„ç±»çš„é€‚ç”¨åœºæ™¯ï¼š</p>
<p>1ï¼‰å½“æˆ‘ä»¬é¡¹ç›®ä¸­å¤æ‚ç¨‹åº¦è¾ƒä½æ—¶ï¼Œå»ºè®®åªç”¨ react å°±å¯ä»¥äº†ï¼›<br>2ï¼‰å½“æˆ‘ä»¬é¡¹ç›®ä¸­è·¨ç»„ä»¶é€šä¿¡ã€æ•°æ®æµåŒæ­¥ç­‰æƒ…å†µè¾ƒå¤šæ—¶ï¼Œå»ºè®®æ­é… react çš„æ–° context apiï¼›<br>3ï¼‰å½“é¡¹ç›®å¤æ‚åº¦ä¸€èˆ¬æ—¶ï¼Œå°è§„æ¨¡å›¢é˜Ÿæˆ–å¼€å‘å‘¨æœŸè¾ƒçŸ­ã€è¦æ±‚å¿«é€Ÿä¸Šçº¿æ—¶ï¼Œå»ºè®®ä½¿ç”¨ mobxï¼›<br>4ï¼‰å½“é¡¹ç›®å¤æ‚åº¦è¾ƒé«˜æ—¶ï¼Œå›¢é˜Ÿè§„æ¨¡è¾ƒå¤§æˆ–è¦æ±‚å¯¹äº‹ä»¶åˆ†å‘å¤„ç†å¯ç›‘æ§å¯å›æº¯æ—¶ï¼Œå»ºè®®ä½¿ç”¨ reduxï¼›<br>5ï¼‰å½“é¡¹ç›®å¤æ‚åº¦è¾ƒé«˜ï¼Œä¸”æ•°æ®æµï¼ˆå°¤å…¶æ˜¯å¼‚æ­¥æ•°æ®ï¼‰æ··æ‚æ—¶ï¼Œå»ºè®®ä½¿ç”¨ rxjsï¼›</p>
<p>å…¶å®å›é¡¾å…¨ç¯‡ï¼Œæˆ‘æ²¡æœ‰æåˆ°ä¸€ä¸ªå…³é”®ç‚¹æ˜¯ï¼Œå„ä¸ªåº“çš„æ€§èƒ½å¯¹æ¯”å¦‚ä½•ã€‚å…¶å®å®ƒä»¬ä¹‹é—´ä¸€å®šæ˜¯æœ‰å·®å¼‚çš„ï¼Œä½†æ˜¯è¿™ç‚¹æ€§èƒ½å·®å¼‚ï¼Œç›¸å¯¹äº react è‡ªèº«ç»„ä»¶è®¾è®¡ä¸å½“è€Œå¯¼è‡´çš„æ€§èƒ½æŸè€—æ¥è¯´ï¼Œæ˜¯å¯ä»¥å¿½ç•¥çš„ã€‚</p>
<p>å¦‚æœä½ ç°åœ¨çš„é¡¹ç›®è§‰å¾—æ€§èƒ½è¾ƒå·®æˆ–è€…é¡µé¢å¡é¡¿ï¼Œå»ºè®®å…ˆä» react å±‚é¢å»è€ƒè™‘å¦‚ä½•è¿›è¡Œä¼˜åŒ–ï¼Œç„¶åå†å»è€ƒè™‘å¦‚ä½•ä¼˜åŒ–æ•°æ®ç®¡ç†å±‚ã€‚å…³äºä¸Šé¢æåˆ°çš„ä¸‰ä¸ªæ•°æ®æµç®¡ç†å·¥å…·ï¼Œæœ‰åˆ©æœ‰å¼Šï¼Œé’ˆå¯¹å¼Šç«¯ï¼Œç½‘ä¸Šä¹Ÿæœ‰ä¸€å¤§æ‰¹ä¼˜ç§€çš„è§£å†³æ–¹æ¡ˆå’Œæ”¹è¿›ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯è‡ªè¡ŒæŸ¥é˜…ã€‚</p>
<p>ã€æ¨èé˜…è¯»ã€‘</p>
<ul>
<li>OCR æŠ€æœ¯åœ¨æºç¨‹ä¸šåŠ¡ä¸­çš„åº”ç”¨</li>
<li>åŸºäº tendermint å®ç° Hyperledger Fabric çš„æ‹œå åº­å®¹é”™æ’åº</li>
<li>æºç¨‹æ··åˆäº‘ä¹‹ kubernetes@AWS æ­ç§˜</li>
<li>æºç¨‹æŠ€æœ¯æ¼”è¿›ä¹‹è·¯</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://daykalif.github.io/2023/01/31/Dva/%E3%80%90%E6%90%AC%E3%80%91Dva%E5%85%A5%E9%97%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Daykalif">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/01/31/Dva/%E3%80%90%E6%90%AC%E3%80%91Dva%E5%85%A5%E9%97%A8/" itemprop="url">ã€æ¬ã€‘Dvaå…¥é—¨</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-01-31T21:34:06+08:00">
                2023-01-31
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2023/01/31/Dva/%E3%80%90%E6%90%AC%E3%80%91Dva%E5%85%A5%E9%97%A8/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2023/01/31/Dva/%E3%80%90%E6%90%AC%E3%80%91Dva%E5%85%A5%E9%97%A8/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2023/01/31/Dva/%E3%80%90%E6%90%AC%E3%80%91Dva%E5%85%A5%E9%97%A8/" class="leancloud_visitors" data-flag-title="ã€æ¬ã€‘Dvaå…¥é—¨">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  2k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  9
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="React-æ²¡æœ‰è§£å†³çš„é—®é¢˜"><a href="#React-æ²¡æœ‰è§£å†³çš„é—®é¢˜" class="headerlink" title="React æ²¡æœ‰è§£å†³çš„é—®é¢˜"></a>React æ²¡æœ‰è§£å†³çš„é—®é¢˜</h3><p>React æœ¬èº«åªæ˜¯ä¸€ä¸ª DOM çš„æŠ½è±¡å±‚ï¼Œåœ¨è™šæ‹Ÿ DOM çš„åŸºç¡€ä¸Šå¼€å‘ç»„ä»¶ã€‚</p>
<p>å¦‚æœå¼€å‘å¤æ‚çš„å¤§å‹åº”ç”¨ï¼Œè¿˜éœ€è¦è§£å†³ä¸¤ä¸ªé—®é¢˜ã€‚</p>
<h3 id="æ¶æ„é—®é¢˜"><a href="#æ¶æ„é—®é¢˜" class="headerlink" title="æ¶æ„é—®é¢˜"></a>æ¶æ„é—®é¢˜</h3><p>React æ²¡æœ‰è§„å®šå¤§å‹åº”ç”¨çš„æ¶æ„ã€‚</p>
<p>åˆ°åº•å“ªä¸€ç§æ¶æ„æœ€åˆé€‚ React ï¼Ÿ</p>
<ul>
<li>MVC</li>
<li>MVVM</li>
<li>Observer</li>
<li>Reactive</li>
<li>â€¦</li>
</ul>
<p>é€šä¿¡é—®é¢˜</p>
<ul>
<li>é€šä¿¡ï¼šç»„ä»¶ä¹‹é—´å¦‚ä½•é€šä¿¡ï¼Ÿ</li>
<li>æ•°æ®æµï¼šæ•°æ®å¦‚ä½•å’Œè§†å›¾ä¸²è”èµ·æ¥ï¼Ÿè·¯ç”±å’Œæ•°æ®å¦‚ä½•ç»‘å®šï¼Ÿå¦‚ä½•ç¼–å†™å¼‚æ­¥é€»è¾‘ï¼Ÿç­‰ç­‰</li>
</ul>
<p>æ€ä¹ˆè§£å†³ä¸‹é¢ä¸‰ç§é€šä¿¡ï¼Ÿ</p>
<ul>
<li>å‘å­ç»„ä»¶å‘æ¶ˆæ¯</li>
<li>å‘çˆ¶ç»„ä»¶å‘æ¶ˆæ¯</li>
<li>å‘å…¶ä»–ç»„ä»¶å‘æ¶ˆæ¯<br>React åªæä¾›äº†ä¸€ç§ç»„ä»¶ä¹‹é—´çš„é€šä¿¡æ‰‹æ®µï¼šä¼ å‚ã€‚å¯¹äºå¤§åº”ç”¨ï¼Œå¾ˆä¸æ–¹ä¾¿ã€‚</li>
</ul>
<p>ç»„ä»¶é€šä¿¡çš„ç¤ºä¾‹ 1ï¼šæƒ³ä¸€æƒ³çˆ¶ç»„ä»¶å¦‚ä½•æ‹¿åˆ°å­ç»„ä»¶çš„å€¼ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> /&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Father</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Son</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™é‡Œæ˜¾ç¤º Son ç»„ä»¶çš„å†…å®¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Father</span> /&gt;</span></span>, mountNode);</span><br></pre></td></tr></table></figure>

<p>ç»„ä»¶é€šä¿¡çš„ç¤ºä¾‹ 2ï¼šçœ‹æ‡‚ä»¥ä¸‹ä»£ç ï¼Œç†è§£å­ç»„ä»¶å¦‚ä½•é€šè¿‡çˆ¶ç»„ä»¶ä¼ å…¥çš„å‡½æ•°ï¼Œå°†è‡ªå·±çš„å€¼å†ä¼ å›çˆ¶ç»„ä»¶ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onChange</span>=<span class="string">&#123;this.props.onChange&#125;</span> /&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Father</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">      <span class="attr">son</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">changeHandler</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">      <span class="attr">son</span>: e.<span class="property">target</span>.<span class="property">value</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Son</span> <span class="attr">onChange</span>=<span class="string">&#123;this.changeHandler.bind(this)&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™é‡Œæ˜¾ç¤º Son ç»„ä»¶çš„å†…å®¹ï¼š&#123;this.state.son&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Father</span> /&gt;</span></span>, mountNode);</span><br></pre></td></tr></table></figure>

<h3 id="æ•°æ®æµé—®é¢˜"><a href="#æ•°æ®æµé—®é¢˜" class="headerlink" title="æ•°æ®æµé—®é¢˜"></a>æ•°æ®æµé—®é¢˜</h3><p>ç›®å‰æµè¡Œçš„æ•°æ®æµæ–¹æ¡ˆæœ‰ï¼š</p>
<ul>
<li>Fluxï¼Œå•é¡¹æ•°æ®æµæ–¹æ¡ˆï¼Œä»¥ Redux ä¸ºä»£è¡¨</li>
<li>Reactiveï¼Œå“åº”å¼æ•°æ®æµæ–¹æ¡ˆï¼Œä»¥ Mobx ä¸ºä»£è¡¨</li>
<li>å…¶ä»–ï¼Œæ¯”å¦‚ rxjs ç­‰</li>
</ul>
<p>åˆ°åº•å“ªä¸€ç§æ¶æ„æœ€åˆé€‚ React ï¼Ÿ</p>
<h3 id="ç›®å‰æœ€æµè¡Œçš„æ•°æ®æµæ–¹æ¡ˆ"><a href="#ç›®å‰æœ€æµè¡Œçš„æ•°æ®æµæ–¹æ¡ˆ" class="headerlink" title="ç›®å‰æœ€æµè¡Œçš„æ•°æ®æµæ–¹æ¡ˆ"></a>ç›®å‰æœ€æµè¡Œçš„æ•°æ®æµæ–¹æ¡ˆ</h3><p>æˆªæ­¢ 2017.1ï¼Œæœ€æµè¡Œçš„ç¤¾åŒº React åº”ç”¨æ¶æ„æ–¹æ¡ˆå¦‚ä¸‹ã€‚</p>
<ul>
<li>è·¯ç”±ï¼š React-Router</li>
<li>æ¶æ„ï¼š Redux</li>
<li>å¼‚æ­¥æ“ä½œï¼š Redux-saga</li>
</ul>
<p>ç¼ºç‚¹ï¼šè¦å¼•å…¥å¤šä¸ªåº“ï¼Œé¡¹ç›®ç»“æ„å¤æ‚ã€‚</p>
<h3 id="dva-æ˜¯ä»€ä¹ˆ"><a href="#dva-æ˜¯ä»€ä¹ˆ" class="headerlink" title="dva æ˜¯ä»€ä¹ˆ"></a>dva æ˜¯ä»€ä¹ˆ</h3><p>dva æ˜¯ä½“éªŒæŠ€æœ¯éƒ¨å¼€å‘çš„ React åº”ç”¨æ¡†æ¶ï¼Œå°†ä¸Šé¢ä¸‰ä¸ª React å·¥å…·åº“åŒ…è£…åœ¨ä¸€èµ·ï¼Œç®€åŒ–äº† APIï¼Œè®©å¼€å‘ React åº”ç”¨æ›´åŠ æ–¹ä¾¿å’Œå¿«æ·ã€‚<br>dva &#x3D; React-Router + Redux + Redux-saga</p>
<p>React åº”ç”¨çš„æ¶æ„<br><img src="https://www.daykalif.com/blog_img/jiagou.jpeg" alt="daykalif"></p>
<h4 id="dva-çš„è®¾è®¡æ€æƒ³"><a href="#dva-çš„è®¾è®¡æ€æƒ³" class="headerlink" title="dva çš„è®¾è®¡æ€æƒ³"></a>dva çš„è®¾è®¡æ€æƒ³</h4><p>åº”ç”¨çš„æ‹†åˆ†ï¼š</p>
<ul>
<li>è§†å›¾ï¼ˆviewï¼‰</li>
<li>é€»è¾‘ï¼ˆlogicï¼‰</li>
<li>çŠ¶æ€ï¼ˆstateï¼‰</li>
</ul>
<p>ä»¥ä¸Šä¸‰è€…å®Œå…¨åˆ†ç¦»ã€‚</p>
<p>è¿è¡Œè¿‡ç¨‹å¦‚ä¸‹ã€‚</p>
<ol>
<li>åˆå§‹çŠ¶æ€ &#x3D;&gt; åˆå§‹è§†å›¾</li>
<li>ç”¨æˆ·æµè§ˆè§†å›¾ &#x3D;&gt; ä¸šåŠ¡é€»è¾‘ç”Ÿæ•ˆ</li>
<li>ä¸šåŠ¡é€»è¾‘ &#x3D;&gt; çŠ¶æ€å˜åŒ–</li>
<li>çŠ¶æ€å˜åŒ– &#x3D;&gt; è§†å›¾å˜åŒ–</li>
</ol>
<h4 id="dva-çš„è¿è¡Œæ¨¡å‹"><a href="#dva-çš„è¿è¡Œæ¨¡å‹" class="headerlink" title="dva çš„è¿è¡Œæ¨¡å‹"></a>dva çš„è¿è¡Œæ¨¡å‹</h4><ol>
<li>dva æä¾›ä¸€ä¸ª Model å±‚ï¼Œä¿å­˜å…¨å±€çŠ¶æ€</li>
<li>ç»„ä»¶å‘é€æ¶ˆæ¯ç»™ Model</li>
<li>Model è°ƒç”¨ä¸šåŠ¡é€»è¾‘ï¼Œå¯¼è‡´ state å‘ç”Ÿå˜åŒ–ï¼Œè§¦å‘ UI å±‚é‡æ–°æ¸²æŸ“</li>
</ol>
<p>æ ¸å¿ƒæ¦‚å¿µå¦‚ä¸‹ã€‚</p>
<ul>
<li>Actionï¼šä¸€ä¸ªå¯¹è±¡ï¼Œæè¿° UI äº‹ä»¶</li>
<li>dispatch: ä¸€ä¸ªå‡½æ•°ï¼Œå‘é€ Action åˆ° State</li>
<li>Stateï¼šä¸€ä¸ªå¯¹è±¡ï¼Œä¿å­˜æ•´ä¸ªåº”ç”¨çŠ¶æ€</li>
<li>Viewï¼šReact ç»„ä»¶æ„æˆçš„è§†å›¾å±‚</li>
</ul>
<p>æœ€å¤§ç‰¹ç‚¹ï¼šæ•°æ®å•å‘æµåŠ¨ã€‚<br><img src="https://www.daykalif.com/blog_img/shujuliu.jpeg" alt="daykalif"></p>
<h3 id="dva-åº”ç”¨çš„æœ€ç®€ç»“æ„"><a href="#dva-åº”ç”¨çš„æœ€ç®€ç»“æ„" class="headerlink" title="dva åº”ç”¨çš„æœ€ç®€ç»“æ„"></a>dva åº”ç”¨çš„æœ€ç®€ç»“æ„</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> dva <span class="keyword">from</span> <span class="string">&quot;dva&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello dva<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºåº”ç”¨</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">dva</span>();</span><br><span class="line"><span class="comment">// æ³¨å†Œè§†å›¾</span></span><br><span class="line">app.<span class="title function_">router</span>(<span class="function">() =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>);</span><br><span class="line"><span class="comment">// å¯åŠ¨åº”ç”¨</span></span><br><span class="line">app.<span class="title function_">start</span>(<span class="string">&quot;#root&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="æ•°æ®æµå›¾"><a href="#æ•°æ®æµå›¾" class="headerlink" title="æ•°æ®æµå›¾"></a>æ•°æ®æµå›¾</h4><p><img src="https://www.daykalif.com/blog_img/shujuliu2.jpeg" alt="daykalif"></p>
<h4 id="æ ¸å¿ƒæ¦‚å¿µ"><a href="#æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="æ ¸å¿ƒæ¦‚å¿µ"></a>æ ¸å¿ƒæ¦‚å¿µ</h4><ul>
<li>Stateï¼šä¸€ä¸ªå¯¹è±¡ï¼Œä¿å­˜æ•´ä¸ªåº”ç”¨çŠ¶æ€</li>
<li>Viewï¼šReact ç»„ä»¶æ„æˆçš„è§†å›¾å±‚</li>
<li>Actionï¼šä¸€ä¸ªå¯¹è±¡ï¼Œæè¿°äº‹ä»¶</li>
<li>connect æ–¹æ³•ï¼šä¸€ä¸ªå‡½æ•°ï¼Œç»‘å®š State åˆ° View</li>
<li>dispatch æ–¹æ³•ï¼šä¸€ä¸ªå‡½æ•°ï¼Œå‘é€ Action åˆ° State</li>
</ul>
<p>State å’Œ View</p>
<p>State æ˜¯å‚¨å­˜æ•°æ®çš„åœ°æ–¹ï¼Œæ”¶åˆ° Action ä»¥åï¼Œä¼šæ›´æ–°æ•°æ®ã€‚</p>
<p>View å°±æ˜¯ React ç»„ä»¶æ„æˆçš„ UI å±‚ï¼Œä» State å–æ•°æ®åï¼Œæ¸²æŸ“æˆ HTML ä»£ç ã€‚åªè¦ State æœ‰å˜åŒ–ï¼ŒView å°±ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</p>
<p>Action</p>
<p>Action æ˜¯ç”¨æ¥æè¿° UI å±‚äº‹ä»¶çš„ä¸€ä¸ªå¯¹è±¡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;click-submit-button&#x27;</span>,</span><br><span class="line">  <span class="attr">payload</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">data</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>connect æ–¹æ³•</p>
<p>connect æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç»‘å®š State åˆ° Viewã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">&quot;dva&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">mapStateToProps</span>(<span class="params">state</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">todos</span>: state.<span class="property">todos</span> &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">connect</span>(mapStateToProps)(<span class="title class_">App</span>);</span><br></pre></td></tr></table></figure>

<p>connect æ–¹ æ³•è¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ª React ç»„ä»¶ï¼Œé€šå¸¸ç§°ä¸ºå®¹å™¨ç»„ä»¶ã€‚å› ä¸ºå®ƒæ˜¯åŸå§‹ UI ç»„ä»¶çš„å®¹å™¨ï¼Œå³åœ¨å¤–é¢åŒ…äº†ä¸€å±‚ Stateã€‚</p>
<p>connect æ–¹æ³•ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ mapStateToProps å‡½æ•°ï¼ŒmapStateToProps å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºå»ºç«‹ State åˆ° Props çš„æ˜ å°„å…³ç³»ã€‚</p>
<h4 id="dispatch-æ–¹æ³•"><a href="#dispatch-æ–¹æ³•" class="headerlink" title="dispatch æ–¹æ³•"></a>dispatch æ–¹æ³•</h4><p>dispatch æ˜¯ä¸€ä¸ªå‡½æ•°æ–¹æ³•ï¼Œç”¨æ¥å°† Action å‘é€ç»™ Stateã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">dispatch</span>(&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&quot;click-submit-button&quot;</span>,</span><br><span class="line">  <span class="attr">payload</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">data</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>dispatch æ–¹æ³•ä»å“ªé‡Œæ¥ï¼Ÿè¢« connect çš„ Component ä¼šè‡ªåŠ¨åœ¨ props ä¸­æ‹¥æœ‰ dispatch æ–¹æ³•ã€‚</p>
<blockquote>
<p>connect çš„æ•°æ®ä»å“ªé‡Œæ¥?</p>
</blockquote>
<p>dva åº”ç”¨çš„æœ€ç®€ç»“æ„ï¼ˆå¸¦ model)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºåº”ç”¨</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">dva</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨å†Œ Model</span></span><br><span class="line">app.<span class="title function_">model</span>(&#123;</span><br><span class="line">  <span class="attr">namespace</span>: <span class="string">&quot;count&quot;</span>,</span><br><span class="line">  <span class="attr">state</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">reducers</span>: &#123;</span><br><span class="line">    <span class="title function_">add</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> state + <span class="number">1</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">effects</span>: &#123;</span><br><span class="line">    *<span class="title function_">addAfter1Second</span>(<span class="params">action, &#123; call, put &#125;</span>) &#123;</span><br><span class="line">      <span class="keyword">yield</span> <span class="title function_">call</span>(delay, <span class="number">1000</span>);</span><br><span class="line">      <span class="keyword">yield</span> <span class="title function_">put</span>(&#123; <span class="attr">type</span>: <span class="string">&quot;add&quot;</span> &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨å†Œè§†å›¾</span></span><br><span class="line">app.<span class="title function_">router</span>(<span class="function">() =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">ConnectedApp</span> /&gt;</span></span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯åŠ¨åº”ç”¨</span></span><br><span class="line">app.<span class="title function_">start</span>(<span class="string">&quot;#root&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="æ•°æ®æµå›¾-1-æ•°æ®æµå›¾-2"><a href="#æ•°æ®æµå›¾-1-æ•°æ®æµå›¾-2" class="headerlink" title="æ•°æ®æµå›¾ 1 &amp; æ•°æ®æµå›¾ 2"></a>æ•°æ®æµå›¾ 1 &amp; æ•°æ®æµå›¾ 2</h4><p><img src="https://www.daykalif.com/blog_img/shujuliu3.jpeg" alt="daykalif"></p>
<p>app.model</p>
<p>dva æä¾› app.model è¿™ä¸ªå¯¹è±¡ï¼Œæ‰€æœ‰çš„åº”ç”¨é€»è¾‘éƒ½å®šä¹‰åœ¨å®ƒä¸Šé¢ã€‚å…·æœ‰æ¶ˆæ¯ä¸­å¿ƒã€çŠ¶æ€ä¿å­˜ã€å®šä¹‰åº”ç”¨é€»è¾‘ç­‰åŠŸèƒ½ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="title function_">dva</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–°å¢è¿™ä¸€è¡Œ</span></span><br><span class="line">app.<span class="title function_">model</span>(&#123; <span class="regexp">/\*\*/</span> &#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">router</span>(<span class="function">() =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>);</span><br><span class="line">app.<span class="title function_">start</span>(<span class="string">&#x27;#root&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>Model å¯¹è±¡çš„ä¾‹å­</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">namespace</span>: <span class="string">&#x27;count&#x27;</span>,</span><br><span class="line">  <span class="attr">state</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">reducers</span>: &#123;</span><br><span class="line">  <span class="title function_">add</span>(<span class="params">state</span>) &#123; <span class="keyword">return</span> state + <span class="number">1</span> &#125;,</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">effects</span>: &#123;</span><br><span class="line">  *<span class="title function_">addAfter1Second</span>(<span class="params">action, &#123; call, put &#125;</span>) &#123;</span><br><span class="line">      <span class="keyword">yield</span> <span class="title function_">call</span>(delay, <span class="number">1000</span>);</span><br><span class="line">      <span class="keyword">yield</span> <span class="title function_">put</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;add&#x27;</span> &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Model-å¯¹è±¡çš„å±æ€§"><a href="#Model-å¯¹è±¡çš„å±æ€§" class="headerlink" title="Model å¯¹è±¡çš„å±æ€§"></a>Model å¯¹è±¡çš„å±æ€§</h3><ul>
<li>namespace: å½“å‰ Model çš„åç§°ã€‚æ•´ä¸ªåº”ç”¨çš„ Stateï¼Œç”±å¤šä¸ªå°çš„ Model çš„ State ä»¥ namespace ä¸º key åˆæˆ</li>
<li>state: è¯¥ Model å½“å‰çš„çŠ¶æ€ã€‚æ•°æ®ä¿å­˜åœ¨è¿™é‡Œï¼Œç›´æ¥å†³å®šäº†è§†å›¾å±‚çš„è¾“å‡º</li>
<li>reducer: Action å¤„ç†å™¨ï¼Œå¤„ç†åŒæ­¥åŠ¨ä½œï¼Œç”¨æ¥ç®—å‡ºæœ€æ–°çš„ State</li>
<li>effectsï¼šAction å¤„ç†å™¨ï¼Œå¤„ç†å¼‚æ­¥åŠ¨ä½œ</li>
</ul>
<h4 id="Reducer"><a href="#Reducer" class="headerlink" title="Reducer"></a>Reducer</h4><p>Reducer æ˜¯ Action å¤„ç†å™¨ï¼Œç”¨æ¥å¤„ç†åŒæ­¥æ“ä½œï¼Œå¯ä»¥çœ‹åšæ˜¯ state çš„è®¡ç®—å™¨ã€‚å®ƒçš„ä½œç”¨æ˜¯æ ¹æ® Actionï¼Œä»ä¸Šä¸€ä¸ª State ç®—å‡ºå½“å‰ Stateã€‚</p>
<p>ä¸€äº›ä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// count +1</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">state</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> state + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¾€ [] é‡Œæ·»åŠ ä¸€ä¸ªæ–° todo</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">addTodo</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> [...state, action.<span class="property">payload</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¾€ &#123; todos: [], loading: true &#125; é‡Œæ·»åŠ ä¸€ä¸ªæ–° todoï¼Œå¹¶æ ‡è®° loading ä¸º false</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">addTodo</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    ...state,</span><br><span class="line">    <span class="attr">todos</span>: state.<span class="property">todos</span>.<span class="title function_">concat</span>(action.<span class="property">payload</span>),</span><br><span class="line">    <span class="attr">loading</span>: <span class="literal">false</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Effect"><a href="#Effect" class="headerlink" title="Effect"></a>Effect</h4><p>Action å¤„ç†å™¨ï¼Œå¤„ç†å¼‚æ­¥åŠ¨ä½œï¼ŒåŸºäº Redux-saga å®ç°ã€‚Effect æŒ‡çš„æ˜¯å‰¯ä½œç”¨ã€‚æ ¹æ®å‡½æ•°å¼ç¼–ç¨‹ï¼Œè®¡ç®—ä»¥å¤–çš„æ“ä½œéƒ½å±äº Effectï¼Œå…¸å‹çš„å°±æ˜¯ I&#x2F;O æ“ä½œã€æ•°æ®åº“è¯»å†™ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> \*<span class="title function_">addAfter1Second</span>(<span class="params">action, &#123; put, call &#125;</span>) &#123;</span><br><span class="line"><span class="keyword">yield</span> <span class="title function_">call</span>(delay, <span class="number">1000</span>);</span><br><span class="line"><span class="keyword">yield</span> <span class="title function_">put</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;add&#x27;</span> &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Generator-å‡½æ•°"><a href="#Generator-å‡½æ•°" class="headerlink" title="Generator å‡½æ•°"></a>Generator å‡½æ•°</h4><p>Effect æ˜¯ä¸€ä¸ª Generator å‡½æ•°ï¼Œå†…éƒ¨ä½¿ç”¨ yield å…³é”®å­—ï¼Œæ ‡è¯†æ¯ä¸€æ­¥çš„æ“ä½œï¼ˆä¸ç®¡æ˜¯å¼‚æ­¥æˆ–åŒæ­¥ï¼‰ã€‚</p>
<h4 id="call-å’Œ-put"><a href="#call-å’Œ-put" class="headerlink" title="call å’Œ put"></a>call å’Œ put</h4><p>dva æä¾›å¤šä¸ª effect å‡½æ•°å†…éƒ¨çš„å¤„ç†å‡½æ•°ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æ˜¯ call å’Œ putã€‚</p>
<ul>
<li>callï¼šæ‰§è¡Œå¼‚æ­¥å‡½æ•°</li>
<li>putï¼šå‘å‡ºä¸€ä¸ª Actionï¼Œç±»ä¼¼äº dispatch</li>
</ul>
<h3 id="dva-æœ€å°ç¤ºä¾‹-count-count-â€“"><a href="#dva-æœ€å°ç¤ºä¾‹-count-count-â€“" class="headerlink" title="dva æœ€å°ç¤ºä¾‹:count ++,count â€“"></a>dva æœ€å°ç¤ºä¾‹:count ++,count â€“</h3><blockquote>
<p><a href="https://riddle.alibaba-inc.com/riddles/c7c1afab">https://riddle.alibaba-inc.com/riddles/c7c1afab</a></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> dva, &#123; connect &#125; <span class="keyword">from</span> <span class="string">&#x27;dva&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Router</span>, <span class="title class_">Route</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;dva/router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åº”ç”¨åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">// app å°±ä»£è¡¨å‰ç«¯åº”ç”¨</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">dva</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å»ºç«‹ Model</span></span><br><span class="line">app.<span class="title function_">model</span>(&#123;</span><br><span class="line"><span class="comment">// ä¸€ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ªæ€»çš„ Modelï¼Œä½†å¯ä»¥åˆ†æˆå¤šä¸ªå­ Model</span></span><br><span class="line"><span class="comment">// namespace æ˜¯å­ Model çš„åå­—</span></span><br><span class="line"><span class="attr">namespace</span>: <span class="string">&#x27;counter&#x27;</span>,</span><br><span class="line"><span class="comment">// åº”ç”¨çš„å†…éƒ¨çŠ¶æ€</span></span><br><span class="line"><span class="attr">state</span>: &#123;<span class="attr">num</span>: <span class="number">0</span>&#125;,</span><br><span class="line"><span class="comment">// åŒæ­¥ action å¤„ç†å™¨</span></span><br><span class="line"><span class="comment">// æ–¹æ³•åå°±æ˜¯ action çš„åå­—</span></span><br><span class="line"><span class="attr">reducers</span>: &#123;</span><br><span class="line"><span class="title function_">add</span>(<span class="params">counterState</span>) &#123; <span class="keyword">return</span> &#123;<span class="attr">num</span>: (counterState.<span class="property">num</span> + <span class="number">1</span>)&#125;; &#125;,</span><br><span class="line"><span class="title function_">minus</span>(<span class="params">counterState</span>) &#123; <span class="keyword">return</span> &#123;<span class="attr">num</span>: (counterState.<span class="property">num</span> - <span class="number">1</span>)&#125;; &#125;,</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// å¼‚æ­¥ action å¤„ç†å™¨</span></span><br><span class="line"><span class="comment">// æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯ Generator å‡½æ•°</span></span><br><span class="line"><span class="comment">// æœ¬ä¾‹æ²¡æœ‰ç”¨åˆ°</span></span><br><span class="line"><span class="attr">effects</span>: &#123;</span><br><span class="line"> \*<span class="title function_">add</span>(<span class="params">action, &#123; put, call &#125;</span>) &#123;</span><br><span class="line"><span class="keyword">yield</span> <span class="title function_">call</span>(delay, <span class="number">1000</span>);</span><br><span class="line"><span class="keyword">yield</span> <span class="title function_">put</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;minus&#x27;</span> &#125;);</span><br><span class="line">&#125;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°† Model çš„ state ç»‘å®šåˆ° View</span></span><br><span class="line"><span class="comment">// connect(state =&gt; props)(view)</span></span><br><span class="line"><span class="keyword">const</span> view = <span class="title function_">connect</span>(</span><br><span class="line"><span class="function">(<span class="params">state</span>) =&gt;</span> (&#123; <span class="attr">num</span>: state.<span class="property">counter</span>.<span class="property">num</span> &#125;)</span><br><span class="line">)(<span class="keyword">function</span> (<span class="params">props</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123; props.num &#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">key</span>=<span class="string">&quot;add&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">() =&gt;</span> &#123; props.dispatch(&#123; type: &#x27;counter/add&#x27; &#125;); &#125;&#125; &gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">key</span>=<span class="string">&quot;minus&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">() =&gt;</span> &#123; props.dispatch(&#123; type: &#x27;counter/minus&#x27; &#125;); &#125;&#125; &gt;-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·¯ç”±</span></span><br><span class="line"><span class="comment">// URL ä¸å¸¦æœ‰å‚æ•°æ—¶ï¼ŒåŠ è½½ view ç»„ä»¶</span></span><br><span class="line">app.<span class="title function_">router</span>(<span class="function">(<span class="params">&#123; history &#125;</span>) =&gt;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Router</span> <span class="attr">history</span>=<span class="string">&#123;history&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span> <span class="attr">component</span>=<span class="string">&#123;view&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">Router</span>&gt;</span></span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯åŠ¨åº”ç”¨</span></span><br><span class="line">app.<span class="title function_">start</span>(<span class="string">&#x27;#mountNode&#x27;</span>);</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://daykalif.github.io/2023/01/31/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E3%80%90%E6%90%AC%E3%80%91setTimeout%E8%BD%ACsetInterval/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Daykalif">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/01/31/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E3%80%90%E6%90%AC%E3%80%91setTimeout%E8%BD%ACsetInterval/" itemprop="url">ã€æ¬ã€‘setTimeoutè½¬setInterval</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-01-31T21:26:36+08:00">
                2023-01-31
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2023/01/31/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E3%80%90%E6%90%AC%E3%80%91setTimeout%E8%BD%ACsetInterval/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2023/01/31/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E3%80%90%E6%90%AC%E3%80%91setTimeout%E8%BD%ACsetInterval/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2023/01/31/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E3%80%90%E6%90%AC%E3%80%91setTimeout%E8%BD%ACsetInterval/" class="leancloud_visitors" data-flag-title="ã€æ¬ã€‘setTimeoutè½¬setInterval">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  27
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(i++);</span><br><span class="line">  <span class="title function_">func</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">setTimeout</span>(fun, <span class="number">100</span>);</span><br></pre></td></tr></table></figure>

<p>æˆ–</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(i++);</span><br><span class="line">  <span class="built_in">setTimeout</span>(fun, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">func</span>();</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://daykalif.github.io/2023/01/31/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E3%80%90%E8%88%AC%E3%80%91%E9%98%B2%E6%8A%96%E5%92%8C%E8%8A%82%E6%B5%81%E7%9A%84%E5%8C%BA%E5%88%AB%E5%8F%8A%E4%BD%9C%E7%94%A8%EF%BC%8C%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E4%B8%8E%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Daykalif">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/01/31/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E3%80%90%E8%88%AC%E3%80%91%E9%98%B2%E6%8A%96%E5%92%8C%E8%8A%82%E6%B5%81%E7%9A%84%E5%8C%BA%E5%88%AB%E5%8F%8A%E4%BD%9C%E7%94%A8%EF%BC%8C%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E4%B8%8E%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/" itemprop="url">ã€èˆ¬ã€‘é˜²æŠ–å’ŒèŠ‚æµçš„åŒºåˆ«åŠä½œç”¨ï¼Œå®ç°åŸç†ä¸åº”ç”¨åœºæ™¯</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-01-31T21:12:26+08:00">
                2023-01-31
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2023/01/31/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E3%80%90%E8%88%AC%E3%80%91%E9%98%B2%E6%8A%96%E5%92%8C%E8%8A%82%E6%B5%81%E7%9A%84%E5%8C%BA%E5%88%AB%E5%8F%8A%E4%BD%9C%E7%94%A8%EF%BC%8C%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E4%B8%8E%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2023/01/31/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E3%80%90%E8%88%AC%E3%80%91%E9%98%B2%E6%8A%96%E5%92%8C%E8%8A%82%E6%B5%81%E7%9A%84%E5%8C%BA%E5%88%AB%E5%8F%8A%E4%BD%9C%E7%94%A8%EF%BC%8C%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E4%B8%8E%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2023/01/31/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E3%80%90%E8%88%AC%E3%80%91%E9%98%B2%E6%8A%96%E5%92%8C%E8%8A%82%E6%B5%81%E7%9A%84%E5%8C%BA%E5%88%AB%E5%8F%8A%E4%BD%9C%E7%94%A8%EF%BC%8C%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E4%B8%8E%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/" class="leancloud_visitors" data-flag-title="ã€èˆ¬ã€‘é˜²æŠ–å’ŒèŠ‚æµçš„åŒºåˆ«åŠä½œç”¨ï¼Œå®ç°åŸç†ä¸åº”ç”¨åœºæ™¯">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  1.3k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  6
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="é˜²æŠ–å’ŒèŠ‚æµæœ‰ä»€ä¹ˆç”¨ï¼Ÿ"><a href="#é˜²æŠ–å’ŒèŠ‚æµæœ‰ä»€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="é˜²æŠ–å’ŒèŠ‚æµæœ‰ä»€ä¹ˆç”¨ï¼Ÿ"></a>é˜²æŠ–å’ŒèŠ‚æµæœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h2><p>ç®€å•æ¥è¯´ï¼Œé˜²æŠ–å’ŒèŠ‚æµéƒ½æ˜¯ç”¨æ¥å‡å°‘å‡½æ•°æ‰§è¡Œçš„é¢‘ç‡ï¼Œä»¥è¾¾åˆ°ä¼˜åŒ–é¡¹ç›®æ€§èƒ½æˆ–è€…å®ç°ç‰¹å®šåŠŸèƒ½çš„æ•ˆæœ</p>
<h3 id="ä¸€ã€é˜²æŠ–"><a href="#ä¸€ã€é˜²æŠ–" class="headerlink" title="ä¸€ã€é˜²æŠ–"></a>ä¸€ã€é˜²æŠ–</h3><p>å®šä¹‰ï¼šäº‹ä»¶è¢«è§¦å‘ä¸€å®šæ—¶é—´åå†æ‰§è¡Œå›è°ƒã€‚å¦‚æœåœ¨è¿™æ®µæ—¶é—´å†…åˆè¢«è§¦å‘äº†ï¼Œåˆ™é‡æ–°å¼€å§‹è®¡ç®—æ—¶é—´</p>
<h4 id="å¸¸ç”¨åœºæ™¯"><a href="#å¸¸ç”¨åœºæ™¯" class="headerlink" title="å¸¸ç”¨åœºæ™¯"></a>å¸¸ç”¨åœºæ™¯</h4><ul>
<li>è¾“å…¥æ¡†è¿œç¨‹æŸ¥è¯¢äº‹ä»¶</li>
<li>åœ¨çº¿æ–‡æ¡£è‡ªåŠ¨ä¿å­˜</li>
<li>æµè§ˆå™¨è§†å£å¤§å°æ”¹å˜<br>ä¾‹å­<br>å¼ ä¸‰åœ¨æŸå¹³å°æœç´¢ä¸€æœ¬ä¹¦ç±ï¼Œå‘ç°æœç´¢å»ºè®®å¹¶ä¸æ˜¯ç¬é—´å°±å‡ºç°çš„ï¼Œè€Œæ˜¯è‡ªå·±è¾“å…¥è¯ç»„ç»“æŸåå‡ºç°çš„ã€‚é‚£ä¹ˆè¯¥å¹³å°åœ¨æ­¤æœç´¢æ¡†å¯èƒ½åšäº†ä»€ä¹ˆæ“ä½œï¼Ÿ<br>ä»£ç å®ç°</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;searchElement&quot;</span> /&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> searchElement = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;searchElement&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> <span class="title function_">debounce</span> = (<span class="params">fn, initial</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> timer = <span class="literal">null</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="built_in">clearTimeout</span>(timer);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      timer = <span class="built_in">setTimeout</span>(fn, initial);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">searchElement.<span class="property">oninput</span> = <span class="title function_">debounce</span>(<span class="keyword">function</span> (<span class="params">event</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> value = searchElement.<span class="property">value</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">if</span> (value) <span class="variable language_">console</span>.<span class="title function_">log</span>(value, <span class="string">&#x27;è¯·æ±‚å€¼&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;, <span class="number">1000</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">timer = <span class="literal">null</span>;</span><br><span class="line"><span class="built_in">clearTimeout</span>;</span><br><span class="line">timer = 1s åæ‰§è¡Œå‡½æ•°;</span><br><span class="line"></span><br><span class="line"><span class="number">0.</span>5s åæ‰‹åŠ¨è§¦å‘ input äº‹ä»¶</span><br><span class="line"></span><br><span class="line">timer !== <span class="literal">null</span>;</span><br><span class="line"><span class="built_in">clearTimeout</span>;</span><br><span class="line">timer = é‡æ–°è®¡ç®—æ—¶é—´ï¼Œè¿‡ 1s åæ‰§è¡Œå‡½æ•°;</span><br></pre></td></tr></table></figure>

<h3 id="äºŒã€èŠ‚æµ"><a href="#äºŒã€èŠ‚æµ" class="headerlink" title="äºŒã€èŠ‚æµ"></a>äºŒã€èŠ‚æµ</h3><p>å®šä¹‰ï¼šåœ¨å•ä½æ—¶é—´å†…åªè§¦å‘ä¸€æ¬¡å‡½æ•°ï¼Œè‹¥å•ä½æ—¶é—´å†…å¤šæ¬¡è§¦å‘åªæœ‰ä¸€æ¬¡ç”Ÿæ•ˆ<br>å¸¸ç”¨åœºæ™¯</p>
<ul>
<li>æŒ‰é’®æäº¤äº‹ä»¶ï¼ˆå½“ç„¶ä¹Ÿå¯åšæˆç‚¹å‡»åå°± loadingï¼‰</li>
<li>é¡µé¢æ»šåŠ¨äº‹ä»¶çš„è§¦å‘</li>
<li>ç´¯è®¡è®¡ç®—é¼ æ ‡ç§»åŠ¨è·ç¦»</li>
</ul>
<p><strong>ä¾‹å­</strong><br>å¼ ä¸‰å‚åŠ æŸå¹³å°å‘¨å¹´åº†æ´»åŠ¨ï¼Œä»–é€‰è´­äº†æŸçƒ­é—¨é¥®å“å¹¶ä¸€ç›´ç‚¹å‡»æŠ¢è´­æŒ‰é’®ï¼Œå´å‘ç°å¹¶ä¸æ˜¯æ¯æ¬¡ç‚¹å‡»éƒ½ä¼šæœ‰å“åº”çš„ã€‚é‚£ä¹ˆè¯¥å¹³å°å‰ç«¯å¯èƒ½åšäº†ä»€ä¹ˆé™åˆ¶ï¼Ÿ<br>ä»£ç å®ç°</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">id</span>=<span class="string">&quot;buttonElement&quot;</span>&gt;</span>æŠ¢è´­<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">fn, interval</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> timer;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">if</span> (timer) <span class="keyword">return</span> <span class="literal">false</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="built_in">clearTimeout</span>(timer);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        timer = <span class="literal">null</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">fn</span>(event);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;, interval);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> btnClick = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;buttonElement&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">btnClick.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="title function_">throttle</span>(<span class="keyword">function</span> (<span class="params">event</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(event, <span class="string">&#x27;ç‚¹å‡»äº†&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;, <span class="number">1000</span>));</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œå¼ ä¸‰ç–¯ç‹‚ç‚¹å‡»æŠ¢è´­ï¼Œä½†è¿˜æ˜¯æ¯ç§’åªå“åº” 1 æ¬¡<br>èŠ‚æµ(ç«‹å³æ‰§è¡Œ)<br>ä¸Šé¢è¿™ä¸ªä»£ç æœ‰ä¸ªå¼Šç«¯ï¼Œé‚£å°±æ˜¯åœ¨å¼ ä¸‰ç¬¬ä¸€æ¬¡ç‚¹å‡»çš„æ—¶å€™ä¹Ÿéš”äº† 1 ç§’æ‰å“åº”ï¼Œè¿™ä¸å…ä¹Ÿå¤ªå‘äº†ã€‚æ­£å¸¸æ¥è¯´ç¬¬ä¸€æ¬¡åº”è¯¥ç›´æ¥å“åº”çš„ï¼Œå¹¶ä¸”åœ¨è¿ç»­ç‚¹å‡»ç»“æŸåçš„ç¬¬ä¸€æ¬¡ä¹Ÿåº”è¯¥ç«‹å³è§¦å‘ï¼Œå…¶å®æƒ³å®ç°è¿™æ ·çš„æ•ˆæœä¹Ÿä¸éš¾</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">id</span>=<span class="string">&quot;buttonElement&quot;</span>&gt;</span>æŠ¢è´­<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">function</span> <span class="title function_">throttle2</span>(<span class="params">fn, interval</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">let</span> init = <span class="literal">false</span>; <span class="comment">// å¼•å…¥ä¸€ä¸ªå‚æ•°è®°å½•çŠ¶æ€</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">let</span> timer;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">if</span> (init) <span class="keyword">return</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          init = <span class="literal">true</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="built_in">clearTimeout</span>(timer);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              init = <span class="literal">false</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;, interval);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="title function_">fn</span>(event);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> btnClick = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;buttonElement&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">btnClick.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="title function_">throttle2</span>(<span class="keyword">function</span> (<span class="params">event</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(event, <span class="string">&#x27;ç‚¹å‡»äº†&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;, <span class="number">2000</span>));</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ç¬¬ä¸€æ¬¡ç‚¹å‡»ç›´æ¥æ‰“å°ï¼Œç¬¬äºŒæ¬¡ç–¯ç‹‚ç‚¹å‡»åªæ‰“å°ä¸€æ¬¡ï¼Œæœ€åä¸€æ¬¡ç‚¹å‡»ä¹Ÿæ˜¯ç›´æ¥æ‰“å°</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">coloring</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> r = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">255</span>);</span><br><span class="line">      <span class="keyword">let</span> g = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">255</span>);</span><br><span class="line">      <span class="keyword">let</span> b = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">255</span>);</span><br><span class="line">      <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">background</span> = <span class="string">`rgb(<span class="subst">$&#123;r&#125;</span>,<span class="subst">$&#123;g&#125;</span>,<span class="subst">$&#123;b&#125;</span>)`</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">func, delay</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> timer;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> context = <span class="variable language_">this</span>;</span><br><span class="line">        <span class="keyword">let</span> args = <span class="variable language_">arguments</span>;</span><br><span class="line">        <span class="keyword">if</span> (timer) &#123;</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">          func.<span class="title function_">apply</span>(context, args);</span><br><span class="line">          timer = <span class="literal">null</span>;</span><br><span class="line">        &#125;, delay);</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;resize&quot;</span>, <span class="title function_">throttle</span>(coloring, <span class="number">2000</span>));</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">coloring</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> r = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">255</span>);</span><br><span class="line">    <span class="keyword">let</span> g = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">255</span>);</span><br><span class="line">    <span class="keyword">let</span> b = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">255</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">background</span> = <span class="string">`rgb(<span class="subst">$&#123;r&#125;</span>,<span class="subst">$&#123;g&#125;</span>,<span class="subst">$&#123;b&#125;</span>)`</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">func, delay</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> pre = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> context = <span class="variable language_">this</span>;</span><br><span class="line">      <span class="keyword">let</span> args = <span class="variable language_">arguments</span>;</span><br><span class="line">      <span class="keyword">let</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">      <span class="keyword">if</span> (now - pre &gt; delay) &#123;</span><br><span class="line">        func.<span class="title function_">apply</span>(context, args);</span><br><span class="line">        pre = now;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;resize&quot;</span>, <span class="title function_">throttle</span>(coloring, <span class="number">2000</span>));</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>âš ï¸ æ³¨æ„ï¼š<br>åœ¨è®¾å®šé˜²æŠ–å‡½æ•°çš„æ—¶å€™ï¼Œæ²¡æœ‰å‡ºç°é¢„æœŸä¸­çš„é™åˆ¶å‡½æ•°æ‰§è¡Œæ¬¡æ•°çš„æ•ˆæœã€‚<br>é˜²æŠ–å‡½æ•°ä¸€å¼€å§‹å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">debounce</span>(<span class="params"> fn,delay</span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    timer = <span class="literal">null</span></span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(fn,delay)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŸå› å‡ºåœ¨é—­åŒ…é‡Œæ¸…é™¤ timer çš„æ—¶å€™ç”¨çš„æ˜¯ timer&#x3D;nullï¼Œè€Œä¸æ˜¯ clearTimeout(timer)å‡½æ•°ã€‚<br>å› ä¸ºåœ¨ç”¨ timer&#x3D;null çš„æ—¶å€™ï¼Œåªæ˜¯æ”¹å˜äº† timer çš„æŒ‡å‘ï¼Œå¹¶æ²¡æœ‰æ¸…é™¤æ‰å®šæ—¶å™¨ï¼Œæ­¤æ—¶å®šæ—¶å™¨åœ¨å†…å­˜ä¸­è™½ç„¶æ²¡æœ‰å˜é‡æŒ‡å‘å®ƒï¼Œä½†å®ƒä»å­˜åœ¨å†…å­˜ä¸­ï¼Œå¾… delay æ—¶é—´ä¸€åˆ°ï¼Œå°±æ‰§è¡Œ fn å‡½æ•°ã€‚æ‰€ä»¥å½“ fn ç»è¿‡é˜²æŠ–å‡½æ•°é™åˆ¶åï¼Œåœ¨ delay æ—¶é—´å†…è°ƒç”¨å¤šå°‘æ¬¡ fn å‡½æ•°ï¼Œå°±ä¼šæœ‰å¤šå°‘æ¬¡çš„å®šæ—¶å™¨å­˜åœ¨å†…å­˜ä¸­ï¼Œå°±ä¼šæ‰§è¡Œå¤šå°‘æ­¤ fn å‡½æ•°ï¼Œå¹¶ä¸èƒ½å®ç°é¢„æœŸä¸­çš„åœ¨ delay æ—¶é—´å†…åªæ‰§è¡Œä¸€æ¬¡ fn å‡½æ•°ã€‚<br>clearTimeout(timer)æ˜¯åœ¨å†…å­˜ä¸­æ¸…é™¤æ‰å®šæ—¶å™¨ï¼Œæ‰€ä»¥åœ¨ delay æ—¶é—´å†…ï¼Œæ— è®ºæ‰§è¡Œ fn å¤šå°‘æ¬¡ï¼Œéƒ½åªä¼šæœ‰ä¸€ä¸ªå®šæ—¶å™¨å­˜åœ¨<br>é˜²æŠ–å‡½æ•°æ­£ç¡®å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">debounce</span>(<span class="params"> fn,delay</span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(timer) <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(fn,delay)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸‰ã€å¼•å…¥ Lodash å®ç°<br>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://www.lodashjs.com/">https://www.lodashjs.com/</a></p>
<p>é˜²æŠ–</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&quot;lodash&quot;</span>;</span><br><span class="line"><span class="attr">debounceHandle</span>: _.<span class="title function_">debounce</span>(</span><br><span class="line">  <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ä¸šåŠ¡ä»£ç &quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="number">2000</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">// åœ¨ n æ¯«ç§’å†…è§¦å‘</span></span><br><span class="line">    <span class="attr">leading</span>: <span class="literal">true</span>, <span class="comment">// ç¬¬ä¸€æ¬¡ç‚¹å‡»ç«‹åˆ»æ‰§è¡Œï¼Œé»˜è®¤ä¸º true</span></span><br><span class="line">    <span class="attr">trailing</span>: <span class="literal">true</span>, <span class="comment">// èŠ‚æµç»“æŸåç«‹åˆ»æ‰§è¡Œï¼Œé»˜è®¤ä¸º true</span></span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>èŠ‚æµ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&quot;lodash&quot;</span>;</span><br><span class="line"><span class="attr">throttleHandle</span>: _.<span class="title function_">throttle</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ä¸šåŠ¡ä»£ç &quot;</span>);</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://daykalif.github.io/2023/01/31/%E6%89%A9%E5%B1%95%E7%9F%A5%E8%AF%86/%E3%80%90%E6%90%AC%E3%80%91%E4%BA%94%E7%AC%94%E8%BE%93%E5%85%A5%E6%B3%95-%E5%85%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Daykalif">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/01/31/%E6%89%A9%E5%B1%95%E7%9F%A5%E8%AF%86/%E3%80%90%E6%90%AC%E3%80%91%E4%BA%94%E7%AC%94%E8%BE%93%E5%85%A5%E6%B3%95-%E5%85%A8/" itemprop="url">äº”ç¬”è¾“å…¥æ³•</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2023-01-31T20:46:42+08:00">
                2023-01-31
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2023/01/31/%E6%89%A9%E5%B1%95%E7%9F%A5%E8%AF%86/%E3%80%90%E6%90%AC%E3%80%91%E4%BA%94%E7%AC%94%E8%BE%93%E5%85%A5%E6%B3%95-%E5%85%A8/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2023/01/31/%E6%89%A9%E5%B1%95%E7%9F%A5%E8%AF%86/%E3%80%90%E6%90%AC%E3%80%91%E4%BA%94%E7%AC%94%E8%BE%93%E5%85%A5%E6%B3%95-%E5%85%A8/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2023/01/31/%E6%89%A9%E5%B1%95%E7%9F%A5%E8%AF%86/%E3%80%90%E6%90%AC%E3%80%91%E4%BA%94%E7%AC%94%E8%BE%93%E5%85%A5%E6%B3%95-%E5%85%A8/" class="leancloud_visitors" data-flag-title="äº”ç¬”è¾“å…¥æ³•">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  5k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  18
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æ±‰å­æœ‰äº”ç§åŸºæœ¬ç»“æ„ï¼š</p>
<ul>
<li>ä¸€ã€å·¦å³å‹ï¼šç¾½ æ±‰ ç‹¬ ä½“ æ ‘</li>
<li>äºŒã€ä¸Šä¸‹å‹ï¼šæ³‰ å­— å…¨ å“ å¤</li>
<li>ä¸‰ã€ç‹¬ä½“å­—ï¼šæœ¬ äº” å­ å·² ç‹</li>
<li>å››ã€åŠåŒ…å›´ï¼šè¿™ åŒ… åŒ åŒº å‡¶</li>
<li>äº”ã€å…¨åŒ…å›´ï¼šå›´ å›  å›° å› åœ†</li>
</ul>
<p>äº”ç¬”ä¸­åªæœ‰ä¸‰ç§ç»“æ„ï¼Œå…¶ä¸­â€œå·¦å³å‹â€å’Œâ€œä¸Šä¸‹å‹â€åŒä¸Šï¼Œ<br>è€Œ 3ï¼Œ4ï¼Œ5 å‡å±äºâ€œæ‚åˆå‹â€ã€‚</p>
<p>ç¬”ç”»ï¼ˆç¬”åˆ’ï¼‰ï¼š</p>
<ul>
<li>å®šä¹‰ï¼šä¸€æ¬¡ä¸é—´æ–­è¿ç»­å†™æˆçš„ä¸€ä¸ªçº¿æ¡ç§°ä¸ºç¬”ç”»ã€‚</li>
<li>æ”µ vs å¤‚</li>
</ul>
<p>æ±‰å­æœ‰äº”ç§åŸºæœ¬ç¬”ç”»ï¼š</p>
<ul>
<li>æ¨ª ç«– æ’‡ æº æŠ˜</li>
<li>ä¸€ ä¸¨ ä¸¿ ä¸¶ ä¹™ä¹šğ ƒŒä¹›âº„</li>
</ul>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>æï¼Œå±äºæ¨ªï¼›ç‚¹ï¼Œå±äºæºã€‚ ï¼ˆåœŸ&#x2F;åœ° æ–‡ï¼‰</li>
<li>å·¦ç«–é’©ï¼Œå±äºç«–ã€‚ ï¼ˆæœ¨&#x2F;æ¡&#x2F;æ€ï¼‰</li>
<li>é™¤å·¦ç«–é’©å¤–ä»»ä½•å¸¦æ‹å¼¯çš„ç¬”ç”»éƒ½å±äºæŠ˜ã€‚ ï¼ˆå·²&#x2F;ä¹&#x2F;åˆ€&#x2F;åŒ•&#x2F;å·±ï¼‰</li>
<li>æœ‰çš„ç‚¹çš„æ–¹å‘æ˜¯æœå·¦çš„ï¼Œä¸è¦è¯¯è®¤ä¸ºæ˜¯æ’‡ã€‚ï¼ˆå®€&#x2F;åˆƒ&#x2F;å¿ƒï¼‰</li>
</ul>
<p>å­—æ ¹ï¼š<br>å®šä¹‰ï¼šç”±å‡ ä¸ªç¬”ç”» äº¤å‰è¿æ¥ç»„æˆçš„ç›¸å¯¹ä¸å˜çš„ç»“æ„ã€‚</p>
<ul>
<li>å­—æ ¹æ˜¯ç»„æˆæ±‰å­çš„åŸºæœ¬å•å…ƒã€‚</li>
<li>å¤šæ•°åæ—éƒ¨é¦–éƒ½å±äºå­—æ ¹ï¼Œå¦‚ï¼š<br>äº»ï¼ˆwthï¼‰ï¼Œæ‰Œï¼ˆrghgï¼‰ï¼Œæ°µï¼ˆiyygï¼‰ï¼Œå£ï¼ˆkkkkï¼‰ï¼Œè¾¶ï¼ˆpynyï¼‰ï¼Œè‰¹ï¼ˆaghhï¼‰ï¼Œé˜ï¼ˆbnhï¼‰</li>
<li>ä½†æ˜¯æœ‰äº›åæ—éƒ¨é¦–éœ€è¦ä¸¤ä¸ªä»¥ä¸Šå­—æ ¹ç»„æˆï¼Œå¦‚ï¼š<br>é¥£ï¼ˆqnbï¼‰ï¼ŒçŠ­ï¼ˆqteï¼‰ï¼Œè¡¤ï¼ˆpuiï¼‰ï¼Œç¤»ï¼ˆpyiï¼‰ï¼Œé¾¹ï¼ˆudï¼‰ï¼Œæ°”ï¼ˆrnbï¼‰ï¼Œç©´ï¼ˆpwuï¼‰</li>
</ul>
<p>äº”ç¬” æ‹¼éŸ³<br>ç¬ oyyy biao1 huo3<br>å†« uyg bing1<br>è‰¹ aghh ao3<br>å±® bhk che4<br>è¾¶ pyny chuo4<br>åˆ‚ jhh dao1<br>åŒš agn fang1<br>é˜ bnh fu3<br>å»¾ agth gong3<br>å‹¹ qtn bao1<br>ä¸¶ yyll zhu3<br>å°¢ dnv you2<br>é¥£ qnb shi2<br>å›— lhng wei2<br>é’… qtgn jin1<br>ç¤» pyi shi4<br>æ°µ iyyg shui3<br>è®  yyn yan2<br>çºŸ xxxx jiao3 si1<br>ç–’ uygg ne4<br>äº» wth ren2<br>å½¡ ettt shan1 xian3<br>ä¸¨ hhll gun3<br>æ‰Œ rghg shou3<br>å© bnh jie2<br>å†‚ mhn jiong1<br>å†– pyn mi4<br>å®€ pyyn mian2<br>è‚€ vhk yu4<br>ä¸¿ ttll pie3 yi4<br>æ”µ ttgy pu1<br>å»´ pny yin3 yin4<br>è¡¤ pui yi1<br>å¿„ nyhy xin1<br>å½ vngg xue3<br>äº  yyg tou2<br>è™ hav hu1<br>çŠ­ qte quan3<br>å‡µ bnh qian3 kan3<br>å¤‚ ttny dong1 zhe2 zhi3<br>ä¸¬ uygh pan2</p>
<p>86 äº”ç¬”çš„å­—æ ¹æœ‰ 130 ä¸ªï¼Œå¦‚æœç®—ä¸ŠæŸäº›ä¸ªå­—æ ¹çš„å˜ä½“ï¼Œï¼ˆå­—æ ¹å›¾ä¸Šï¼‰çº¦æœ‰ 200 ä¸ªï¼Œä¸è¦æƒ§æ€•å­—æ ¹çš„æ•°é‡ï¼Œè¦æœ‰â€œéº»çƒ¦ä¸€æ—¶ï¼Œæ–¹ä¾¿ä¸€ä¸–â€çš„è§‚å¿µã€‚</p>
<p>1ã€é”®åæ±‰å­ï¼ˆå…± 25 ä¸ªï¼‰ï¼š<br>é‡‘ï¼ˆQï¼‰ äººï¼ˆWï¼‰ æœˆï¼ˆEï¼‰ ç™½ï¼ˆRï¼‰ ç¦¾ï¼ˆTï¼‰ è¨€ï¼ˆYï¼‰ ç«‹ï¼ˆUï¼‰ æ°´ï¼ˆIï¼‰ ç«ï¼ˆOï¼‰ ä¹‹ï¼ˆPï¼‰<br>å·¥ï¼ˆAï¼‰ æœ¨ï¼ˆSï¼‰ å¤§ï¼ˆDï¼‰ åœŸï¼ˆFï¼‰ ç‹ï¼ˆGï¼‰ ç›®ï¼ˆHï¼‰ æ—¥ï¼ˆJï¼‰ å£ï¼ˆKï¼‰ ç”°ï¼ˆLï¼‰<br>çºŸï¼ˆXï¼‰ åˆï¼ˆCï¼‰ å¥³ï¼ˆVï¼‰ å­ï¼ˆBï¼‰ å·²ï¼ˆNï¼‰ å±±ï¼ˆMï¼‰</p>
<ul>
<li>ä»–ä»¬æ˜¯å­—æ ¹å›¾ä¸Šæ¯ä¸ªé”®å·¦ä¸Šè§’çš„é»‘ä½“å­—ï¼›ä¹Ÿæ˜¯æ¯å¥å£è¯€çš„ç¬¬ä¸€ä¸ªå­—ï¼ˆX é”®é™¤å¤–ï¼‰</li>
<li>æ‰“æ³•ï¼šè¿ç»­æ‰“å››æ¬¡æ‰€åœ¨çš„é”®ä½ã€‚ç®€ä¾¿æ‰“å‘ï¼šQQ äº”ç¬”é»˜è®¤è¯åº“ä¹Ÿå¯æ‰“ä¸€æ¬¡æ‰€åœ¨é”®ä½ï¼Œç„¶åé€‰ç¬¬äºŒé¡¹ï¼ˆA&#x2F;W&#x2F;X é”®é™¤å¤–ï¼‰</li>
</ul>
<p>2ã€ä¸€çº§ç®€ç ï¼ˆä¸€ç®€ï¼Œå…± 25 ä¸ªï¼‰<br>æˆ‘ï¼ˆQï¼‰ äººï¼ˆWï¼‰ æœ‰ï¼ˆEï¼‰ çš„ï¼ˆRï¼‰ å’Œï¼ˆTï¼‰ ä¸»ï¼ˆYï¼‰ äº§ï¼ˆUï¼‰ ä¸ï¼ˆIï¼‰ ä¸ºï¼ˆOï¼‰ è¿™ï¼ˆPï¼‰<br>å·¥ï¼ˆAï¼‰ è¦ï¼ˆSï¼‰ åœ¨ï¼ˆDï¼‰ åœ°ï¼ˆFï¼‰ ä¸€ï¼ˆGï¼‰ ä¸Šï¼ˆHï¼‰ æ˜¯ï¼ˆJï¼‰ ä¸­ï¼ˆKï¼‰ å›½ï¼ˆLï¼‰<br>ç»ï¼ˆXï¼‰ ä»¥ï¼ˆCï¼‰ å‘ï¼ˆVï¼‰ äº†ï¼ˆBï¼‰ æ°‘ï¼ˆNï¼‰ åŒï¼ˆMï¼‰</p>
<ul>
<li>ä»–ä»¬æ˜¯ä½¿ç”¨é¢‘ç‡æé«˜çš„å­—ï¼Œå¿…é¡»è®°ä½ã€‚â€œç»å‘åŒå’Œæˆ‘ä»¥ä¸ºï¼Œåœ¨äººæ°‘ä¸­å›½è¿™ä¸€ä¸»è¦å·¥åœ°ä¸Šï¼Œæœ‰çš„æ˜¯äº§ä¸äº†â€ã€‚</li>
<li>æ‰“æ³•ï¼šæ‰“ä¸€æ¬¡æ‰€åœ¨é”®ä½ï¼Œç„¶åæŒ‰ç©ºæ ¼é”®ã€‚</li>
</ul>
<p>3ã€å•ç¬”ç”»ï¼ˆå…±äº”ä¸ªï¼‰ï¼š</p>
<ul>
<li><p>ä¸¿ï¼ˆTTLLï¼‰ï¼Œä¸¶ï¼ˆYYLLï¼‰</p>
</li>
<li><p>ä¸€ï¼ˆGGLLï¼‰ï¼Œä¸¨ï¼ˆHHLLï¼‰</p>
</li>
<li><p>ä¹™ï¼ˆNNLLï¼‰</p>
</li>
<li><p>è¿™äº”ä¸ªé”®å¾ˆé‡è¦ï¼Œæ˜¯æ¯ä¸ªåŒºçš„ç¬¬ä¸€ä¸ªé”®ï¼Œä¹Ÿç§°å•ç¬”ç”»é”®ï¼Œåœ¨æ‰“æˆå­—å­—æ ¹æ—¶éœ€è¦ç”¨åˆ°ã€‚</p>
</li>
<li><p>æ‰“æ³•ï¼šæ‰€åœ¨é”®ä½*2 + LLï¼Œè®©åæŒ‰ç©ºæ ¼é”®ã€‚</p>
<p>4.æˆå­—å­—æ ¹ï¼ˆçº¦ 90 ä¸ªï¼‰ï¼š</p>
</li>
<li><p>æœ‰ç›¸å½“ä¸€éƒ¨åˆ†å­—æ ¹æœ¬èº«å°±å¯ä»¥è¢«ç”¨æ¥ä½œä¸ºå¸¸ç”¨çš„ç®€å•æ±‰å­—ï¼ˆæˆ–åæ—ï¼‰ï¼Œä»–ä»¬è¢«ç§°ä¸ºâ€œæˆå­—å­—æ ¹â€ã€‚</p>
</li>
<li><p>æ‰“æ³•ï¼šæ‰€åœ¨é”®ä½+ç¬¬ä¸€ç¬”+ç¬¬äºŒç¬”ï¼ˆ+æœ€åä¸€ç¬”ï¼‰</p>
</li>
<li><p>ä¾‹ï¼šçŠ¬ï¼ˆDGTYï¼‰ æ‰‹ï¼ˆRTGHï¼‰ å¿ƒï¼ˆNYNYï¼‰ äº”ï¼ˆGGHGï¼‰ åˆ€ï¼ˆVNTï¼‰ ã€æ—¥ï¼ˆJJJJï¼‰æ›°ï¼ˆJHNGï¼‰ã€å­ï¼ˆBBBBï¼‰å­‘ï¼ˆBNHGï¼‰ã€‘</p>
</li>
<li><p>ç‰¹ä¾‹ï¼šåŠ›ï¼ˆLTNï¼‰ ä¹ƒï¼ˆETNï¼‰ æˆˆï¼ˆAGNTï¼‰</p>
<p>5.äºŒçº§ç®€ç ã€ä¸‰çº§ç®€ç ã€å…¨ç ï¼š<br>ä¸ºäº†æé«˜å½•å…¥é€Ÿåº¦ï¼Œæœ‰äº›å­—çš„ç¼–ç å¯ä»¥ç®€åŒ–ã€‚å¦‚æœä¸€ä¸ªå­—ç”¨ä¸¤ä¸ªå­—æ¯é”®å°±å¯ä»¥æ‰“å‡ºï¼ˆç«‹ UU&#x2F;æ°´ II&#x2F;äº” GGï¼‰ï¼Œé‚£ä¹ˆå®ƒå«åšäºŒçº§ç®€ç ï¼›</p>
</li>
</ul>
<p>å¦‚æœä¸€ä¸ªå­—ç”¨ä¸‰ä¸ªå­—æ¯é”®å°±å¯ä»¥æ‰“å‡ºï¼ˆæ–¤ RTT&#x2F;ç«¹ TTG&#x2F;çš¿ LHNï¼‰ï¼Œé‚£ä¹ˆå®ƒå«åšä¸‰çº§ç®€ç ;</p>
<p>æ±‰å­—çš„å…¨éƒ¨ç¼–ç å«åšå…¨ç ï¼Œå…¨ç æœ€å¤šå››ç ï¼Œæœ€å°‘ä¸‰ç ã€‚</p>
<p>ä»€ä¹ˆæ ·çš„å…¨ç åªæœ‰ä¸‰ç ï¼Ÿ</p>
<ul>
<li>åªæœ‰ä¸¤ä¸ªç¬”ç”»çš„æˆå­—å­—æ ¹å¦‚â€œåï¼ˆFGHï¼‰&#x2F;å‚ï¼ˆDGTï¼‰&#x2F;ä¹ï¼ˆVTNï¼‰&#x2F;äºŒï¼ˆFGGï¼‰â€ï¼›</li>
<li>åªèƒ½æ‹†æˆä¸¤éƒ¨åˆ†çš„å­—ã€‚</li>
<li>åªæœ‰ä¸€ä¸ªç¬”ç”»ï¼Ÿé‚£å«åšå•ç¬”ç”»ï¼Œå…¨ç å››ç ï¼</li>
</ul>
<p>6ã€é‡ç ï¼šå³â€œé‡å¤çš„ç¼–ç â€</p>
<ul>
<li>æœ‰çš„é‡ç éœ€è¦è¿›è¡Œé€‰æ‹©ï¼š<ul>
<li>FGHYï¼šé›¨ã€å¯¸</li>
<li>FCUï¼šäº‘ã€å»ã€æ”¯</li>
</ul>
</li>
<li>æœ‰çš„é‡ç å¯ä»¥è¢«ç®€ç åˆ†æµï¼š<ul>
<li>FKUKï¼šå˜‰ã€å–œ</li>
<li>FKUï¼šå–œ</li>
</ul>
</li>
</ul>
<h3 id="å­—æ ¹"><a href="#å­—æ ¹" class="headerlink" title="å­—æ ¹"></a>å­—æ ¹</h3><ul>
<li>å­—æ ¹é¡ºåºæŒ‰ç…§ æ¨ªåŒº&#x2F;ç«–åŒº&#x2F;æ’‡åŒº&#x2F;æºåŒº&#x2F;æŠ˜åŒº çš„é¡ºåºï¼Œæ¯ä¸ªåŒºçš„é”®ä½æŒ‰ä½å·çš„é¡ºåºæ¥è®²è§£ã€‚</li>
<li>æ’‡åŒº QWERT</li>
<li>æºåŒº YUIOP</li>
<li>æ¨ªåŒº ASDFG</li>
<li>ç«–åŒº HJKLM</li>
<li>æŠ˜åŒº XCVBN</li>
<li>ä¸‡èƒ½é”® Z</li>
</ul>
<h3 id="æ¨ªåŒº"><a href="#æ¨ªåŒº" class="headerlink" title="æ¨ªåŒº"></a>æ¨ªåŒº</h3><p>11 G ç‹æ—é’å¤´æˆ‹äº”ä¸€</p>
<ul>
<li>1.ç‹â€”â€”å›½ ç° ç† å…¨ ç¨‹</li>
<li>2.î «â€”â€”è¡¨ é’ è´£ éº¦ æ¯’ ã€å‹¤ã€‘</li>
<li>3.æˆ‹â€”â€”çº¿ é’± æ®‹ è·µ ç›</li>
<li>4.äº”â€”â€”ä¼ å¾ï¼ˆè¯­ æ‚Ÿ æ‚ï¼‰</li>
<li>5.ä¸€â€”â€”ä¸ æ¥ åˆ° äº æ—¦</li>
</ul>
<p>12 F åœŸå£«äºŒå¹²åå¯¸é›¨</p>
<ul>
<li>1.åœŸâ€”â€”åœ° é‡Œ ç­‰ åœº ç¤¾</li>
<li>2.å£«â€”â€”ç»“ å¿— å–œ æ¬¾ å£®</li>
<li>3.äºŒâ€”â€”äº› æ—  å…ƒ æ¯› å‡»</li>
<li>4.å¹²â€”â€”èµ¶ åˆŠ æ±— å²¸ ç«¿</li>
<li>5.åâ€”â€”ç§‘ è®¡ å¾· å— å–</li>
<li>6.å¯¸â€”â€”æ—¶ å¯¹ è¿‡ å¾— å¯¼</li>
<li>7.é›¨â€”â€”éœ€ éœ² é›· é›ª é›¶</li>
<li>8.é©ï¼ˆé©å­—æ—ï¼Œé”®ç›˜æ‰“ä¸å‡ºæ¥ï¼‰â€”â€”é©ï¼ˆå‹’ é‹ é­ é¶ï¼‰ã€æ³¨æ„ âš ï¸ï¼šå‹¤ ä¸æ˜¯è¿™ä¸ªåæ—ã€‘</li>
</ul>
<p>13 D å¤§çŠ¬ä¸‰ç¾Šå¤çŸ³å‚</p>
<ul>
<li>1.å¤§â€”â€”ç¾ å¤ª è¾¾ ç±» å¤©ã€å¤«ã€‘</li>
<li>2.çŠ¬â€”â€”ç„¶ çª å£® å“­ åŒ</li>
<li>3.ä¸‰â€”â€”ä¸° å®³ é æ‰¿ æ‹œ<br>-4.ç¾Šå­—åº•â€”â€”ç¾Šï¼ˆæ · æ´‹ é²œ è¯¦ ç—’ï¼‰ã€å–„ã€‘ã€æ³¨æ„ âš ï¸ï¼šç¾ ä¸æ˜¯è¿™ä¸ªåæ—ã€‘</li>
<li>5.å¤â€”â€”å…‹ æ•… è‹¦ å±… å›º</li>
<li>6.çŸ³â€”â€”ç ´ ç£¨ æ‹“ å²© æ³µ</li>
<li>7.å‚â€”â€”æˆ åŸ å† å‹ é¡¾</li>
<li>8.é•¸â€”â€”å¥— è‚† é«Ÿ biao ï¼ˆé¬“ bin é«» jiï¼‰</li>
<li>9.ä¸†â€”â€”ä¸‡ã€æ–¹ã€‘é¢ ç™¾ å¤ é¡µ</li>
<li>10.åœ¨å­—å¤´ï¼ˆé”®ç›˜æ‰“ä¸å‡ºæ¥ï¼‰â€”â€”åœ¨ æœ‰ å‹ å·¦ ä¸ˆã€å°´å°¬ã€‘ï¼ˆä¸Šä¸‹ç»“æ„ï¼‰</li>
<li>11.å°¤å­—è¾¹ï¼ˆé”®ç›˜æ‰“ä¸å‡ºæ¥ï¼‰â€”â€”é¾™ï¼ˆå´‡ é¾šï¼‰å°¤ï¼ˆä¼˜ æ‰°ï¼‰</li>
<li>12.î ¦â€”â€”ç€ å·® ç¾ å…» ç¾Œã€æ³¨æ„ âš ï¸ï¼šçœ‹ ä¸æ˜¯è¿™ä¸ªåæ—ã€‘</li>
</ul>
<p>14 S æœ¨ä¸è¥¿</p>
<ul>
<li>1.æœ¨â€”â€”æœ«ã€æ³¨æ„ âš ï¸ï¼šæœ« ä¸æ˜¯è¿™ä¸ªåæ—ã€‘æœ¬ã€æ³¨æ„ âš ï¸ï¼šå¤² ä¸æ˜¯è¿™ä¸ªåæ—ã€‘æ¡ æœº æœ æœ¯</li>
<li>2.ä¸â€”â€”å¯ æ‰“ å¥‡ åœ å® ã€æ³¨æ„ âš ï¸ï¼šè¡Œ ä¸æ˜¯è¿™ä¸ªåæ—ã€‘</li>
<li>3.è¥¿è¦€â€”â€”è¦ é… é…’ æ´’ å°Š</li>
</ul>
<p>15 A å·¥æˆˆè‰å¤´å³æ¡†ä¸ƒ</p>
<ul>
<li>1.å·¥â€”â€”ç» å¼ ç©º åŠŸ çº¢ ã€æ³¨æ„ âš ï¸ï¼šå€™ ä¸æ˜¯è¿™ä¸ªåæ—ã€‘</li>
<li>2.æˆˆâ€”â€”æˆ˜ æ‰¾ åˆ’ æˆ æˆ›</li>
<li>3.è‰¹â€”â€”è‹± èŠ± èŠ‚ æ»¡ è¯ï¼ˆæ‰ å‚ï¼‰</li>
<li>4.åŒ¸ï¼ˆå³æ¡†ï¼‰â€”â€”åŒº åŒ» å·¨ æ±‡ åŒ¹ï¼ˆç‰™ æ—¢ èˆ› ç¬ èˆï¼‰</li>
<li>5.ä¸ƒâ€”â€”ä¸œ åˆ‡ ç»ƒ æ‰˜ çš‚ ï¼ˆå°§ æ™“ ç¿˜ï¼‰</li>
<li>6.å¼‹â€”â€”ä»£ è¢‹ è´· å²± é¸¢ yuan</li>
<li>7.å…±å­—å¤´ï¼ˆé”®ç›˜æ‰“ä¸å‡ºæ¥ï¼‰â€”â€”å±• å…± é”™ é»„ æ¸¯ã€æ›² å…¸ æ›¹ã€‘</li>
<li>8.å»¾â€”â€”å¼€ å¹¶ å‡ å¼‚ æˆ’</li>
<li>9.å»¿ nianâ€”â€”åº¦ ä¸– å¸­ ç‡• é®</li>
</ul>
<h3 id="ç«–åŒº"><a href="#ç«–åŒº" class="headerlink" title="ç«–åŒº"></a>ç«–åŒº</h3><p>21 H ç›®å…·ä¸Šæ­¢åœè™çš®</p>
<ul>
<li>1.ç›®â€”â€”è‡ªï¼ˆé¦–é“ï¼‰çœ‹ ç€ ç›¸ ç®—</li>
<li>2.å…·å­—å¤´â€”â€”å…·ï¼ˆä¿± æƒ§ çœŸ ï¼‰ ç›´ã€æ³¨æ„ âš ï¸ï¼šä¸” ä¸æ˜¯è¿™ä¸ªåæ—ã€‘</li>
<li>3.ä¸Šâ€”â€”è®© å¡ å¯‚ å” å¿</li>
<li>4.æ­¢â€”â€”æ­£ æ­¥ æ‰¯ æ­§ å¸ ç–ã€å»¶ã€‘</li>
<li>5.åœâ€”â€”ä¸‹ å¤– å  å¢ ä¸</li>
<li>6.è™å­å¤´â€”â€”è™‘ è™š è™ è™ å½ª</li>
<li>7.çš®å­—å¤´â€”â€”çš®ï¼ˆè¢« æ³¢ ç ´ ç–²ï¼‰</li>
<li>8.è¶³å­—åº•â€”â€”èµ° è¶³ ç–‹ piï¼ˆæ¥š è›‹ å‡ï¼‰</li>
<li>9.ï½œâ€”â€”æ—§ å¼• å·¾ ä¸­ ç”³</li>
</ul>
<p>22 J æ—¥æ—©ä¸¤ç«–ä¸è™«ä¾</p>
<ul>
<li>1.æ—¥æ›°â€”â€”æ˜¯ æ—¶ å¾— å• é‡Œ ã€å†’ å†•ã€‘</li>
<li>2.æ—©â€”â€”ç«  è‰ è¦ƒ ï¼ˆæ½­ï¼‰å“ï¼ˆæ‰ ç½©ï¼‰</li>
<li>3.ä¸´å­—æ—â€”â€”ä¸´ ç´§ åš è§ˆ ç«–</li>
<li>4.è™«â€”â€”è™½ ç‹¬ è™¹ è›® è›‡</li>
<li>5.å¸ˆå­—æ—â€”â€”å¸ˆ å½’ å¸… ç‹® ç­›ã€ æ³¨æ„ âš ï¸ï¼šç­ è¾¨ ä¸æ˜¯è¿™ä¸ªåæ—ã€‘</li>
<li>6.ä¸´å­—åº•â€”â€”ä¸´ è±¡ ï¼ˆåƒ æ©¡ èŸ“ï¼‰ã€æ³¨æ„ âš ï¸ï¼šå… ä¸æ˜¯è¿™ä¸ªåæ—ã€‘</li>
<li>7.åˆ‚â€”â€”åˆ° å‰ åˆ¶ åˆ© åˆ«</li>
<li>8.äº•å­—åº•â€”â€”äº• ç•Œ å…» å¼— è‚ƒã€æ³¨æ„ âš ï¸ï¼šæ¸Š ä¸æ˜¯è¿™ä¸ªåæ—ã€‘</li>
</ul>
<p>23 k å£ä¸å·ï¼Œå­—æ ¹ç¨€</p>
<ul>
<li>1.å£â€”â€”ä¸­ è¯´ å å¦‚ äº‹</li>
<li>2.å·â€”â€”è®­ åœ³ é©¯ é’ chuan å… sa</li>
<li>3.ä¸‰ç«–â€”â€”å¸¦ æ»</li>
</ul>
<p>24 L ç”°ç”²æ–¹æ¡†å››è½¦åŠ›</p>
<ul>
<li>1.ç”°â€”â€”æ€ ç”· å¤‡ ç•™ ç»† ã€ç•Œã€‘</li>
<li>2.ç”²â€”â€”é¸­ æŠ¼ é—¸ é’¾ åŒ£</li>
<li>3.å£â€”â€”å›½ å›  å› å›¾ çƒŸã€é¢ã€‘</li>
<li>4.å››â€”â€”æ³— å¾· ç½— ç½® æ›¼</li>
<li>5.è½¦â€”â€”å†› è½¬ è¿ è½½ åº“</li>
<li>6.åŠ›â€”â€”ä¸º åŠ¨ åŠ  åŠ¡ å‰</li>
<li>7.çš¿â€”â€”è¡€ ç›Š æ¸© ç›˜ ç›–</li>
<li>8.æ›¾å­—å¤´â€”â€”é»‘ é»˜ ç† æ›¾ å¢ã€æŸ¬ã€‘</li>
<li>9.å››ç«–â€”â€”èˆ</li>
</ul>
<p>25 M å±±ç”±è´ï¼Œä¸‹æ¡†å‡ </p>
<ul>
<li>1.å±±â€”â€”å² å¯† ç«¯ å²› å³°</li>
<li>2.ç”±â€”â€”æ²¹ æ¼” è¿ª å±Š é‚®ã€é»„ ç¬›ã€‘</li>
<li>3.è´â€”â€”åˆ™ èµ„ å‘˜ é¡µ è´¨</li>
<li>4.ä¸‹æ¡†â€”â€”åŒ é«˜ å†… åˆ¶ å¤® ã€å† ä¸¹ åˆº å¸‚ æ²›ã€‘</li>
<li>5.å‡ â€”â€”æœº é£ å¾® æ²‰ å‡¡</li>
<li>6.éª¨å­—å¤´â€”â€”æ»‘ çŒ¾ é«“ éª· é«…</li>
</ul>
<h3 id="æ’‡åŒº"><a href="#æ’‡åŒº" class="headerlink" title="æ’‡åŒº"></a>æ’‡åŒº</h3><p>31 T ç¦¾ç«¹ä¸€æ’‡åŒäººç«‹ï¼Œåæ–‡æ¡å¤´å…±ä¸‰ä¸€</p>
<ul>
<li>1.ç¦¾â€”â€”å’Œ ç§‘ é¦™ ä¹˜ ç§¦ã€æ³¨æ„ âš ï¸ï¼šç§‰ ä¸æ˜¯è¿™ä¸ªåæ—ã€‘</li>
<li>2.ç«¹å­—å¤´â€”â€”ç¬¬ ç®¡ ç®— ç­” ç¬”</li>
<li>3.ä¸¿â€”â€”é•¿ ä¹ˆ ä¸¢ åƒ å‡</li>
<li>4.åŒäººæ—â€”â€”å¾— è¡Œ å¾ˆ å¾· å¾€</li>
<li>5.åæ–‡æ—â€”â€”æ•™ åš æ”¿ æ•° æ”¶</li>
<li>6.æ¡å¤´â€”â€”å„ å¤„ æ¡ å¤ å›¾ ã€å¤œã€‘</li>
<li>7.æ¯å­—å¤´â€”â€”æ¯ æ—… æ¸¸ åƒè§ˆ</li>
</ul>
<p>32 R ç™½æ‰‹çœ‹å¤´ä¸‰äºŒæ–¤</p>
<ul>
<li>1.ç™½â€”â€”çš„ åŸ æ¿€ æ€• çš† ã€å‘ï¼ˆç‰Œ å•¤ï¼‰ã€‘</li>
<li>2.æ‰‹â€”â€”æ‹¿ æ° æ‘© æ‹³ æŒ</li>
<li>3.çœ‹å¤´â€”â€”çœ‹ æ‹œ æ¹ƒ æ° æ¿ ã€æ³¨æ„ âš ï¸ï¼šç€ ä¸æ˜¯è¿™ä¸ªåæ—ã€‘</li>
<li>4.æ–¤â€”â€”æ‰€ æ–° è¿‘ å…µ ä¸˜</li>
<li>5.ææ‰‹æ—â€”â€”æŠŠ æ æŠ± æ¥ æŒ‡ ã€ç‰›ã€‘ã€æ³¨æ„ âš ï¸ï¼šç‰›å­—æ— ä¸æ˜¯è¿™ä¸ªåæ—ã€‘</li>
<li>6.å¹´å­—å¤´â€”â€”å¹´ ç‰› æ°” åˆ¶ èˆ</li>
<li>7.ä¸¤æ’‡â€”â€”å‹¿ åŒ† å¿½ æ¨ æ±¤</li>
<li>8.åå­—å¤´â€”â€”å æ´¾ æ®· çˆª ç“œ</li>
</ul>
<p>33 E æœˆå½¡ä¹ƒç”¨å®¶è¡£åº•ï¼Œçˆ±å¤´è±¹è„šèˆŸåº•éƒ¨</p>
<ul>
<li>1.æœˆâ€”â€”æ˜ æœŸ æœ è„‘ æœ›</li>
<li>2.æ›°â€”â€”æœ‰ ä¸” é’ èƒ½ ç”«</li>
<li>3.å½¡â€”â€”å½¢ å½± å‚ é¡» ä¿®</li>
<li>4.ä¹ƒâ€”â€”åŠ ä» ç§€ å­• ç›ˆ</li>
<li>5.ç”¨â€”â€”é€š æ‹¥ ç—› å‹‡ æ¶Œ</li>
<li>6.å®¶å­—åº•â€”â€”å®¶ å•„ è’™ ç¼˜ é‚ ã€è±¡ã€‘ã€æ³¨æ„ âš ï¸ èš ä¸æ˜¯è¿™ä¸ªåæ—ã€‘</li>
<li>7.è¡£å­—åº•â€”â€”è¡£ å†œ è£ è¢­ è¢…</li>
<li>8.è¾°å­—åº•â€”â€”å±• è‰¯ è¾° æ´¾ æ—…</li>
<li>9.çˆ±å­—å¤´â€”â€”çˆ± å— æ‘‡ ç¼“ æµ®</li>
<li>10.è±¹è„šâ€”â€”è²Œ è±¹ éœ¾ è±º</li>
<li>11.èˆŸåº•éƒ¨â€”â€”èˆŸ æ¬ èˆª ç›˜ èˆ¹ã€æ³¨æ„ âš ï¸ ä¸¹ ä¸æ˜¯è¿™ä¸ªåæ—ã€‘</li>
</ul>
<p>34 W äººå’Œå…«ï¼Œç¥­ç™»å¤´</p>
<ul>
<li>1.äººâ€”â€”ä¼š å†… è®º æ¬  è¯¥</li>
<li>2.å•äººæ—â€”â€”ä»– ä»¬ ä½œ ä½“ã€æ®µ è¿½ èˆ† ã€‘ã€æ³¨æ„ âš ï¸ å¸ ä¸æ˜¯è¿™ä¸ªåæ—ã€‘</li>
<li>3.å…«â€”â€”åˆ† å…± åŠ èµ› å•†</li>
<li>4.ç™»å­—å¤´â€”â€”ç™» çª å‡³ æ©™ ç™¸ã€æ³¨æ„ âš ï¸ åƒš ä¸æ˜¯è¿™ä¸ªåæ—ã€‘</li>
<li>5.ç¥­å­—å¤´â€”â€”ç¥­ å¯Ÿ è”¡ æ“¦ åš“</li>
</ul>
<p>35 Q é‡‘å‹ºç¼ºç‚¹æ— å°¾é±¼ï¼ŒçŠ¬æ—ç•™å‰å„¿ä¸€ç‚¹å¤•ï¼Œæ°æ— ä¸ƒ</p>
<ul>
<li>1.é‡‘â€”â€”é‰´ é‘« é– éŠ® æ·¦ã€æ³¨æ„ âš ï¸ é‡œ ä¸æ˜¯è¿™ä¸ªåæ—ã€‘</li>
<li>2.é‡‘å­—æ—â€”â€”é”€ é’± é”™ é’Ÿ é’ˆ</li>
<li>3.å‹ºå­—å¤´â€”â€”å‹º åŒ… å‹¾ é» ã€æ•–ã€‘ã€æ³¨æ„ âš ï¸ ä¸‡ ä¸æ˜¯è¿™ä¸ªåæ—ã€‘</li>
<li>4.é±¼å­—å¤´â€”â€”é±¼ é² é²œ é…¥ è“Ÿ</li>
<li>5.çŠ¬æ—â€”â€”ç‹¬ è· çŠ¯ ç‹‚ ç‹±</li>
<li>6.å‰ç¼ºç‚¹â€”â€”ä¹‰ æ›´ å² åŒº äº¤ ã€çˆ½ã€‘</li>
<li>7.ç‰¹æ®Šä¸€çº§ç®€ç ï¼šæˆ‘</li>
<li>8.å„¿â€”â€”æ—  å…ƒ è§ è¯´ å…ˆ</li>
<li>9.å¤•â€”â€”å¤š å¤– å ç½— æ¢¦</li>
<li>10.æ°æ— ä¸ƒâ€”â€”æ° ç•™ å° ä½ ä»° ã€ä¹ åµ å­µã€‘</li>
<li>11.æ¬ å­—å¤´â€”â€”ä¹… æ¬  è‰² æ€¥ å‚²</li>
<li>12.ç‚™å­—å¤´â€”â€”ç„¶ ç‡ƒ ç‚™ã€æ³¨æ„ âš ï¸ è”¡ ä¸æ˜¯è¿™ä¸ªåæ—ã€‘</li>
<li>13.è’å­—åº•â€”â€”è’ æ…Œ æµ ç¡« ä¾ƒ ã€æ³¨æ„ âš ï¸ å· ä¸æ˜¯è¿™ä¸ªåæ—ã€‘</li>
</ul>
<h3 id="æºåŒº"><a href="#æºåŒº" class="headerlink" title="æºåŒº"></a>æºåŒº</h3><p>41 Y è¨€æ–‡æ–¹å¹¿åœ¨å››ä¸€ï¼Œé«˜å¤´ä¸€æºè°äººå»</p>
<ul>
<li>1.è¨€â€”â€”ä¿¡ è­¦ èª‰ èª“ è©¹</li>
<li>2.è¨€å­—æ—â€”â€”è¯´ è¯ è¯» è®° è®©</li>
<li>3.æ–‡â€”â€”è¿™ åˆ˜ é½ çº¹ æ–Œ</li>
<li>4.æ–¹â€”â€”æ¸¸ æ”¾ æ—… é˜² æˆ¿</li>
<li>5.å¹¿â€”â€”åº¦ åº• åºœ åº— æ‰©</li>
<li>6.äº¡å­—å¤´â€”â€”å¤œ å’ ç„ äº¡ï¼ˆäº¥ è¯¥ åˆ»ï¼‰</li>
<li>7.é«˜å¤´â€”â€”é«˜ å°± äº¬ ç†Ÿ äº«</li>
<li>8.ä¸€ç‚¹â€”â€”ä¸» è‰¯ åŒ† æ–¥ å•„</li>
<li>9.ä¸€æºâ€”â€”ä¹… åŠ æ å…¥ å°º</li>
<li>10.è°äººå»â€”â€”éš¾ é›† ç»´ é¹¤ æˆª ã€æ³¨æ„ âš ï¸ ä¸» åœ­ ä¸æ˜¯è¿™ä¸ªåæ—ã€‘</li>
</ul>
<p>42 U ç«‹è¾›ä¸¤ç‚¹å…­é—¨ç–’</p>
<ul>
<li>1.ç«‹â€”â€”äº§ éŸ³ ç«™ éƒ¨ ä½</li>
<li>2.ç«‹å­—å¤´â€”â€”æ— æ¦œ å¸ å•† æ»´</li>
<li>3.è¾›â€”â€”è¾ è¾¨ è¾© å®° è¾œ</li>
<li>4.ä¸¤ç‚¹â€”â€”ä¹  åŒ€ å†³ å¼± å°½</li>
<li>5.å…­â€”â€”äº¤ï¼ˆæ•ˆ éƒŠ èƒ¶ å’¬ï¼‰æ»š å†¥</li>
<li>6.é—¨â€”â€”ä»¬ é—´ é—® é—» é—¹</li>
<li>7.ç–’â€”â€”ç–¾ ç—… ç—› ç—’ ç–—</li>
<li>8.ä¸¤ç‚¹â€”â€”ç€ å¼Ÿ ç¾Š å°Š ä¸«</li>
<li>9.å°†å­—æ—â€”â€”åŒ—ï¼ˆä¹˜ ä¹–ï¼‰ å°† çŠ¶</li>
<li>10.æ™®å­—å¤´â€”â€”å¹³ æ™® ä¸§ å¢™ å–„ åŠ</li>
</ul>
<p>43 I æ°´æ—å…´å¤´å°å€’ç«‹</p>
<ul>
<li>1.æ°´â€”â€”æ³‰ å†° è¸ æµ† æ·¼</li>
<li>2.ä¸‰ç‚¹æ°´â€”â€”æ²¡ æ³• æ´» æµ· æ·±</li>
<li>3.æ°¸å­—æ—â€”â€”æ°¸ æ‰¿ å…† æ±‚ æ‹¯</li>
<li>4.å½•å­—åº•â€”â€”å½• æ³° éš¶ åº· èš</li>
<li>5.å­¦å­—å¤´â€”â€”å­¦ è§‰ å¸¸ å…š å°</li>
<li>6.å…´å­—å¤´â€”â€”å…´ ä¸¾ åº” å…‰ æ™ƒ</li>
<li>7.å°â€”â€”ä¸ å°± ä½  ç³» ä¸œ ã€æ­¥ã€‘</li>
</ul>
<p>44 O ç«ä¸šå¤´ï¼Œå››ç‚¹ç±³</p>
<ul>
<li>1.ç«â€”â€”ç‚ çµ çƒŸ ä¼™ ç°</li>
<li>2.ä¸šå¤´â€”â€”ä¸š æ˜¾ äºš å£¶ å‡¿</li>
<li>3.äº¦å­—åº•â€”â€”äº¦ å˜ å¼¯ å…¼ å«Œ</li>
<li>4.å››ç‚¹åº•â€”â€”ç„¶ ç‚¹ ç…§ çƒ­ æ°</li>
<li>5.ç±³â€”â€”æ¥ ç²¾ æ–­ å¥¥ ç²¤<br>ç‰¹æ®Šä¸€ç®€ï¼šä¸º</li>
</ul>
<p>45 P ä¹‹å­—å†›ç›–å»ºé“åº•ï¼Œæ‘˜ç¤»è¡¤</p>
<ul>
<li>1.ä¹‹â€”â€”ä¹ æ³› èŠ è´¬ çœ¨</li>
<li>2.å®ç›–å¤´â€”â€”å®¶ å® å®š å®ƒ å®‰</li>
<li>3.å†›ç›–â€”â€”å­¦ å†› å†™ å†œ åŠ³</li>
<li>4.å»ºå­—åº•â€”â€”å»º åº­ å»¶ é”® æŒº</li>
<li>5.è¾¶â€”â€”è¿™ è¿‡ è¿˜ é“ è¿›</li>
<li>6.æ‘˜ç¤»è¡¤â€”â€”è¢« åˆ è¡¥ è£¤ è£™ ç¤¾ ç¥ ç¦ ç¥ ç¤¼</li>
</ul>
<h3 id="æŠ˜åŒº"><a href="#æŠ˜åŒº" class="headerlink" title="æŠ˜åŒº"></a>æŠ˜åŒº</h3><p>51 N å·²åŠå·³æ»¡ä¸å‡ºå·±ï¼Œå·¦æ¡†æŠ˜å°¸å¿ƒå’Œç¾½</p>
<ul>
<li>1.å·²â€”â€”å”¯ä¸€ä¸€ä¸ªä¸èƒ½ç»„å­—çš„å­—æ ¹</li>
<li>2.å·³â€”â€”å¯¼ åŒ… å¼‚ æ¸¯ æ’° ã€æ³¨æ„ âš ï¸ çŠ¯ ä»“ ä¸æ˜¯è¿™ä¸ªåæ—ã€‘</li>
<li>3.å·±â€”â€”èµ· è®° æ”¹ çºª å‡¯</li>
<li>4.å·¦æ¡†â€”â€”å·¨ è¿½ æ‰€ å€™ å†³ å¿« ã€é¹¿ã€‘</li>
<li>5.ä¹™â€”â€”ç”© ä¹¦ ä¸ ç“¦ ç‰‡ ä¹œï¼ˆnieï¼‰</li>
<li>6.å°¸â€”â€”æ°‘ å±• å°º å°½ æˆ·</li>
<li>7.çœ‰å­—å¤´â€”â€”å£° é¦¨ çœ‰ åªš åµ‹</li>
<li>8.å¿ƒâ€”â€”æƒ³ æ„ æ„Ÿ æ€ å¿…</li>
<li>9.ç«–å¿ƒæ—â€”â€”æ€§ æƒ… å¿« æ­ æ·»</li>
<li>10.ç¾½â€”â€”ç¿» ç¿¼ è€€ ç¿° å»–</li>
</ul>
<p>52 B å­è€³äº†ä¹Ÿæ¡†å‘ä¸Š</p>
<ul>
<li>1.å­â€”â€”å­¦ å¥½ æ•™ å­˜ å­™ ã€å­‘ å­“ã€‘</li>
<li>2.è€³â€”â€”æœ€ å– é—» æ•¢ è‚</li>
<li>3.å´å­—æ—â€”â€”å« æŠ¥ å´ èŠ‚ è¿</li>
<li>4.è€³æœµæ—â€”â€”éƒ½ é‚£ éƒ¨ éƒ‘ é‚®ï¼ˆåœ¨å³ï¼‰é™¢ é˜Ÿ éš é™ˆ é˜³ï¼ˆåœ¨å·¦ï¼‰</li>
<li>5.äº†â€”â€”ç–— è¾½ äº¨ å“¼ã€äºˆ çŸ›ã€‘</li>
<li>6.ä¹Ÿâ€”â€”ä»– åœ° å¥¹ æ–½ æ‹–</li>
<li>7.ä¸‹æ¡†â€”â€”å‡¶ å‡º å‡½ ç¦»</li>
<li>8.å·å­åº•â€”â€”åˆ› èŒƒ é¡¾ å· å±</li>
<li>9.ç²¼å­—æ—â€”â€”ç²¼</li>
</ul>
<p>53 V å¥³åˆ€ä¹è‡¼å±±æœè¥¿</p>
<ul>
<li>1.å¥³â€”â€”å¥½ å¦‚ å¥¹ æ•° å®‰</li>
<li>2.åˆ€â€”â€”åˆ† è§£ ç…§ åˆ‡ è¶… ã€é‚£ã€‘</li>
<li>3.ä¹â€”â€”ä¸¸ ç©¶ çƒ­ æ‚ ä»‡</li>
<li>4.è‡¼â€”â€”æœ æ’ é™· æ¯ é¼ </li>
<li>5.å±±æœè¥¿â€”â€”é›ª å°¹ åºš å…¼ è‚ƒ</li>
<li>6.å·¢å­—å¤´â€”â€”å·¡ å·¢ ç‘™ ç¼ é‚‹<br>ç‰¹æ®Šä¸€çº§ç®€ç ï¼šå‘</li>
</ul>
<p>54 C åˆå·´é©¬ï¼Œä¸¢çŸ¢çŸ£</p>
<ul>
<li>1.åˆâ€”â€”å¯¹ åº¦ æŠ¥ å— å˜</li>
<li>2.å·´â€”â€”æŠŠ è‰² è‚¥ çˆ¬ ç»</li>
<li>3.é©¬â€”â€”å— éªŒ éª‚ å†¯ é—¯</li>
<li>4.çŸ£å­—å¤´â€”â€”èƒ½ ä¹ˆ å…¬ æ²» å³ ã€ç¦»ã€‘ã€æ³¨æ„ âš ï¸ å¶ ä¸æ˜¯è¿™ä¸ªåæ—ã€‘</li>
<li>5.å‹‡å­—å¤´â€”â€”é€š å‹‡ æ¶Œ ç–‘ å‡ã€æ³¨æ„ âš ï¸ ä¸“ ä¸æ˜¯è¿™ä¸ªåæ—ã€‘</li>
<li>6.ç»å­—å¤´â€”â€”ç» è½» åŠ² èŒ æ°¢<br>ç‰¹æ®Šä¸€çº§ç®€ç ï¼šä»¥</li>
</ul>
<p>55 X æ…ˆæ¯æ— å¿ƒå¼“å’Œæ¯”ï¼Œå¹¼æ— åŠ›ã€ä¸€çº§ç®€ç ï¼šç»ã€‘</p>
<ul>
<li>1.æ¯æ¡†â€”â€”æ¯ï¼ˆæ¯ æ¯’ æ• ç¹ï¼‰è´¯ï¼ˆæƒ¯ï¼‰æ¯‹</li>
<li>2.å¼“â€”â€”ç¬¬ å¼º å¼  å¼± å¼—</li>
<li>3.åŒ•â€”â€”èƒ½ æ¯” è€ å®ƒ æ­» ã€æ›³ã€‘ã€æ³¨æ„ âš ï¸ æˆŠ ä¸æ˜¯è¿™ä¸ªåæ—ã€‘</li>
<li>4.å¹»å­—æ—â€”â€”ç³» ç´  ç‡ å¹» ç„</li>
<li>5.ç»ä¸æ—â€”â€”ç» ç»™ çº¿ ä¸ ä¹¡</li>
<li>6.ç¼˜å­—å¤´â€”â€”äº’ ç¼˜ è ¡ï¼ˆliï¼‰</li>
</ul>
<p>äº”ç¬”æ±‰å­çš„æ‹†åˆ†åŸåˆ™</p>
<ul>
<li>æˆ‘ä»¬å…ˆè®²è®²ä¹¦å†™é¡ºåº.</li>
<li>åœ¨ä¹¦å†™æ±‰å­—æ—¶,è®²ç©¶â€œå…ˆå·¦åå³,å…ˆä¸Šåä¸‹,å…ˆæ¨ªåç«–,å…ˆæ’‡åæº,å…ˆå†…åå¤–,å…ˆä¸­é—´åä¸¤è¾¹,å…ˆè¿›é—¨åå…³é—¨â€ç­‰.</li>
</ul>
<p>ä¹¦å†™é¡ºåº</p>
<p>ä¾‹å¦‚:<br>â€œæ–°â€å­—å–ç çš„é¡ºåºåº”è¯¥æ˜¯â€œç«‹ã€æœ¨ã€æ–¤â€,ä¸èƒ½å–â€œæœ¨ã€ç«‹ã€æ–¤â€,ä¹Ÿä¸èƒ½æ˜¯â€œç«‹ã€æ–¤ã€æœ¨â€.<br>â€œå’Œâ€å­—å–ç çš„é¡ºåºåº”è¯¥æ˜¯â€œç¦¾ã€å£â€,ä¸èƒ½å–â€œå£ã€ç¦¾â€.</p>
<p>å–å¤§ä¼˜å…ˆ<br>å–å¤§ä¼˜å…ˆæŒ‡çš„æ˜¯åœ¨å„ç§å¯èƒ½çš„æ‹†æ³•ä¸­,ä¿è¯æŒ‰ä¹¦å†™é¡ºåºæ‹†å‡ºå°½å¯èƒ½å¤§çš„å­—æ ¹,ä»¥ä¿è¯æ‹†åˆ†å‡ºçš„å­—æ ¹æ•°æœ€å°‘.</p>
<p>ä¾‹å¦‚:<br>â€œé€‚â€å¯ä»¥æ‹†åˆ†ä¸ºâ€œä¸¿ã€å¤ã€è¾¶â€,è¿˜å¯ä»¥æ‹†æˆâ€œä¸¿ã€åã€å¤ã€è¾¶â€.å“ªä¸€ç§æ˜¯æ­£ç¡®çš„å‘¢?</p>
<p>æ ¹æ®å–å¤§ä¼˜å…ˆåŸåˆ™,æ‹†å‡ºçš„å­—æ ¹è¦å°½å¯èƒ½å¤§,è€Œç¬¬äºŒç§æ‹†æ³•ä¸­çš„â€œåâ€,â€œå£â€ä¸¤ä¸ªå­—æ ¹å¯ä»¥åˆæˆä¸ºä¸€ä¸ªå­—æ ¹â€œå¤â€,æ‰€ä»¥ç¬¬ä¸€ç§æ‹†æ³•æ˜¯æ­£ç¡®çš„.</p>
<p>å†æ¯”å¦‚é™¤æ³•ä¸­çš„â€œé™¤â€,å¯ä»¥æ‹†åˆ†æˆâ€œé˜ã€å…«ã€ç¦¾â€,æˆ–æ‹†æˆâ€œé˜ã€å…«ã€ä¸¿ã€æœ¨â€.</p>
<p>è¿™æ—¶æˆ‘ä»¬å¯ä»¥åˆ¤æ–­ç¬¬ä¸€ç§æ˜¯æ­£ç¡®çš„,æŠŠâ€œä¸¿ã€æœ¨â€åˆæˆä¸ºä¸€ä¸ªå­—æ ¹â€œç¦¾â€.</p>
<p>â€œä¸–â€å­—å¯ä»¥å–ä¸ºâ€œä¸€ã€å‡µã€ä¹™â€,ä¹Ÿå¯ä»¥å–â€œç”˜ã€ä¹™â€.</p>
<p>å…¼é¡¾ç›´è§‚<br>å°±æ˜¯è¯´åœ¨æ‹†å­—æ—¶,å°½é‡ç…§é¡¾å­—çš„ç›´è§‚æ€§,ä¸€ä¸ªç¬”åˆ’ä¸èƒ½åˆ†å‰²åœ¨ä¸¤ä¸ªå­—æ ¹ä¸­.</p>
<p>å…¼é¡¾ç›´è§‚,åœ¨ç¡®è®¤å­—æ ¹æ—¶,ä¸ºäº†ä½¿å­—æ ¹çš„ç‰¹å¾æ˜æ˜¾æ˜“è¾¨,æœ‰æ—¶å°±è¦ç‰ºç‰²ä¹¦å†™é¡ºåºç¦¾å–å¤§ä¼˜å…ˆåŸåˆ™.</p>
<p>ä¾‹å¦‚:<br>â€œå›½â€,å¦‚æŒ‰ä¹¦å†™é¡ºåº,å…¶å­—æ ¹åº”æ˜¯â€œå†‚ã€ç‹ã€ä¸¶ã€ä¸€â€,ä½†è¿™æ ·ç¼–ç ä¸æ–­æœ‰è¿è¯¥å­—çš„å­—æº,ä¹Ÿä¸èƒ½ä½¿å­—æ ¹â€œå£â€ç›´è§‚æ˜“è¾¨.</p>
<p>ä¸ºäº†ç›´è§‚,å›½å­—çš„æ­£ç¡®æ‹†åˆ†åº”è¯¥æ˜¯â€œå£ã€ç‹ã€ä¸¶â€.</p>
<p>èƒ½æ•£ä¸è¿<br>å¦‚æœä¸€ä¸ªç»“æ„å¯ä»¥è§†ä½œå‡ ä¸ªåŸºç¡€å­—æ ¹çš„æ•£çš„å…³ç³»,å°±ä¸è¦è®¤ä¸ºæ˜¯è¿çš„å…³ç³».</p>
<p>ä¾‹å¦‚:<br>â€œä¸»â€å­—æŒ‰å–å¤§ä¼˜å…ˆ,åº”è¯¥å–â€œäº ã€åœŸâ€,ä½†æ ¹æ®æ­¤è§„åˆ™,åªèƒ½å–â€œä¸¶ã€ç‹â€.</p>
<p>æ€»ä¹‹,æ‹†åˆ†åº”å…¼é¡¾å‡ ä¸ªæ–¹é¢çš„è¦æ±‚.ä¸€èˆ¬æ¥è¯´,åº”å½“ä¿è¯æ¯æ¬¡æ‹†å‡ºæœ€å¤§çš„åŸºæœ¬å­—æ ¹,åœ¨æ‹†å‡ºå­—æ ¹çš„æ•°ç›®ç›¸åŒæ—¶,â€œæ•£â€æ¯”â€œè¿â€ä¼˜å…ˆ,â€œè¿â€æ¯”â€œäº¤â€ä¼˜å…ˆ.</p>
<p>èƒ½è¿ä¸äº¤<br>å½“ä¸€ä¸ªå­—å¯ä»¥è§†ä½œç›¸è¿çš„å‡ ä¸ªå­—æ ¹,ä¹Ÿå¯è§†ä½œç›¸äº¤çš„å‡ ä¸ªå­—æ ¹æ—¶,æˆ‘ä»¬è®¤ä¸º,ç›¸è¿çš„æƒ…å†µæ˜¯å¯å–çš„.</p>
<p>å¤©: ä¸€ å¤§ (ä¸¤è€…æ˜¯ç›¸è¿çš„) (æ­£ç¡®)<br>å¤©: äºŒ äºº (ä¸¤è€…æ˜¯ç›¸äº¤çš„) (é”™è¯¯)</p>
<p>äº”ç¬”æ±‰å­—çš„å–ç è§„åˆ™</p>
<p>1.é”®åæ±‰å­—:ç‹ ç›® ç¦¾ è¨€ å·²<br>è§„åˆ™:æ‰€åœ¨é”®ä½<em>4 2.æˆå­—å­—æ ¹:äº” æˆˆ çš¿ å° ä¹<br>è§„åˆ™:æ‰€åœ¨é”®ä½+ç¬¬ä¸€ç¬”+ç¬¬äºŒç¬”+(æœ«ç¬”) 3.å•ç¬”åˆ’:ä¸€ ä¸¨ ä¸¿ ä¸¶ ä¹™<br>è§„åˆ™:æ‰€åœ¨é”®ä½</em>2+LL</p>
<p>4.ä¸€çº§ç®€ç ï¼ˆä¸€ç®€ï¼Œå…± 25 ä¸ªï¼‰<br>æˆ‘ï¼ˆQï¼‰ äººï¼ˆWï¼‰ æœ‰ï¼ˆEï¼‰ çš„ï¼ˆRï¼‰ å’Œï¼ˆTï¼‰ ä¸»ï¼ˆYï¼‰ äº§ï¼ˆUï¼‰ ä¸ï¼ˆIï¼‰ ä¸ºï¼ˆOï¼‰ è¿™ï¼ˆPï¼‰<br>å·¥ï¼ˆAï¼‰ è¦ï¼ˆSï¼‰ åœ¨ï¼ˆDï¼‰ åœ°ï¼ˆFï¼‰ ä¸€ï¼ˆGï¼‰ ä¸Šï¼ˆHï¼‰ æ˜¯ï¼ˆJï¼‰ ä¸­ï¼ˆKï¼‰ å›½ï¼ˆLï¼‰<br>ç»ï¼ˆXï¼‰ ä»¥ï¼ˆCï¼‰ å‘ï¼ˆVï¼‰ äº†ï¼ˆBï¼‰ æ°‘ï¼ˆNï¼‰ åŒï¼ˆMï¼‰</p>
<ul>
<li><p>ä»–ä»¬æ˜¯ä½¿ç”¨é¢‘ç‡æé«˜çš„å­—ï¼Œå¿…é¡»è®°ä½ã€‚â€œç»å‘åŒå’Œæˆ‘ä»¥ä¸ºï¼Œåœ¨äººæ°‘ä¸­å›½è¿™ä¸€ä¸»è¦å·¥åœ°ä¸Šï¼Œæœ‰çš„æ˜¯äº§ä¸äº†â€ã€‚</p>
</li>
<li><p>æ‰“æ³•ï¼šæ‰“ä¸€æ¬¡æ‰€åœ¨é”®ä½ï¼Œç„¶åæŒ‰ç©ºæ ¼é”®ã€‚</p>
<p>5.äºŒçº§ç®€ç ã€ä¸‰çº§ç®€ç ã€å…¨ç ï¼š<br>ä¸ºäº†æé«˜å½•å…¥é€Ÿåº¦ï¼Œæœ‰äº›å­—çš„ç¼–ç å¯ä»¥ç®€åŒ–ã€‚å¦‚æœä¸€ä¸ªå­—ç”¨ä¸¤ä¸ªå­—æ¯é”®å°±å¯ä»¥æ‰“å‡ºï¼ˆç«‹ UU&#x2F;æ°´ II&#x2F;äº” GGï¼‰ï¼Œé‚£ä¹ˆå®ƒå«åšäºŒçº§ç®€ç ï¼›</p>
</li>
</ul>
<p>å¦‚æœä¸€ä¸ªå­—ç”¨ä¸‰ä¸ªå­—æ¯é”®å°±å¯ä»¥æ‰“å‡ºï¼ˆæ–¤ RTT&#x2F;ç«¹ TTG&#x2F;çš¿ LHNï¼‰ï¼Œé‚£ä¹ˆå®ƒå«åšä¸‰çº§ç®€ç ;</p>
<p>æ±‰å­—çš„å…¨éƒ¨ç¼–ç å«åšå…¨ç ï¼Œå…¨ç æœ€å¤šå››ç ï¼Œæœ€å°‘ä¸‰ç ã€‚</p>
<p>ä»€ä¹ˆæ ·çš„å…¨ç åªæœ‰ä¸‰ç ï¼Ÿ</p>
<ul>
<li><p>åªæœ‰ä¸¤ä¸ªç¬”ç”»çš„æˆå­—å­—æ ¹å¦‚â€œåï¼ˆFGHï¼‰&#x2F;å‚ï¼ˆDGTï¼‰&#x2F;ä¹ï¼ˆVTNï¼‰&#x2F;äºŒï¼ˆFGGï¼‰â€ï¼›</p>
</li>
<li><p>åªèƒ½æ‹†æˆä¸¤éƒ¨åˆ†çš„å­—ã€‚</p>
</li>
<li><p>åªæœ‰ä¸€ä¸ªç¬”ç”»ï¼Ÿé‚£å«åšå•ç¬”ç”»ï¼Œå…¨ç å››ç ï¼</p>
<p>6.å¯æ‹†åˆ†æ±‰å­—</p>
</li>
<li><p>å¯æ‹†æˆä¸¤ä¸ªå­—æ ¹:æ”¹ äº¬ ä»…<br>è§„åˆ™:å­—æ ¹ 1+å­—æ ¹ 2+è¯†åˆ«ç (å…¨ç  3 ç )</p>
</li>
<li><p>å¯æ‹†æˆä¸‰ä¸ªå­—æ ¹:ç­‰ æ¼ ä»°<br>è§„åˆ™:å­—æ ¹ 1+å­—æ ¹ 2+å­—æ ¹ 3+è¯†åˆ«ç </p>
</li>
<li><p>å¯æ‹†æˆå››ä¸ªå­—æ ¹:æ¯ ä¸¤ æ‹¿<br>è§„åˆ™:å­—æ ¹ 1+å­—æ ¹ 2+å­—æ ¹ 3+å­—æ ¹ 4<br>å¯æ‹†æˆå››ä¸ªå­—æ ¹ä»¥ä¸Š:å¹• å™¨ æ…§<br>è§„åˆ™:å­—æ ¹ 1+å­—æ ¹ 2+å­—æ ¹ 3+æœ€åä¸€ä¸ªå­—æ ¹</p>
</li>
</ul>
<p>æœ«ç¬”äº¤å‰è¯†åˆ«ç </p>
<p>Q:ä¸ºä»€ä¹ˆè®¾ç½®è¯†åˆ«ç ?<br>A:ç”±äºå­—æ ¹åœ¨ç»„æˆæ±‰å­—æ—¶,å³ä½¿æ‰€ä½¿ç”¨çš„å­—æ ¹å®Œå…¨ç›¸åŒ,å¦‚æœæ’åºçš„æ–¹å¼ä¸åŒä¹Ÿä¼šå¾—åˆ°ä¸åŒçš„æ±‰å­—;</p>
<p>å› æ­¤,äº”ç¬”å­—å‹æå‡ºäº†æœ«ç¬”äº¤å‰è¯†åˆ«ç ,å®ƒæ˜¯æœ‰åŠ©äºåŒºåˆ«å­—æ ¹ç»„åˆç›¸åŒè€Œå­—æ ¹æ’åˆ—ä½ç½®ç›¸å¼‚çš„ä¸åŒæ±‰å­—çš„ä¸€ç§è¡¥å……ç¼–ç .</p>
<p>å¦‚æœä¸€ä¸ªæ±‰å­—å¯ä»¥æ‹†æˆä¸¤ä¸ªå­—æ ¹æˆ–ä¸‰ä¸ªå­—æ ¹,è¾“å…¥å®Œä»–ä»¬æ‰€åœ¨çš„é”®ä½ä¹‹å,å¦‚æœæ±‰å­—æ²¡æœ‰å‡ºç°åœ¨å€™é€‰çª—å½“ä¸­,é‚£ä¹ˆå°±éœ€è¦åŠ ä¸€ä¸ªè¯†åˆ«ç .</p>
<p>æ¯”å¦‚:å¥¹&#x3D;å¥³+ä¹Ÿ&#x3D;vb<br>ä½†æ˜¯:vb&#x3D;å¥½,â€œå¥¹â€è¯†åˆ«ç ä¸º n<br>æ‰€ä»¥:vbn&#x3D;å¥¹</p>
<p>åˆå¦‚:ç¥¨&#x3D;è¥¿+äºŒ+å°&#x3D;sfi<br>ä½†æ˜¯ sfi&#x3D;æ ‡,â€œç¥¨â€è¯†åˆ«ç ä¸º u<br>æ‰€ä»¥:sfiu&#x3D;ç¥¨</p>
<p>âš ï¸ æ³¨æ„:ä¸‹æ–¹çš„è“è‰²å­—ä¸ºç¤ºä¾‹</p>
<p>å‰ 300 å¸¸ç”¨å­—æ‹†åˆ†</p>
<p>Q:ä¸ºä»€ä¹ˆè¦ç»ƒå‰ 300 å¸¸ç”¨å­—?<br>A:å› ä¸ºå®ƒä»¬å¾ˆå¸¸ç”¨,è¿™äº›å­—å¯ä»¥å åˆ° 65%çš„ä½¿ç”¨é¢‘ç‡,æ‰“ç†Ÿå‰ 300 å¸¸ç”¨å­—,ä»¥åå†ç»ƒä¹ æ‰“æ–‡ç« çš„æ—¶å€™ä¹Ÿä¼šæ›´å¿«.æ— è®ºä½ çš„æ°´å¹³å¤„äºå“ªä¸ªå±‚æ¬¡,å‰ 300 å¸¸ç”¨å­—ä¸€å®šè¦ä¸æ–­ç»ƒä¹ çš„.</p>
<p>è¯†åˆ«ç ç”¨æµ…è“è‰²è¡¨ç¤º(å‰ 300 ä¸­æœ‰ 20 ä¸ªå­—éœ€è¦æ‰“è¯†åˆ«ç )<br>å¯¹ç…§å­—æ ¹å›¾ç†è§£æ¯ä¸ªå­—çš„ç¼–ç .</p>
<p>æ¨ªåŒº<br>G(20 ä¸ª)</p>
<ul>
<li>ä¸€(g) â€“ä¸€çº§ç®€ç </li>
<li>å¼€(ga)</li>
<li>å½¢(gae)</li>
<li>åˆ°(gc) â€“ äºŒçº§ç®€ç </li>
<li>å¤©(gd)</li>
<li>è¡¨(ge)</li>
<li>äº(gf)</li>
<li>äº”(gg) â€“ æˆå­—å­—æ ¹</li>
<li>ä¸‹(gh)</li>
<li>æ­£(ghd)â€“è¯†åˆ«ç  d</li>
<li>æ”¿(ght)</li>
<li>è¿˜(gip)</li>
<li>ç†(gj)</li>
<li>æ›´(gjq)</li>
<li>äº‹(gk)â€“ äºŒçº§ç®€ç </li>
<li>ç°(gm)</li>
<li>ä¸¤(gmww)</li>
<li>ä¸(gn)â€“ äºŒçº§ç®€ç </li>
<li>æ¥(go)</li>
<li>å¹³(gu,guh)</li>
</ul>
<p>F(20 ä¸ª)</p>
<ul>
<li>åœ°(f) â€“ä¸€çº§ç®€ç </li>
<li>æ”¯(fc)</li>
<li>åŠ¨(fcl)</li>
<li>è¿(fcp)</li>
<li>å»(fcu)â€“è¯†åˆ«ç  u</li>
<li>åœŸ(ffff)â€“é”®åæ±‰å­</li>
<li>äºŒ(fg)â€“ æˆå­—å­—æ ¹</li>
<li>å¹²(fggh)â€“ æˆå­—å­—æ ¹</li>
<li>å(fgh)â€“ æˆå­—å­—æ ¹</li>
<li>ç›´(fh)</li>
<li>èµ·(fhn)</li>
<li>è¿›(fj,fjp)â€“ äºŒçº§ç®€ç </li>
<li>å¿—(fn)</li>
<li>è¿‡(fp)</li>
<li>æ— (fq)</li>
<li>æ•™(ftbt)</li>
<li>è€…(ftj)</li>
<li>éƒ½(ftjb)</li>
<li>è€(ftx)</li>
</ul>
<p>D(11 ä¸ª)</p>
<ul>
<li>åœ¨(d)â€“ä¸€çº§ç®€ç </li>
<li>å¤§(dd)â€“ äºŒçº§ç®€ç </li>
<li>å‹(dfy)</li>
<li>ä¸‰(dg)â€“ æˆå­—å­—æ ¹</li>
<li>çŸ³(dgtg)â€“ æˆå­—å­—æ ¹</li>
<li>ç™¾(dj)</li>
<li>é¢(dm)</li>
<li>è€Œ(dmj)</li>
<li>æˆ(dn)</li>
<li>å…‹(dq)</li>
<li>åŸ(dr)</li>
</ul>
<p>S(11 ä¸ª)</p>
<ul>
<li>è¦(s)</li>
<li>æ(se)</li>
<li>æœ¬(sg)</li>
<li>è¥¿(sghg)</li>
<li>ç›¸(sh)</li>
<li>æƒ³(shn)</li>
<li>å¯(sk)</li>
<li>æœº(sm)</li>
<li>æ—(ss)</li>
<li>æ ·(su)</li>
<li>æ ¹(sve)</li>
</ul>
<p>A(11 ä¸ª)</p>
<ul>
<li>å·¥(a)</li>
<li>å¼(aa)</li>
<li>åŸº(ad)</li>
<li>å…¶(adw)</li>
<li>æœŸ(adwe)</li>
<li>é©(af)</li>
<li>ä¸ƒ(ag)</li>
<li>æˆ–(ak)</li>
<li>åŒº(aq)</li>
<li>åˆ‡(av)</li>
<li>å…±(aw)</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://daykalif.github.io/2022/04/03/%E5%8D%A1%E8%80%81%E5%B8%88%E7%9A%84%E7%A1%AC%E6%A0%B8React%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%88%E8%A7%86%E9%A2%91%EF%BC%9A%E5%8D%A1%E9%A2%82%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Daykalif">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/03/%E5%8D%A1%E8%80%81%E5%B8%88%E7%9A%84%E7%A1%AC%E6%A0%B8React%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%88%E8%A7%86%E9%A2%91%EF%BC%9A%E5%8D%A1%E9%A2%82%EF%BC%89/" itemprop="url">å¡è€å¸ˆçš„ç¡¬æ ¸Reacté¢è¯•é¢˜ï¼ˆè§†é¢‘ï¼šå¡é¢‚ï¼‰</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2022-04-03T15:32:54+08:00">
                2022-04-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2022/04/03/%E5%8D%A1%E8%80%81%E5%B8%88%E7%9A%84%E7%A1%AC%E6%A0%B8React%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%88%E8%A7%86%E9%A2%91%EF%BC%9A%E5%8D%A1%E9%A2%82%EF%BC%89/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2022/04/03/%E5%8D%A1%E8%80%81%E5%B8%88%E7%9A%84%E7%A1%AC%E6%A0%B8React%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%88%E8%A7%86%E9%A2%91%EF%BC%9A%E5%8D%A1%E9%A2%82%EF%BC%89/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2022/04/03/%E5%8D%A1%E8%80%81%E5%B8%88%E7%9A%84%E7%A1%AC%E6%A0%B8React%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%88%E8%A7%86%E9%A2%91%EF%BC%9A%E5%8D%A1%E9%A2%82%EF%BC%89/" class="leancloud_visitors" data-flag-title="å¡è€å¸ˆçš„ç¡¬æ ¸Reacté¢è¯•é¢˜ï¼ˆè§†é¢‘ï¼šå¡é¢‚ï¼‰">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  1.9k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  7
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-èŠèŠ-React-ç”Ÿå‘½å‘¨æœŸ"><a href="#1-èŠèŠ-React-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="1.èŠèŠ React ç”Ÿå‘½å‘¨æœŸ"></a>1.èŠèŠ React ç”Ÿå‘½å‘¨æœŸ</h3><p>UI&#x3D;fn(state)<br>ç”¨æˆ·äº¤äº’è§¦å‘äº† this.setStateï¼Œ</p>
<p>stateï¼šè¢«ç§°ä¸º Reconcilerï¼Œç”¨äºè®¡ç®—å‡ºçŠ¶æ€å˜åŒ–ã€‚åœ¨ reconciler ä¸­ä¼šæ‰§è¡Œä¸€ä¸ªè¢«ç§°ä¸º reconcile çš„ç®—æ³•ï¼Œä¹Ÿå°±æ˜¯ diff ç®—æ³•ã€‚æ­¤é˜¶æ®µä¸º render é˜¶æ®µã€‚</p>
<p>fnï¼šè¢«ç§°ä¸º Rendererï¼ˆæ¸²æŸ“å™¨ï¼‰ï¼Œç”¨äºå°†çŠ¶æ€å˜åŒ–æ¸²æŸ“åœ¨è§†å›¾ä¸­ã€‚æ­¤é˜¶æ®µä¸º commit é˜¶æ®µã€‚</p>
<p>è¿™ä¸¤ä¸ªé˜¶æ®µä¼šæ‰§è¡Œæ‰€æœ‰çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚</p>
<blockquote>
<p>render é˜¶æ®µï¼š</p>
</blockquote>
<ul>
<li>Mount<ul>
<li>constructor</li>
<li>componentWillMountã€react17 åºŸå¼ƒã€‘</li>
<li>getDerivedStateFromPropsï¼ˆæ›¿ä»£ componentWillMountï¼‰</li>
<li>render</li>
</ul>
</li>
<li>Update<ul>
<li>componentWillReceivePropsã€react17 åºŸå¼ƒã€‘</li>
<li>getDerivedStateFromProps</li>
<li>shouldComponentUpdate</li>
<li>componentWillUpdateã€react17 åºŸå¼ƒã€‘</li>
<li>render</li>
</ul>
</li>
<li>Error<ul>
<li>getDerivedStateFromErrorï¼ˆæ–°ï¼‰</li>
</ul>
</li>
</ul>
<blockquote>
<p>commit é˜¶æ®µï¼š</p>
</blockquote>
<ul>
<li>Mount<ul>
<li>componentDidMount</li>
</ul>
</li>
<li>Update<ul>
<li>getSnapshotBeforeUpdate</li>
<li>componentDidUpdate</li>
</ul>
</li>
<li>Unmount<ul>
<li>componentWillUnmount</li>
</ul>
</li>
<li>Error<ul>
<li>componentDidCatch</li>
</ul>
</li>
</ul>
<h4 id="ç”Ÿå‘½å‘¨æœŸè¿‡ç¨‹"><a href="#ç”Ÿå‘½å‘¨æœŸè¿‡ç¨‹" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸè¿‡ç¨‹"></a>ç”Ÿå‘½å‘¨æœŸè¿‡ç¨‹</h4><p>1.è°ƒç”¨ ReactDOM.render</p>
<p>2.è¿›å…¥ Render é˜¶æ®µ</p>
<p>3.é‡‡ç”¨æ·±åº¦ä¼˜å…ˆéå†åˆ›å»º fiber æ ‘</p>
<p>4.è¿›å…¥ Commit é˜¶æ®µ</p>
<p>a.ç”¨æˆ·è°ƒç”¨ this.setState,å°† c2 å˜ä¸ºç»¿è‰²</p>
<p>b.è¿›å…¥ Render é˜¶æ®µ</p>
<p>c.é‡‡ç”¨æ·±åº¦ä¼˜å…ˆéå†åˆ›å»º fiber æ ‘</p>
<p>d.reconcile ç®—æ³•æ ‡è®°å˜åŒ–</p>
<p>e.è¿›å…¥ Commit é˜¶æ®µ</p>
<p>f.æ‰§è¡Œ 4 ä¸­çš„å˜åŒ–å¯¹åº”çš„è§†å›¾æ“ä½œ</p>
<h3 id="2-this-setState-æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥"><a href="#2-this-setState-æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥" class="headerlink" title="2.this.setState æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥"></a>2.this.setState æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥</h3><p>æˆ‘ä»¬å®Œå…¨ä¸éœ€è¦ä¾èµ–è¿™ä¸ªç‰¹æ€§ã€‚<br>å¦‚æœæˆ‘ä»¬è¦ä¾èµ–çŠ¶æ€æ›´æ–°åçš„å€¼ï¼Œå¯¹äº classComponentï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ componentDidMount æˆ–è€… componentDidUpdate ä¸­æ‰§è¡Œã€‚<br>å¯¹äº function Componentï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ useEffect çš„å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œã€‚</p>
<p>React å½“å‰æœ‰ 3 ç§æ¨¡å¼ï¼Œ<br>1.legacy æ¨¡å¼<br>ReactDOM.render(<App/>,rootNode)ã€‚è¿™æ˜¯å½“å‰ React app ä½¿ç”¨çš„æ–¹å¼ã€‚å½“å‰æ²¡æœ‰è®¡åˆ’åˆ é™¤æœ¬æ¨¡å¼ï¼Œä½†è¿™ä¸ªæ¨¡å¼å¯èƒ½ä¸æ”¯æŒè¿™äº›æ–°åŠŸèƒ½ã€‚<br>legacy æ¨¡å¼å‘½ä¸­ batchUpdates æ—¶å¼‚æ­¥<br>legacy æ¨¡å¼æœªå‘½ä¸­ batchUpdates æ—¶åŒæ­¥</p>
<p>2.blocking æ¨¡å¼<br>ReactDOM.createBlockingRoot(rootNode).render(<App/>)ã€‚ç›®å‰æ­£åœ¨è¯•éªŒä¸­ã€‚ä½œä¸ºè¿ç§»åˆ° concurrent æ¨¡å¼çš„ç¬¬ä¸€ä¸ªæ­¥éª¤ã€‚</p>
<p>3.concurrent æ¨¡å¼<br>ReactDOM.createRoot(rootNode).render(<App/>)ã€‚ç›®å‰åœ¨è¯•éªŒä¸­ï¼Œæœªæ¥ç¨³å®šä¹‹åï¼Œæ‰“ç®—ä½œä¸º React çš„é»˜è®¤å¼€å‘æ¨¡å¼ã€‚è¿™ä¸ªæ¨¡å¼å¼€å¯äº†æ‰€æœ‰çš„æ–°åŠŸèƒ½ã€‚</p>
<p>åˆ›å»ºçš„æ›´æ–°æ‹¥æœ‰ä¸åŒä¼˜å…ˆçº§ï¼Œæ›´æ–°çš„è¿‡ç¨‹ä¹Ÿå¯ä»¥æ‰“æ–­<br>concurrent æ¨¡å¼éƒ½æ˜¯å¼‚æ­¥</p>
<h3 id="3-useEffect-fn-ä¸-componentDidMount-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#3-useEffect-fn-ä¸-componentDidMount-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="3.useEffect(fn,[])ä¸ componentDidMount æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>3.useEffect(fn,[])ä¸ componentDidMount æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>å…¶å®æ˜¯ fn ä¸ componentDidMount çš„æ‰§è¡Œæ—¶æœºæœ‰ä»€ä¹ˆåŒºåˆ«ã€‚<br>fn çš„æ‰§è¡Œæ—¶æœºä¸ useEffect ç¬¬äºŒä¸ªå‚æ•°æœ‰å…³ã€‚æ‰€ä»¥è¿™ä¸ªé—®é¢˜é—®çš„æ˜¯ï¼š</p>
<blockquote>
<p>1.useEffect ç¬¬äºŒä¸ªå‚æ•°[]å¦‚ä½•å½±å“ fn çš„æ‰§è¡Œï¼Ÿ</p>
</blockquote>
<p>render é˜¶æ®µé€šè¿‡ä¸€ç§è¢«ç§°ä¸º EFFECT çš„æ•°æ®ç»“æ„ã€åœ¨æ–°ç‰ˆ react ä¸­å®ƒåˆè¢«ç§°ä½œ FLAGSã€‘å°†çŠ¶æ€å˜åŒ–ä¼ é€’ç»™ commit é˜¶æ®µã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">å¯¹äºéœ€è¦              æˆ‘ä»¬ä¼šåœ¨å¯¹åº”çš„fiberèŠ‚ç‚¹ä¸Šå¢åŠ            çš„effect</span><br><span class="line">        æ’å…¥DOMçš„å…ƒç´                            Placement</span><br><span class="line">        æ›´æ–°DOMçš„å…ƒç´                            Update</span><br><span class="line">        åˆ é™¤DOMçš„å…ƒç´                            Deletion</span><br><span class="line">        æ›´æ–°Refå±æ€§çš„å…ƒç´                         Ref</span><br><span class="line">        useEffectå›è°ƒçš„å…ƒç´                      Passive</span><br><span class="line"></span><br><span class="line">useEffectå›è°ƒçš„å…ƒç´  æ—¶ï¼š</span><br><span class="line">useEffect(fn) ä¼šåœ¨ Mountå’ŒUPDTATE æ—¶ï¼Œåˆ›å»ºPassiveçš„effect</span><br><span class="line">useEffect(fn,[]) ä¼šåœ¨ Mount æ—¶ï¼Œåˆ›å»ºPassiveçš„effect</span><br><span class="line">useEffect(fn,[dep]) ä¼šåœ¨ Mountå’ŒDPEP æ—¶ï¼Œåˆ›å»ºPassiveçš„effect</span><br><span class="line"></span><br><span class="line">æ’å…¥DOMæ—¶ï¼š</span><br><span class="line">classComponent ä¼šåœ¨ Mount æ—¶åˆ›å»º Placementçš„effect</span><br><span class="line"></span><br><span class="line">æ‰€ä»¥renderé˜¶æ®µåˆ°commité˜¶æ®µä¼ é€’çš„æ˜¯ä¸€æ¡åŒ…å«äº†ä¸åŒfiberèŠ‚ç‚¹çš„effectçš„é“¾è¡¨</span><br><span class="line"></span><br><span class="line">commité˜¶æ®µå¦‚ä½•å¤„ç†é“¾è¡¨ä¸Šçš„æ¯ä¸ªeffectçš„å‘¢ï¼Ÿ</span><br><span class="line">commité˜¶æ®µå°†çŠ¶æ€å˜åŒ–æ¸²æŸ“åœ¨è§†å›¾ä¸­ï¼Œè½¬è€Œè¨€ä¹‹å°±æ˜¯å°†EFFECTæ¸²æŸ“åœ¨è§†å›¾ä¸­ã€‚</span><br><span class="line"></span><br><span class="line">commité˜¶æ®µå¯åˆ†ä¸ºï¼š</span><br><span class="line">1.æ¸²æŸ“è§†å›¾å‰ï¼ˆbeforeMutationé˜¶æ®µï¼‰</span><br><span class="line"></span><br><span class="line">2.æ¸²æŸ“è§†å›¾ï¼ˆmutationé˜¶æ®µï¼‰</span><br><span class="line">å¯¹äºPlacementæ¥è¯´ï¼Œå®ƒä¼šåœ¨mutationé˜¶æ®µæ‰§è¡Œå¯¹åº”DOMèŠ‚ç‚¹appendChildæ“ä½œã€‚è¿™æ ·æˆ‘ä»¬çš„DOMèŠ‚ç‚¹ä¼šè¢«æ’å…¥åˆ°è§†å›¾ä¸­ã€‚</span><br><span class="line"></span><br><span class="line">3.æ¸²æŸ“è§†å›¾åï¼ˆlayouté˜¶æ®µï¼‰</span><br><span class="line">ä¹‹åï¼ŒPlacementä¼šåœ¨layouté˜¶æ®µè°ƒç”¨componentDidMountï¼ŒåŒæ­¥è°ƒç”¨ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¯¹äºPassive Effectæ¥è¯´ã€ä¹Ÿå°±æ˜¯useEffect(fn,[])ã€‘ï¼Œå®ƒä¼šåœ¨æˆ‘ä»¬commité˜¶æ®µçš„ä¸‰ä¸ªå­é˜¶æ®µæ‰§è¡Œå®Œæˆä»¥åï¼Œå¼‚æ­¥è°ƒç”¨useEffectå›è°ƒã€‚</span><br><span class="line"></span><br><span class="line">useLayoutEffectçš„è°ƒç”¨æ—¶æœºå’ŒcomponentDidMountä¸€è‡´ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>2.fn ä¸ componentDidMount çš„æ‰§è¡Œæ—¶æœº</p>
</blockquote>
<h3 id="4-ä»€ä¹ˆæ—¶å€™ä½¿ç”¨-useLayoutEffect-ä»£æ›¿-useEffectï¼Ÿ"><a href="#4-ä»€ä¹ˆæ—¶å€™ä½¿ç”¨-useLayoutEffect-ä»£æ›¿-useEffectï¼Ÿ" class="headerlink" title="4.ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ useLayoutEffect ä»£æ›¿ useEffectï¼Ÿ"></a>4.ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ useLayoutEffect ä»£æ›¿ useEffectï¼Ÿ</h3><p>useEffect å’Œ useLayoutEffectï¼Œæ˜¯ä¸¤ä¸ªå·¥ä½œæ–¹å¼å¾ˆç›¸ä¼¼çš„ React Hookã€‚</p>
<p>ä½ å¯ä»¥åƒä¸‹é¢è¿™æ ·ä½¿ç”¨å®ƒä»¬ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ‰§è¡Œå‰¯ä½œç”¨</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// clean up</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, [dependency, arr]);</span><br><span class="line"></span><br><span class="line"><span class="title function_">useLayoutEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ‰§è¡Œå‰¯ä½œç”¨</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// clean up</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, [dependency, array]);</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯å®ƒä»¬ä¸æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚é€šè¿‡é˜…è¯»ä¸‹é¢çš„å†…å®¹ï¼Œä½ å°†çŸ¥é“ä¸¤è€…ä¹‹é—´æœ‰ä½•ä¸åŒï¼Œä»¥åŠæ¯ä¸€ç§çš„é€‚ç”¨åœºæ™¯ã€‚ï¼ˆå¤§éƒ¨åˆ†åœºæ™¯éƒ½é€‚ç”¨äº useEffectï¼‰</p>
<h4 id="ä¸åŒç‚¹"><a href="#ä¸åŒç‚¹" class="headerlink" title="ä¸åŒç‚¹"></a>ä¸åŒç‚¹</h4><p>ä¸€å¥è¯æ€»ç»“ï¼šä¸¤è€…çš„ä¸åŒåœ¨äºæ‰§è¡Œæ—¶æœºã€‚</p>
<h5 id="useEffect-æ˜¯åœ¨æ¸²æŸ“å‡½æ•°æ‰§è¡Œå®Œæˆï¼Œå¹¶ç»˜åˆ¶åˆ°å±å¹•ä¹‹åï¼Œå†å¼‚æ­¥æ‰§è¡Œã€‚"><a href="#useEffect-æ˜¯åœ¨æ¸²æŸ“å‡½æ•°æ‰§è¡Œå®Œæˆï¼Œå¹¶ç»˜åˆ¶åˆ°å±å¹•ä¹‹åï¼Œå†å¼‚æ­¥æ‰§è¡Œã€‚" class="headerlink" title="useEffect æ˜¯åœ¨æ¸²æŸ“å‡½æ•°æ‰§è¡Œå®Œæˆï¼Œå¹¶ç»˜åˆ¶åˆ°å±å¹•ä¹‹åï¼Œå†å¼‚æ­¥æ‰§è¡Œã€‚"></a>useEffect æ˜¯åœ¨æ¸²æŸ“å‡½æ•°æ‰§è¡Œå®Œæˆï¼Œå¹¶ç»˜åˆ¶åˆ°å±å¹•ä¹‹åï¼Œå†å¼‚æ­¥æ‰§è¡Œã€‚</h5><p>å¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>1.è§¦å‘æ¸²æŸ“å‡½æ•°æ‰§è¡Œï¼ˆæ”¹å˜çŠ¶æ€ï¼Œæˆ–è€…çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼‰</li>
<li>2.React è°ƒç”¨ç»„ä»¶çš„æ¸²æŸ“å‡½æ•°</li>
<li>3.å±å¹•ä¸­é‡ç»˜å®Œæˆ</li>
<li>4.æ‰§è¡Œ useEffect</li>
</ul>
<h5 id="useLayoutEffectï¼Œæ˜¯åœ¨æ¸²æŸ“å‡½æ•°æ‰§è¡Œä¹‹åï¼Œä½†æ˜¯å±å¹•é‡ç»˜å‰åŒæ­¥æ‰§è¡Œã€‚ï¼ˆæ³¨æ„ï¼šå®ƒå¯èƒ½ä¼šå½±å“æ¸²æŸ“ä½“éªŒï¼‰"><a href="#useLayoutEffectï¼Œæ˜¯åœ¨æ¸²æŸ“å‡½æ•°æ‰§è¡Œä¹‹åï¼Œä½†æ˜¯å±å¹•é‡ç»˜å‰åŒæ­¥æ‰§è¡Œã€‚ï¼ˆæ³¨æ„ï¼šå®ƒå¯èƒ½ä¼šå½±å“æ¸²æŸ“ä½“éªŒï¼‰" class="headerlink" title="useLayoutEffectï¼Œæ˜¯åœ¨æ¸²æŸ“å‡½æ•°æ‰§è¡Œä¹‹åï¼Œä½†æ˜¯å±å¹•é‡ç»˜å‰åŒæ­¥æ‰§è¡Œã€‚ï¼ˆæ³¨æ„ï¼šå®ƒå¯èƒ½ä¼šå½±å“æ¸²æŸ“ä½“éªŒï¼‰"></a>useLayoutEffectï¼Œæ˜¯åœ¨æ¸²æŸ“å‡½æ•°æ‰§è¡Œä¹‹åï¼Œä½†æ˜¯å±å¹•é‡ç»˜å‰åŒæ­¥æ‰§è¡Œã€‚ï¼ˆæ³¨æ„ï¼šå®ƒå¯èƒ½ä¼šå½±å“æ¸²æŸ“ä½“éªŒï¼‰</h5><p>å¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>1.è§¦å‘æ¸²æŸ“å‡½æ•°æ‰§è¡Œï¼ˆæ”¹å˜çŠ¶æ€ï¼Œæˆ–è€…çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼‰</li>
<li>2.React è°ƒç”¨ç»„ä»¶çš„æ¸²æŸ“å‡½æ•°</li>
<li>3.æ‰§è¡Œ useLayoutEffectï¼Œå¹¶ä¸” React ç­‰å¾…å®ƒæ‰§è¡Œå®Œæˆ</li>
<li>4.å±å¹•ä¸­é‡ç»˜å®Œæˆ</li>
</ul>
<h4 id="99-çš„åœºæ™¯ï¼Œé€‚ç”¨äº-useEffect"><a href="#99-çš„åœºæ™¯ï¼Œé€‚ç”¨äº-useEffect" class="headerlink" title="99%çš„åœºæ™¯ï¼Œé€‚ç”¨äº useEffect"></a>99%çš„åœºæ™¯ï¼Œé€‚ç”¨äº useEffect</h4><p>å¤§éƒ¨åˆ†çš„åœºæ™¯éƒ½æ˜¯é€šè¿‡ effect åŒæ­¥ä¸€äº›çŠ¶æ€æˆ–è€… propsï¼Œè¿™äº›æ˜¯ä¸éœ€è¦ç«‹å³æ‰§è¡Œçš„ï¼Œæˆ–è€…åšä¸€äº›ä¸å½±å“é¡µé¢æ˜¾ç¤ºçš„äº‹æƒ…ã€‚</p>
<p>ä¾‹å¦‚è¯·æ±‚è¿œç¨‹æ•°æ®ï¼Œæ˜¯ä¸éœ€è¦ç«‹å³åº”ç”¨ç»“æœä¿®æ”¹çš„ã€‚<br>æˆ–è€…è®¾ç½®æŸä¸ªäº‹ä»¶ç›‘å¬ï¼Œæˆ–è€…åœ¨å¼¹çª—æ˜¾ç¤º&#x2F;æ¶ˆå¤±çš„æ—¶å€™ï¼Œé‡ç½®æŸäº›çŠ¶æ€ã€‚</p>
<p>å¤§éƒ¨åˆ†çš„åœºæ™¯ï¼ŒuseEffect è¶³å¤Ÿäº†ã€‚</p>
<h4 id="ä»€ä¹ˆæ—¶å€™ä½¿ç”¨-useLayoutEffect"><a href="#ä»€ä¹ˆæ—¶å€™ä½¿ç”¨-useLayoutEffect" class="headerlink" title="ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ useLayoutEffect?"></a>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ useLayoutEffect?</h4><p>ä»€ä¹ˆæ ·çš„åœºæ™¯éœ€è¦ä½¿ç”¨ useLayoutEffectï¼Ÿå½“ä½ çœ‹è§çš„æ—¶å€™ï¼Œä½ å°±çŸ¥é“äº†ã€‚ï¼ˆå­—é¢æ„æ€ï¼‰</p>
<p>å¦‚æœçŠ¶æ€æ›´æ–°ï¼Œå¯¼è‡´ç»„ä»¶æ¸²æŸ“é—ªçƒï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå°±åº”è¯¥ç”¨ useLayoutEffectï¼Œä¾‹å¦‚åˆæ¬¡æ¸²æŸ“åªæœ‰éƒ¨åˆ†çŠ¶æ€æ­£ç¡®ï¼Œç„¶åç«‹åˆ»ä½¿ç”¨æœ€ç»ˆçŠ¶æ€é‡æ–°æ¸²æŸ“æ—¶ï¼Œå¯èƒ½ä¼šå‘ç”Ÿä¸Šè¿°æƒ…å†µã€‚</p>
<p>è®©æˆ‘ç”¨ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜å…·ä½“æƒ…å†µã€‚</p>
<p>å½“ä½ ç‚¹å‡»é¡µé¢æ—¶ï¼ŒçŠ¶æ€ç«‹å³å‘ç”Ÿæ”¹å˜ï¼ˆvalue é‡ç½®ä¸º 0ï¼‰ï¼Œæ­¤æ—¶ä¼šç«‹åˆ»å‡ºå‘ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œå¹¶é‡ç»˜åˆ°å±å¹•ä¸Šï¼Œç„¶å effect æ‰§è¡Œï¼Œå°† value è®¾ç½®ä¸ºæŸä¸ªéšæœºæ•°ï¼ŒåŒæ—¶å†æ¬¡ç«‹åˆ»è§¦å‘é‡æ–°æ¸²æŸ“ã€‚</p>
<p>è¿™æ ·å°±ä¼šå¯¼è‡´ 2 æ¬¡æ¸²æŸ“è¿ç»­å‘ç”Ÿã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useLayoutEffect &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">BlinkyRender</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [value, setValue] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useLayoutEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (value === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="title function_">setValue</span>(<span class="number">10</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">200</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, [value]);</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;render&quot;</span>, value);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setValue(0)&#125;&gt;value: &#123;&#123; value &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">BlinkyRender</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#root&quot;</span>));</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨ div ä¸Šç»‘å®š onClick äº‹ä»¶æ˜¯ä¸æ¨èçš„ï¼ˆä½¿ç”¨ button ä»£æ›¿ï¼‰ï¼Œä½†æ˜¯è¿™åªæ˜¯ä¸€ä¸ªæ¼”ç¤ºä¾‹å­ã€‚ã€åªæ˜¯æƒ³æé†’ä¸€ä¸‹ã€‘</p>
</blockquote>
<p>å¯ä»¥è‡ªå·±å°è¯•ç”¨ useLayoutEffect å’Œ useEffect åˆ†åˆ«å®ç°çœ‹çœ‹ã€‚<br>psï¼šæˆ‘è‡ªå·±å®è·µäº†ä¸€ä¸‹ï¼Œæ²¡å•¥åŒºåˆ«ï¼Œå¯èƒ½æ˜¯ä¼˜åŒ–äº†ï½<br>ç›¸ä¿¡ä½ å·²ç»æ³¨æ„åˆ°äº†ï¼Œä½¿ç”¨ useLayoutEffect æ—¶ï¼Œè™½ç„¶æ¸²æŸ“å‡½æ•°æ‰§è¡Œ 2 æ¬¡ï¼Œä½†æ˜¯é¡µé¢é‡ç»˜åªæ‰§è¡Œä¸€æ¬¡ã€‚è€Œä½¿ç”¨ useEffect æ—¶ï¼Œæ¸²æŸ“å‡½æ•°æ‰§è¡Œ 2 æ¬¡ï¼Œé¡µé¢ä¹Ÿé‡ç»˜ 2 æ¬¡ï¼Œä½ ä¼šçœ‹è§æœ‰ä¸€ä¸ªå¿«é€Ÿé—ªçƒçš„ 0ã€‚</p>
<h4 id="æˆ‘åº”è¯¥ä½¿ç”¨-useEffect-è¿˜æ˜¯-useLayoutEffect"><a href="#æˆ‘åº”è¯¥ä½¿ç”¨-useEffect-è¿˜æ˜¯-useLayoutEffect" class="headerlink" title="æˆ‘åº”è¯¥ä½¿ç”¨ useEffect è¿˜æ˜¯ useLayoutEffect?"></a>æˆ‘åº”è¯¥ä½¿ç”¨ useEffect è¿˜æ˜¯ useLayoutEffect?</h4><p>å¤§éƒ¨åˆ†åœºæ™¯ä¸­ï¼ŒuseEffect æ˜¯æ­£ç¡®çš„é€‰æ‹©ã€‚å¦‚æœé‡åˆ°é—ªçƒçš„åœºæ™¯ï¼Œå¯ä»¥æ¢åˆ° useLayoutEffectï¼Œçœ‹ä¸€ä¸‹æ˜¯å¦èƒ½è§£å†³é—®é¢˜ã€‚</p>
<p>å› ä¸º useLayoutEffect æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œå› æ­¤ä¼šå‘ç”Ÿé˜»å¡ï¼Œç›´åˆ° effect æ‰§è¡Œå®Œæˆæ‰ä¼šè¿›è¡Œé¡µé¢é‡ç»˜ï¼Œå¦‚æœä½ çš„ effect å†…éƒ¨æœ‰æ‰§è¡Œå¾ˆæ…¢çš„ä»£ç ï¼Œå¯èƒ½ä¼šå¼•èµ·æ€§èƒ½é—®é¢˜ã€‚</p>
<p>å‚è€ƒè§†é¢‘ï¼š<br><a href="https://www.bilibili.com/video/BV16t4y1r7oJ">https://www.bilibili.com/video/BV16t4y1r7oJ</a><br><a href="https://juejin.cn/post/6844904177521426439">https://juejin.cn/post/6844904177521426439</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://daykalif.github.io/2022/04/03/React/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98-%E2%80%94%E2%80%94-React-Hooks-%E5%AE%8C%E5%85%A8%E8%A7%A3%E6%9E%90%EF%BC%88%E8%A7%86%E9%A2%91%EF%BC%9Atroj-%E6%9C%A8%E7%89%9B%E6%9C%A8%E9%A9%AC%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Daykalif">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/03/React/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98-%E2%80%94%E2%80%94-React-Hooks-%E5%AE%8C%E5%85%A8%E8%A7%A3%E6%9E%90%EF%BC%88%E8%A7%86%E9%A2%91%EF%BC%9Atroj-%E6%9C%A8%E7%89%9B%E6%9C%A8%E9%A9%AC%EF%BC%89/" itemprop="url">å‰ç«¯é¢è¯•ä¸“é¢˜ â€”â€” React Hooks å®Œå…¨è§£æï¼ˆè§†é¢‘ï¼štroj-æœ¨ç‰›æœ¨é©¬ï¼‰</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2022-04-03T14:14:08+08:00">
                2022-04-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2022/04/03/React/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98-%E2%80%94%E2%80%94-React-Hooks-%E5%AE%8C%E5%85%A8%E8%A7%A3%E6%9E%90%EF%BC%88%E8%A7%86%E9%A2%91%EF%BC%9Atroj-%E6%9C%A8%E7%89%9B%E6%9C%A8%E9%A9%AC%EF%BC%89/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2022/04/03/React/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98-%E2%80%94%E2%80%94-React-Hooks-%E5%AE%8C%E5%85%A8%E8%A7%A3%E6%9E%90%EF%BC%88%E8%A7%86%E9%A2%91%EF%BC%9Atroj-%E6%9C%A8%E7%89%9B%E6%9C%A8%E9%A9%AC%EF%BC%89/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2022/04/03/React/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E4%B8%93%E9%A2%98-%E2%80%94%E2%80%94-React-Hooks-%E5%AE%8C%E5%85%A8%E8%A7%A3%E6%9E%90%EF%BC%88%E8%A7%86%E9%A2%91%EF%BC%9Atroj-%E6%9C%A8%E7%89%9B%E6%9C%A8%E9%A9%AC%EF%BC%89/" class="leancloud_visitors" data-flag-title="å‰ç«¯é¢è¯•ä¸“é¢˜ â€”â€” React Hooks å®Œå…¨è§£æï¼ˆè§†é¢‘ï¼štroj-æœ¨ç‰›æœ¨é©¬ï¼‰">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  2.3k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  12
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-useState"><a href="#1-useState" class="headerlink" title="1.useState"></a>1.useState</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> [count1, setCount1] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;render&quot;</span>); <span class="comment">// åªä¼šæ‰“å°ä¸€æ¬¡</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;count1&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">          setCount((x) =&gt; x + 1);</span></span><br><span class="line"><span class="language-xml">          setCount1((x) =&gt; x + 1);</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      &gt;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="2-useEffect"><a href="#2-useEffect" class="headerlink" title="2.useEffect"></a>2.useEffect</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ­¤å¤„çš„setTimeoutåœ¨useEffectä¸­,ç›¸å½“äºæ˜¯setInterval;</span></span><br><span class="line">  <span class="comment">// å¹¶ä¸”æ­¤å¤„çš„useEffectä¼šæ‰§è¡Œ6æ¬¡,å› ä¸ºæœ€å1æ¬¡ä¸º6çš„æ—¶å€™,ä¹Ÿä¼šè§†ä¸ºä¾èµ–5çš„å˜åŒ–</span></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> I = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">setCount</span>(<span class="function">(<span class="params">x</span>) =&gt;</span> x + <span class="number">1</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">clearTimeout</span>(I);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;, [<span class="title class_">Math</span>.<span class="title function_">min</span>(count, <span class="number">5</span>)]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="3-lifeCycle-è¿ç§»"><a href="#3-lifeCycle-è¿ç§»" class="headerlink" title="3.lifeCycle è¿ç§»"></a>3.lifeCycle è¿ç§»</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Input</span> = (<span class="params">props</span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`value changed:<span class="subst">$&#123;props.value&#125;</span>`</span>);</span><br><span class="line">  &#125;, [props.<span class="property">value</span>]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> /&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (props) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [value, setValue] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;component did mount&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;component will unmount&quot;</span>); <span class="comment">// åˆ‡æ¢é¡µé¢é”€æ¯æ‰§è¡Œ</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Input</span> <span class="attr">value</span>=<span class="string">&#123;value&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setValue((x) =&gt; Math.random())&#125;&gt;Click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="4-useRef-useImperitiveHandle"><a href="#4-useRef-useImperitiveHandle" class="headerlink" title="4.useRef&#x2F;useImperitiveHandle"></a>4.useRef&#x2F;useImperitiveHandle</h3><p>å¦‚ä¸‹æ–¹å¼è¿åäº†è®¾è®¡åŸåˆ™:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;</span><br><span class="line">  useEffect,</span><br><span class="line">  useRef,</span><br><span class="line">  forwardRef,</span><br><span class="line">  useImperativeHandle,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Input</span> = (<span class="params">props, ref</span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    ref.<span class="property">current</span>.<span class="property">value</span> = props.<span class="property">initialValue</span>;</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;ref&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> props.onChange(e.target.value)&#125; /&gt;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MInput</span> = <span class="title function_">forwardRef</span>(<span class="title class_">Input</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (props) =&gt; &#123;</span><br><span class="line">  <span class="comment">// è¿æ³•é¢å‘å¯¹è±¡å°è£…åŸåˆ™</span></span><br><span class="line">  <span class="keyword">const</span> r1 = <span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">const</span> r2 = <span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">MInput</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">ref</span>=<span class="string">&#123;r1&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">initialValue</span>=<span class="string">&#123;100&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;(x)</span> =&gt;</span> console.log(&quot;1:&quot; + x)&#125;</span></span><br><span class="line"><span class="language-xml">      /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">MInput</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">ref</span>=<span class="string">&#123;r2&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">initialValue</span>=<span class="string">&#123;</span>&quot;<span class="attr">hello</span>&quot;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;(x)</span> =&gt;</span> console.log(&quot;2:&quot; + x)&#125;</span></span><br><span class="line"><span class="language-xml">      /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">          console.log(r1); // è¿™é‡Œçš„r1æ˜¯button</span></span><br><span class="line"><span class="language-xml">          r1.current.focus();</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      &gt;</span></span><br><span class="line"><span class="language-xml">        focus 1</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span>&#123;&quot; &quot;&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">          r2.current.focus();</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      &gt;</span></span><br><span class="line"><span class="language-xml">        focus 2</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>æ¨èä½¿ç”¨:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;</span><br><span class="line">  useEffect,</span><br><span class="line">  useRef,</span><br><span class="line">  forwardRef,</span><br><span class="line">  useImperativeHandle,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Input</span> = (<span class="params">props, ref</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> refInput = <span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useImperativeHandle</span>(</span><br><span class="line">    ref,</span><br><span class="line">    <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">focus</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        refInput.<span class="property">current</span>.<span class="title function_">focus</span>();</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;),</span><br><span class="line">    []</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    refInput.<span class="property">current</span>.<span class="property">value</span> = props.<span class="property">initialValue</span>;</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;refInput&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> props.onChange(e.target.value)&#125; /&gt;</span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MInput</span> = <span class="title function_">forwardRef</span>(<span class="title class_">Input</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (props) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> r1 = <span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">const</span> r2 = <span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">MInput</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">ref</span>=<span class="string">&#123;r1&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">initialValue</span>=<span class="string">&#123;100&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;(x)</span> =&gt;</span> console.log(&quot;1:&quot; + x)&#125;</span></span><br><span class="line"><span class="language-xml">      /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">MInput</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">ref</span>=<span class="string">&#123;r2&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">initialValue</span>=<span class="string">&#123;</span>&quot;<span class="attr">hello</span>&quot;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;(x)</span> =&gt;</span> console.log(&quot;2:&quot; + x)&#125;</span></span><br><span class="line"><span class="language-xml">      /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">          console.log(r1); // è¿™é‡Œçš„r1å°±åªæ˜¯å­ç»„ä»¶å°è£…çš„ä¸€ä¸ªfocusæ–¹æ³•</span></span><br><span class="line"><span class="language-xml">          r1.current.focus();</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      &gt;</span></span><br><span class="line"><span class="language-xml">        focus 1</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">          r2.current.focus();</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      &gt;</span></span><br><span class="line"><span class="language-xml">        focus 2</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="5-useContext"><a href="#5-useContext" class="headerlink" title="5.useContext"></a>5.useContext</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useContext &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ctx = <span class="title class_">React</span>.<span class="title function_">createContext</span>(<span class="literal">null</span>);</span><br><span class="line"><span class="comment">// ctx.Provider</span></span><br><span class="line"><span class="comment">// ctx.Consumer</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">Provider</span> &#125; = ctx;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­™ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Desendants</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> value = <span class="title function_">useContext</span>(ctx);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;value&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Child</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Desendants</span> /&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// çˆ¶ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Parent</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Provider</span> <span class="attr">value</span>=<span class="string">&quot;hello world&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Child</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Provider</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Parent</span>;</span><br></pre></td></tr></table></figure>

<h3 id="5-misorder-é—®é¢˜"><a href="#5-misorder-é—®é¢˜" class="headerlink" title="5.misorder é—®é¢˜"></a>5.misorder é—®é¢˜</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Greetings</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> [display, setDisplay] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¸è¦ä½¿ç”¨ä¸‹é¢çš„å†™æ³•1:</span></span><br><span class="line">  <span class="comment">// é”™è¯¯:é€’å½’</span></span><br><span class="line">  <span class="keyword">if</span> (count &gt; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="title function_">setDisplay</span>(<span class="function">(<span class="params">x</span>) =&gt;</span> <span class="literal">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¸è¦ä½¿ç”¨ä¸‹é¢çš„å†™æ³•2:</span></span><br><span class="line">  <span class="comment">// render more hooks than previous render</span></span><br><span class="line">  <span class="keyword">if</span> (count &gt; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">setDisplay</span>(<span class="function">(<span class="params">x</span>) =&gt;</span> <span class="literal">true</span>);</span><br><span class="line">    &#125;, []);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">setDisplay</span>(<span class="function">(<span class="params">x</span>) =&gt;</span> <span class="literal">false</span>);</span><br><span class="line">    &#125;, []);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å»ºè®®ä½¿ç”¨ä¸‹é¢çš„å†™æ³•:</span></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">setDisplay</span>(<span class="function">(<span class="params">x</span>) =&gt;</span> <span class="literal">false</span>);</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount((x) =&gt; x + 1)&#125;&gt;+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;display &amp;&amp; <span class="tag">&lt;<span class="name">Greetings</span> /&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="6-useLayoutEffect"><a href="#6-useLayoutEffect" class="headerlink" title="6.useLayoutEffect"></a>6.useLayoutEffect</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useEffect, useLayoutEffect &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`effect:`</span> + <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>());</span><br><span class="line">  &#125;, [count]);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useLayoutEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`layout:`</span> + <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>());</span><br><span class="line">  &#125;, [count]);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> I = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">setCount</span>(<span class="function">(<span class="params">x</span>) =&gt;</span> x + <span class="number">1</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">clearInterval</span>(I);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="7-useDebug"><a href="#7-useDebug" class="headerlink" title="7.useDebug"></a>7.useDebug</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useDebugValue, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [isOnline, setIsOnline] = <span class="title function_">useState</span>(<span class="literal">null</span>);</span><br><span class="line">  <span class="title function_">useDebugValue</span>(isOnline ? <span class="string">&quot;Online&quot;</span> : <span class="string">&quot;Offline&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="8-è¦ä¸è¦ä½¿ç”¨-useMemo-å’Œ-useCallback"><a href="#8-è¦ä¸è¦ä½¿ç”¨-useMemo-å’Œ-useCallback" class="headerlink" title="8.è¦ä¸è¦ä½¿ç”¨ useMemo å’Œ useCallback?"></a>8.è¦ä¸è¦ä½¿ç”¨ useMemo å’Œ useCallback?</h3><h5 id="ã€Œè§†é¢‘ä»£ç å‚è€ƒ-https-www-bilibili-com-video-BV1gf4y1X7bQã€"><a href="#ã€Œè§†é¢‘ä»£ç å‚è€ƒ-https-www-bilibili-com-video-BV1gf4y1X7bQã€" class="headerlink" title="ã€Œè§†é¢‘ä»£ç å‚è€ƒ:https://www.bilibili.com/video/BV1gf4y1X7bQã€"></a>ã€Œè§†é¢‘ä»£ç å‚è€ƒ:<a href="https://www.bilibili.com/video/BV1gf4y1X7bQ%E3%80%8D">https://www.bilibili.com/video/BV1gf4y1X7bQã€</a></h5><ul>
<li><p>å“ªäº›æƒ…å†µä¸€ä¸ªç»„ä»¶ä¼šé‡æ–°æ¸²æŸ“?</p>
<ul>
<li>1.ç»„ä»¶è‡ªå·±çš„ state å˜åŒ–</li>
<li>2.çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„ props å˜åŒ–</li>
<li>3.çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“äº†</li>
</ul>
</li>
<li><p>useMemo ä½¿ç”¨åœºæ™¯</p>
<ul>
<li>1.å¦‚æœä¸€äº›å€¼çš„è®¡ç®—é‡å¾ˆå¤§,é‚£ä¹ˆå¯ä»¥ç”¨ useMemo æ¥åšä¸€ä¸ªç¼“å­˜,åªæœ‰ä¾èµ–å˜åŒ–æ—¶æ‰ä¼šé‡æ–°è®¡ç®—,è€Œä¸æ˜¯æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½è¿›è¡Œè®¡ç®—</li>
</ul>
</li>
<li><p>useCallback ä½¿ç”¨åœºæ™¯</p>
<ul>
<li>1.å¯¹äºéœ€è¦ä¼ é€’å‡½æ•°ç»™å­ç»„ä»¶çš„åœºåˆ,ä¸ä½¿ç”¨ useCallback çš„è¯,å­ç»„ä»¶æ¯æ¬¡éƒ½ä¼šé‡æ–°æ¸²æŸ“;</li>
<li>2.åœ¨è°ƒç”¨èŠ‚æµã€é˜²æŠ–å‡½æ•°æ—¶.</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨è°ƒç”¨èŠ‚æµã€é˜²æŠ–å‡½æ•°æ—¶ä½¿ç”¨useCallback</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useCallback &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Input</span> &#125; <span class="keyword">from</span> <span class="string">&quot;antd&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&quot;lodash&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [name, setName] = <span class="title function_">useState</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">search</span> = (<span class="params">value</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æ¨¡æ‹Ÿsearchæ“ä½œï¼š<span class="subst">$&#123;value&#125;</span>`</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> debounchSearch = <span class="title function_">useCallback</span>(_.<span class="title function_">debounce</span>(search, <span class="number">300</span>), []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onChange</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; value &#125; = e.<span class="property">target</span>;</span><br><span class="line">    <span class="title function_">setName</span>(value);</span><br><span class="line">    <span class="title function_">debounchSearch</span>(value);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;styles.wrapper&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Input</span> <span class="attr">value</span>=<span class="string">&#123;name&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;onChange&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸ªäººè§‚ç‚¹:<ul>
<li>åœ¨å‡ºç°æ€§èƒ½é—®é¢˜å,è¿›è¡Œä¼˜åŒ–æ—¶å¯ä»¥è€ƒè™‘ä½¿ç”¨ useMemo å’Œ useCallback å¯¹æ€§èƒ½è¿›è¡Œä¸€å®šå¯¹ä¼˜åŒ–;</li>
<li>å¦‚æœæ²¡æœ‰æ€§èƒ½é—®é¢˜å¯ä»¥ä¸ç”¨,è¿™æ ·å¯ä»¥æ›´ä¸“æ³¨äºä»£ç æœ¬èº«é€»è¾‘.</li>
</ul>
</li>
</ul>
<p>çˆ¶ç»„ä»¶ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useCallback &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="title class_">Count</span> <span class="keyword">from</span> <span class="string">&quot;./components/Count&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [score, setScore] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useSatet</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;parent render&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹äºéœ€è¦ä¼ é€’å‡½æ•°ç»™å­ç»„ä»¶çš„åœºåˆ,ä¸ä½¿ç”¨ useCallback çš„è¯,å­ç»„ä»¶æ¯æ¬¡éƒ½ä¼šé‡æ–°æ¸²æŸ“</span></span><br><span class="line">  <span class="keyword">const</span> onClickCount = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;&#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;styles.wrapper&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(score + 1)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">        parent score+1</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>score:&#123;score<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>setCount(count+1)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">        child count+1</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Count</span> <span class="attr">value</span>=<span class="string">&#123;count&#125;</span> <span class="attr">onClick</span>=<span class="string">&#123;onClickCount&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å­ç»„ä»¶ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useMemo &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Card</span> &#125; <span class="keyword">from</span> <span class="string">&quot;antd&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; value &#125; = props;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¸€äº›å€¼çš„è®¡ç®—é‡å¾ˆå¤§,é‚£ä¹ˆå¯ä»¥ç”¨ useMemo æ¥åšä¸€ä¸ªç¼“å­˜</span></span><br><span class="line">  <span class="keyword">const</span> xxx = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> value * <span class="number">10</span>;</span><br><span class="line">  &#125;, [value]);</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;child render&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Card</span>&gt;</span>count:&#123;value&#125; (è¿™é‡Œæ˜¯å­ç»„ä»¶)<span class="tag">&lt;/<span class="name">Card</span>&gt;</span></span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="9-useReducer"><a href="#9-useReducer" class="headerlink" title="9.useReducer"></a>9.useReducer</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useReducer &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> initialState = &#123; <span class="attr">count</span>: <span class="number">0</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;increment&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;decrement&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">count</span>: state.<span class="property">count</span> - <span class="number">1</span> &#125;;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [state, dispatch] = <span class="title function_">useReducer</span>(reducer, initialState);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      Count: &#123;state.count&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &quot;decrement&quot; &#125;)&#125;&gt;-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &quot;increment&quot; &#125;)&#125;&gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Counter</span>;</span><br></pre></td></tr></table></figure>

<h3 id="å¼‚æ­¥è¯·æ±‚æ”¹é€ "><a href="#å¼‚æ­¥è¯·æ±‚æ”¹é€ " class="headerlink" title="å¼‚æ­¥è¯·æ±‚æ”¹é€ :"></a>å¼‚æ­¥è¯·æ±‚æ”¹é€ :</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useReducer &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> initialState = &#123; <span class="attr">count</span>: <span class="number">0</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;increment&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;decrement&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">count</span>: state.<span class="property">count</span> - <span class="number">1</span> &#125;;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°è£…äº†ä¸€ä¸ªmiddleWare</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useMyReducer</span>(<span class="params">reducer, initialState</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [state, dispatch] = <span class="title function_">useReducer</span>(reducer, initialState);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">myDispatch</span>(<span class="params">action</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (action) &#123;</span><br><span class="line">      <span class="comment">// ä¸¾ä¾‹,è¿™é‡Œå¯ä»¥åšå¼‚æ­¥è¯·æ±‚</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">&quot;url&quot;</span>:</span><br><span class="line">        <span class="title function_">fetch</span>(<span class="string">&quot;https://xxx&quot;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title function_">dispatch</span>(&#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;xxx&quot;</span>,</span><br><span class="line">            data,</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> [state, myDispatch];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [state, dispatch] = <span class="title function_">useMyReducer</span>(reducer, initialState);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      Count: &#123;state.count&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &quot;decrement&quot; &#125;)&#125;&gt;-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &quot;increment&quot; &#125;)&#125;&gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Counter</span>;</span><br></pre></td></tr></table></figure>

<h3 id="10-react-hoc"><a href="#10-react-hoc" class="headerlink" title="10.react hoc"></a>10.react hoc</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; request &#125; <span class="keyword">from</span> <span class="string">&quot;https&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">withUsers</span> = (<span class="params">Target</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">class</span> <span class="title class_">Proxy</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">super</span>();</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">        <span class="attr">users</span>: <span class="literal">null</span>,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title class_">ComponentDidMount</span>() &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">          <span class="attr">users</span>: [<span class="string">&quot;å°æ˜&quot;</span>, <span class="string">&quot;å°å¼ &quot;</span>],</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;, <span class="number">2000</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; users &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">      <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Target</span> <span class="attr">user</span>=<span class="string">&#123;users&#125;</span> /&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Proxy</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">useRequest</span> = (<span class="params">url, params</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [data, setData] = <span class="title function_">useState</span>(<span class="literal">null</span>);</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">request</span>(url, params).<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">setData</span>(data);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;),</span><br><span class="line">    [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">reload</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">setData</span>(<span class="literal">null</span>);</span><br><span class="line">    <span class="title function_">request</span>(url, params).<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">setData</span>(data);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> [data, reload];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">withUsers</span>(<span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// const &#123;users&#125; = props;</span></span><br><span class="line">  <span class="keyword">const</span> [users, reload] = <span class="title function_">useRequest</span>(<span class="string">&quot;https:..get-users&quot;</span>, &#123;</span><br><span class="line">    <span class="attr">num</span>: <span class="number">210</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (users === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>loading...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;users.map((x, i) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">        return <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;i&#125;</span>&gt;</span>&#123;x&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span>;</span></span><br><span class="line"><span class="language-xml">      &#125;)&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;reload&#125;</span>&gt;</span>é‡æ–°åŠ è½½<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="react-hoc-animation-å®ç°"><a href="#react-hoc-animation-å®ç°" class="headerlink" title="react-hoc animation å®ç°:"></a>react-hoc animation å®ç°:</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./animation.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useAnimation</span>(<span class="params">_clsName, duration = <span class="number">300</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [phase, setPhase] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> [className, setClassName] = <span class="title function_">useState</span>(_clsName);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">play</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">setPhase</span>(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (phase === <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="title function_">setClassName</span>(_clsName + <span class="string">&quot; &quot;</span> + className + <span class="string">&quot;-start&quot;</span>);</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">setClassName</span>(_clsName + <span class="string">&quot; &quot;</span> + className + <span class="string">&quot;-end&quot;</span>);</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="title function_">setClassName</span>(_clsName);</span><br><span class="line">          <span class="title function_">setPhase</span>(<span class="number">0</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;, duration);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, [phase]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> [className, play];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [className, playAnimation] = <span class="title function_">useAnimation</span>(<span class="string">&quot;box&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;className&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;playAnimation&#125;</span>&gt;</span>play<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box-start</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">transition</span>: margin-left <span class="number">0.3s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box-end</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/source/_posts/img/react-hooks.png" alt="React-hooks"></p>
<p>å‚è€ƒè§†é¢‘ï¼š<br><a href="https://www.bilibili.com/video/BV1cE411i7F1">https://www.bilibili.com/video/BV1cE411i7F1</a></p>
<p>github æºç åœ°å€:<br><a href="https://github.com/kyjm/react-hooks-example/">https://github.com/kyjm/react-hooks-example/</a></p>
<p>è¦ä¸è¦ä½¿ç”¨ useMemo å’Œ useCallbackï¼š<br><a href="https://www.bilibili.com/video/BV1gf4y1X7bQ">https://www.bilibili.com/video/BV1gf4y1X7bQ</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://daykalif.github.io/2022/04/03/JS/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91%E4%BD%BF%E7%94%A8%E5%8E%9F%E7%94%9FJavaScript%E5%AE%9E%E7%8E%B0%E7%9A%84EventEmitter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Daykalif">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/03/JS/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91%E4%BD%BF%E7%94%A8%E5%8E%9F%E7%94%9FJavaScript%E5%AE%9E%E7%8E%B0%E7%9A%84EventEmitter/" itemprop="url">ã€è½¬è½½ã€‘ä½¿ç”¨åŸç”ŸJavaScriptå®ç°çš„EventEmitter</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2022-04-03T13:20:36+08:00">
                2022-04-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2022/04/03/JS/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91%E4%BD%BF%E7%94%A8%E5%8E%9F%E7%94%9FJavaScript%E5%AE%9E%E7%8E%B0%E7%9A%84EventEmitter/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2022/04/03/JS/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91%E4%BD%BF%E7%94%A8%E5%8E%9F%E7%94%9FJavaScript%E5%AE%9E%E7%8E%B0%E7%9A%84EventEmitter/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2022/04/03/JS/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91%E4%BD%BF%E7%94%A8%E5%8E%9F%E7%94%9FJavaScript%E5%AE%9E%E7%8E%B0%E7%9A%84EventEmitter/" class="leancloud_visitors" data-flag-title="ã€è½¬è½½ã€‘ä½¿ç”¨åŸç”ŸJavaScriptå®ç°çš„EventEmitter">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  745
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  3
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å’Œ Nodejs ä¸­ EventEmitter åŠŸèƒ½ç±»ä¼¼.é€‚åˆæµè§ˆå™¨è‡ªå®šä¹‰äº‹ä»¶ç±».æ–°æ·»åŠ äº†å¯ä»¥å®šåˆ¶äº‹ä»¶ä¿ƒå‘æ¬¡æ•°çš„åŠŸèƒ½.</p>
<p>è¯¦ç»†è§</p>
<p><a href="https://github.com/webery/ajax/tree/master">https://github.com/webery/ajax/tree/master</a></p>
<p>åŒ…æ‹¬äº†æºä»£ç å’Œæµ‹è¯•ä»£ç .æœªç»è¿‡ä¸¥æ ¼æµ‹è¯•,æš‚æ—¶ä¸ºç¬¬ä¸€ä¸ªç‰ˆæœ¬.è¿˜æœ‰å¾ˆå¤šä¼˜åŒ–çš„åœ°æ–¹,ç°åœ¨åªæ˜¯ä¸€ä¸ªå‚è€ƒ.</p>
<p>ä½¿ç”¨æ–¹æ³•</p>
<p>å‰ç«¯æµ‹è¯•æ–‡ä»¶:emit.ejs</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/stylesheets/style.css&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/javascripts/eventemitter.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;click&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;submit&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        var emit = new EventEmitter();</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      </span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        emit.on(&#x27;click&#x27;, function() &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">          console.log(&#x27;clcik&#x27;);</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        &#125;, 2);</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        emit.trigger(&#x27;click&#x27;);</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        emit.trigger(&#x27;click&#x27;);</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        emit.trigger(&#x27;click&#x27;);</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">      */</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> <span class="title class_">Target</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;;</span></span><br><span class="line"><span class="language-javascript">      <span class="title class_">EventEmitter</span>.<span class="title function_">inherit</span>(<span class="title class_">Target</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> test = <span class="keyword">new</span> <span class="title class_">Target</span>();</span></span><br><span class="line"><span class="language-javascript">      test.<span class="title function_">on</span>(</span></span><br><span class="line"><span class="language-javascript">        <span class="string">&quot;click&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;clcik&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="number">2</span></span></span><br><span class="line"><span class="language-javascript">      );</span></span><br><span class="line"><span class="language-javascript">      test.<span class="title function_">trigger</span>(<span class="string">&quot;click&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      test.<span class="title function_">trigger</span>(<span class="string">&quot;click&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æºä»£ç :eventemitter.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   æµè§ˆå™¨ç«¯æ¨¡æ‹ŸEventEmitterçš„å®ç°ï¼Œæ‹“å±•äº†éƒ¨åˆ†åŠŸèƒ½ï¼Œæ·»åŠ äº†å®šåˆ¶å®è·µä¿ƒå‘çš„æ¬¡æ•°çš„åŠŸèƒ½ï¼Œ</span></span><br><span class="line"><span class="comment">   ä½¿ç”¨æ–¹å¼å’Œå…¶ä»–çš„EventEmiiterç±»ä¼¼ã€‚</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line">(<span class="keyword">function</span> (<span class="params"><span class="variable language_">window</span>, <span class="literal">undefined</span></span>) &#123;</span><br><span class="line">  <span class="string">&quot;use strict&quot;</span>;</span><br><span class="line">  <span class="comment">/*æ„é€ å‡½æ•°*/</span></span><br><span class="line">  <span class="keyword">var</span> <span class="title class_">EventEmitter</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">events</span> = &#123;&#125;; <span class="comment">//ä¿å­˜äº‹åŠ¡ï¼Œå­˜å‚¨ç»“æ„ä¸º&#123;&#x27;eventName1&#x27;:[&#123;listener:functionè§¦å‘çš„å‡½æ•°, time:è§¦å‘çš„æ¬¡æ•°&#125;], &#x27;eventName2&#x27;:[],&#125;</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title class_">EventEmitter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">once</span> = <span class="keyword">function</span> (<span class="params">evt, listener</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">addListener</span>(evt, listener, <span class="number">0</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">/*è·å–æ‰€æœ‰çš„äº‹åŠ¡*/</span></span><br><span class="line">  <span class="title class_">EventEmitter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getEvents</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">events</span> || (<span class="variable language_">this</span>.<span class="property">events</span> = &#123;&#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">/*è·å–æŸä¸ªå®è·µçš„æ‰€æœ‰è§¦å‘å‡½æ•°*/</span></span><br><span class="line">  <span class="title class_">EventEmitter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getListeners</span> = <span class="keyword">function</span> (<span class="params">evt</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> events = <span class="variable language_">this</span>.<span class="title function_">getEvents</span>();</span><br><span class="line">    <span class="keyword">return</span> events[evt] || (events[evt] = []);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">      æ³¨å†Œå®è·µè§¦å‘å‡½æ•°</span></span><br><span class="line"><span class="comment">      evet:äº‹ä»¶åç§°</span></span><br><span class="line"><span class="comment">      listener:äº‹ä»¶ç›‘å¬å‡½æ•°</span></span><br><span class="line"><span class="comment">      time:å¯é€‰ï¼Œé€‰æ‹©å¯ä»¥è§¦å‘çš„æ¬¡æ•°ï¼Œ-1è¡¨ç¤ºæ— æ•°æ¬¡ï¼Œé»˜è®¤ä¸º-1</span></span><br><span class="line"><span class="comment">    **/</span></span><br><span class="line">  <span class="title class_">EventEmitter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">on</span> = <span class="keyword">function</span> (<span class="params">evt, listener, time</span>) &#123;</span><br><span class="line">    time = <span class="keyword">typeof</span> time == <span class="string">&quot;number&quot;</span> ? time : -<span class="number">1</span>;</span><br><span class="line">    time = time &gt;= -<span class="number">1</span> ? time : -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">var</span> listeners = <span class="variable language_">this</span>.<span class="title function_">getListeners</span>(evt);</span><br><span class="line">    <span class="keyword">var</span> listenerWrapper = &#123;</span><br><span class="line">      <span class="attr">listener</span>: listener,</span><br><span class="line">      <span class="attr">time</span>: time,</span><br><span class="line">    &#125;;</span><br><span class="line">    listeners.<span class="title function_">push</span>(listenerWrapper);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">/*addListener å’Œon åŒä¹‰ */</span></span><br><span class="line">  <span class="title class_">EventEmitter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">addListener</span> = <span class="title class_">EventEmitter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">on</span>;</span><br><span class="line">  <span class="comment">/*ç§»é™¤äº‹ä»¶çš„æ‰€æœ‰ç›‘å¬å‡½æ•°*/</span></span><br><span class="line">  <span class="title class_">EventEmitter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">off</span> = <span class="keyword">function</span> (<span class="params">evt</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> events = <span class="variable language_">this</span>.<span class="title function_">getEvents</span>();</span><br><span class="line">    events[evt] = [];</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="title class_">EventEmitter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">removeEvent</span> = <span class="title class_">EventEmitter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">off</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">      ä¼šåˆ é™¤åŒä¸€äº‹ä»¶ä¸­çš„æ‰€æœ‰listener</span></span><br><span class="line"><span class="comment">    **/</span></span><br><span class="line">  <span class="title class_">EventEmitter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">removeListener</span> = <span class="keyword">function</span> (<span class="params">evt, listener</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> listeners = <span class="variable language_">this</span>.<span class="title function_">getListeners</span>(evt);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; listeners.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (listeners[i].<span class="property">listener</span> == listener) &#123;</span><br><span class="line">        <span class="keyword">delete</span> listeners[i];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">      è§¦å‘äº‹ä»¶</span></span><br><span class="line"><span class="comment">    **/</span></span><br><span class="line">  <span class="title class_">EventEmitter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">trigger</span> = <span class="keyword">function</span> (<span class="params">evt, args</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> listeners = <span class="variable language_">this</span>.<span class="title function_">getListeners</span>(evt);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; listeners.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">var</span> listener = listeners[i];</span><br><span class="line">      <span class="keyword">if</span> (listener.<span class="property">time</span> != -<span class="number">1</span>) &#123;</span><br><span class="line">        listener.<span class="property">time</span>--;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (listener.<span class="property">time</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">removeListener</span>(evt, listener.<span class="property">listener</span>); <span class="comment">//å¯ä»¥åŒæ­¥æˆ–å¼‚æ­¥æ‰§è¡Œ</span></span><br><span class="line">      &#125;</span><br><span class="line">      listener.<span class="property">listener</span>.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args || []);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="title class_">EventEmitter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">fire</span> = <span class="title class_">EventEmitter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">trigger</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">      è§¦å‘äº‹ä»¶</span></span><br><span class="line"><span class="comment">    **/</span></span><br><span class="line"></span><br><span class="line">  <span class="title class_">EventEmitter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">emit</span> = <span class="keyword">function</span> (<span class="params">evt</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> args = <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">trigger</span>(evt, args);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title class_">EventEmitter</span>.<span class="property">inherit</span> = <span class="keyword">function</span> (<span class="params">target</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> target.<span class="property"><span class="keyword">prototype</span></span> == <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="string">&quot;target:&quot;</span> + target + <span class="string">&quot;must have prototype&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> souPto = <span class="title class_">EventEmitter</span>.<span class="property"><span class="keyword">prototype</span></span>;</span><br><span class="line">    <span class="keyword">var</span> tarPto = target.<span class="property"><span class="keyword">prototype</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> souPto) &#123;</span><br><span class="line">      tarPto[key] = souPto[key];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> target;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">EventEmitter</span> = <span class="title class_">EventEmitter</span>;</span><br><span class="line">&#125;)(<span class="variable language_">window</span>);</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/2/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">115</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">34</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/daykalif" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:r00t_daykalif@aliyun.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.daykalif.com/" title="Daykalif" target="_blank">Daykalif</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2019 &mdash; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-snowflake-o"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">r00t_daykalif</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">290.7k</span>
  
</div>






<div style="width:300px;margin:0 auto; padding:20px 0;">
	<a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010902002156" style="display:inline-block;text-decoration:none;height:20px;line-height:20px;">
    <img src="https://www.daykalif.com/beian.png" style="float:left;"/>
    <p style="float:left;height:20px;line-height:20px;margin: 0px 0px 0px 5px; color:#939393;">
    æµ™å…¬ç½‘å®‰å¤‡ 33010902002156å·
    </p>
  </a>
</div>






        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'NXoB8ypSoELq08t7Y4t4Y7Co-gzGzoHsz',
        appKey: 'q00Ulu1a5iQSaM6XV0ba4QeF',
        placeholder: 'ãƒ¾ï¾‰â‰§âˆ€â‰¦)oæ¥å•Šï¼Œå¿«æ´»å•Š!',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("NXoB8ypSoELq08t7Y4t4Y7Co-gzGzoHsz", "q00Ulu1a5iQSaM6XV0ba4QeF");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

</body>
</html>
